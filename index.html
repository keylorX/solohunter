<!DOCTYPE HTML >
<HTML Lang="ar" class="">

<HEAD>
    <meta charset='utf-8'> <!--amira-->
    <link href="/static/plugins/jquery-ui-1.8.23.custom/css/cupertino/jquery-ui-1.8.23.custom.css"
          media="screen,projection,print" rel="stylesheet"
          type="text/css"/>
    <link href="/static/css/jquery.alerts.css" media="screen,projection,print" rel="stylesheet" type="text/css"/>
    <link href="/static/plugins/uniform/aristo/uniform.aristo.css" media="screen,projection,print" rel="stylesheet"
          type="text/css"/>
    <link href="/static/plugins/jquery-multiselect/css/common.css" rel="stylesheet" type="text/css"/>
    <link href="/static/plugins/jquery-multiselect/css/ui.multiselect.css" rel="stylesheet" type="text/css"/>
    <LINK href="/static/css/style1.css" rel="stylesheet">
    <LINK href="/static/css/colors.css" rel="stylesheet">
    <title id="title">SIS system</title>
    <LINK href="/static/css/css.css" rel="stylesheet" type="text/css">
    <SCRIPT src="/static/js/modernizr-1.7.min.js"></script>
    <script src="/static/js/jquery/jquery-1.6.4.min.js" type="text/javascript"></script>
    <script charset="UTF-8" src="/static/js/jquery/json2.js?v=aswed" type="text/javascript"></script>
    <script src="/static/js/jquery/jquery.blockUI.js" type="text/javascript"></script>
    <script charset="UTF-8" src="/static/js/jquery/jquery.alerts.js" type="text/javascript"></script>
    <script src="/static/js/jquery/jquery.validate-min.js" type="text/javascript"></script>
    <script src="/static/plugins/jquery-ui-1.8.23.custom/js/jquery-ui-1.8.23.custom.min.js"
            type="text/javascript"></script>
    <script src="/static/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
    <script src="/static/plugins/jquery-multiselect/js/ui.multiselect.js" type="text/javascript"></script>
    <script src="/static/plugins/multiple-file-upload/jquery.MultiFile.js" type="text/javascript"></script>
    <!--&lt;!&ndash; jQuery Modal &ndash;&gt;-->
    <script src="/static/js/jquery/jquery.modal.min.js"></script>
    <script type="text/javascript" src="/static/js/cardDesign.js"></script>
    <link href="/static/css/jquery.modal.min.css" rel="stylesheet"/>
    <style>

        body {
            display: inline-block;

        }

        td {
            vertical-align: top;
            white-space: nowrap;
        }

        th {
            text-align: center !important;
        }

        .TdLabel {
            padding: 2px;
        }

        input {
            padding: 3px;
            margin: 3px
        }

        .error {
            color: red;
        }


        Button {
            display: inline;
            margin: 0 7px 0 0;
            background-color: #eeeeee;
            border: 1px solid #a2aeb9;
            font-family: Arial, Verdana, sans-serif;
            text-decoration: none;
            font-weight: bold;
            cursor: pointer;
            line-height: 100%;
            padding: 5px 5px 3px 5px;
            font-size: 11pt;
            color: #336699;
            border-radius: 5px;
            text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.15);
            box-shadow: 0 0 0 1px #0086ba inset, /* Outer bevel */ 0 0 0 1px #6cdcea inset, /* Inner bevel */ /*0 0 0 2px #6cdcea inset,  Inner bevel  gives more highlight*/ 0 30px 20px -18px rgba(255, 255, 255, 0.65) inset, /* Inner gradient */ 1px 1px 1px rgba(0, 0, 0, 0.2) /* Drop shadow */;
            -webkit-border-radius: 5px;
            -webkit-text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.15);
            -webkit-box-shadow: 0 0 0 1px #0086ba inset, /* Outer bevel */ 0 0 0 1px #6cdcea inset, /* Inner bevel */ 0 30px 20px -18px rgba(255, 255, 255, 0.65) inset, /* Inner gradient */ 1px 1px 1px rgba(0, 0, 0, 0.2) /* Drop shadow */;
        }

        option {
            background-color: #d3d3d3;
            font-size: 13pt;
        }

        Button:hover {
            background-color: #839ea5;
            color: white;
        }

        .stimeTabletd {
            border-width: 3px;
            padding: 1px;
            border-style: 1px;
            border-color: blue;
            vertical-align: middle;
            background-color: #FFFFFF;
        }

        .ui-tabs-panel {
            max-height: 200px;
            overflow: auto;
        }

        #CoursesTableForm td, #CoursesTableForm th {
            white-space: normal;
        }

        .tblRegCrs td, .tblRegCrs th {
            border: thin solid rgb(196, 221, 231);
            margin-left: auto;
            margin-right: auto;
            padding: 3px;
        }

        #studentBasic .TdData {
            min-width: 3ex;
        }

        #printDiv td {
            border-collapse: collapse;

        }

        .secondaryDegreesTbl td {
            padding: 5px;
        }

        .ui-autocomplete {
            max-height: 200px;
            overflow-y: auto;
            /* prevent horizontal scrollbar */
            overflow-x: hidden;
            /* add padding to account for vertical scrollbar */
            padding-right: 20px;
        }
    </style>
    <script type="text/javascript">
        PortalLang = 'A';
        var RegType = "";
        var PortalUserId="";
        var ScopeID="";

        //----For Chrome Cashing-----//
        $.getScript("/static/js/general.js?num=" + Math.floor(Math.random() * 100000), function () {
            $.getScript("/static/js/tafqeet.js?num=" + Math.floor(Math.random() * 100000), function () {
                $.getScript("/static/js/words.js?num=" + Math.floor(Math.random() * 100000), function () {
                    Lang = PortalLang;
                    $.getScript("/static/js/index.js?num=" + Math.floor(Math.random() * 100000), function () {

                        $.getScript("/static/js/academicReg.js?num=" + Math.floor(Math.random() * 100000), function () {
                            $(document).ready(function () {
                                var stugender = stunationality = "";
                                ////////////////////////////clear sessions on closing window//////////////////////////////////
                                $('body').bind('mouseleave', function () {
                                    $(window).bind('beforeunload', function () {
                                        $.ajax({
                                            url: "/studentLogOut",
                                            type: "POST",
                                            cache: false,
                                            async: false,
                                            beforeSend: function () {
                                                $(".ui-effects-wrapper").remove();
                                            },
                                            success: function (data) {
                                                window.location = "/static/index.html";
                                            },
                                            complete: function (jqXHR, textStatus) {
                                                $.unblockUI();
                                                $(document).ajaxStop($.unblockUI);
                                                return false;
                                            },
                                            error: function (request, status, error) {
                                                str = " <div>error </div>";
                                            }
                                        });

                                    });
                                });
                                ///////////////////////////////////////////////////////////////
//                            PortalLang = 'A';
                                LoadAppVariables();
                                RegType = "student";
                                //setInterval(getNewMessages,60000);
                                //getNewMessages();
                                var _mv = randomNumber();
                                window.CKEDITOR_BASEPATH = '/static/plugins/ckeditor_3.6.4/ckeditor/';
                                $.when(getCSS("/static/css/mail.css?num=" + _mv), getCSS("/static/plugins/tagedit/css/jquery.tagedit.css?num=" + _mv),

                                    $.get("/static/plugins/multiple-file-upload/jquery.form.js?num=" + _mv), $.when($.get("/static/plugins/ckeditor_3.6.4/ckeditor/ckeditor.min.js?num=" + _mv)).done(function () {
                                        $.get("/static/plugins/ckeditor_3.6.4/ckeditor/skins/kama/skin.js?num=" + _mv)
                                    }), $.get("/static/plugins/tagedit/js/jquery.autoGrowInput.js?num=" + _mv), $.get("/static/plugins/tagedit/js/jquery.tagedit.js?num=" + _mv), $.get("/static/js/mail/mail.js?num=" + _mv)).done(function () {
                                    getNewMessages();

                                });


                                $('#prsData').trigger('click');
                                //$('#timetable').trigger('click');
                                $('#main-nav li').click(function () {
                                    $('#main-nav li').removeClass('current');
                                    $(this).addClass('current');

                                });
                                getNotificationsAppStudent();
                                //getGeneralMessage();

                            });

                        });
                    });
                });
            });
        });
        Lang = PortalLang;
        $.getScript("/static/js/jquery/jquery.barcode.0.3.js?num=" + new Date().getTime());
    </script>

</HEAD>
<BODY style="direction:rtl;">
<div id="homeDiv"></div>
</BODY>


<script>

    var CurrentNameA = "";
    var CurrentName = "";
    var PreQualDegree = ""
    var PreQualName = ""
    $(document).ready(function () {
        PortalLang = 'A';
        Lang = PortalLang;
        var tornadoData = "{{ data }}"
        itemsArray = ["AcademicReg", "Questionaire", "Desires", "QR_Attendance", "QR_weekly_Attendance", "material_grievances","courses_desires","gpa_calculator"]
        if (jQuery.inArray("{{data['item']}}", itemsArray) !== -1) {


            var type = "{{ data['type'] }}";
            var item = "{{data['item']}}";
            PortalLang = "{{data['lang']}}";
            if (PortalLang == "en") PortalLang = "E";
            if (PortalLang == "ar") PortalLang = "A";
            Lang = PortalLang;
            str = ('    <SECTION role="main"  id="main" style="margin-left:0px;">\n' +
                '        <div id=\'divContents\'>\n' +
                '         </div>\n' +
                '        <form id=\'FormStudentPersonalData\'></form>\n' +
                '    </SECTION>\n')
            $('#homeDiv').html(str);
            $('#homeDiv').css("direction", getName("rtl|ltr"));
            if (type == "studentPortal") {
                $("#portalDiv").hide();
                setTimeout(function () {
//                $("#navigation").css("display", "none");
//                $("#main").css("marginLeft", "0px");
                    if (item == "AcademicReg") {
                        openAcadRegisteration(type);
                    } else if (item == "Questionaire") {
                        openQuestionaire(type);
                    } else if (item == "Desires") {
                        getDesires(type);
                    } else if (item == "QR_Attendance") {
                        getStudentAttendance();
                    } else if (item == "QR_weekly_Attendance") {
                        getStudentWeeklyAttendance();
                    } else if (item == "material_grievances") {
                        MaterialGrievances();
                    } else if (item == "courses_desires") {
                        CoursesDesires();
                    }
                     else if (item == "gpa_calculator") {
                        GpaCalculator();
                    }


//                else if (item=="StudentProgress") viewStudentProgress(type);
                    $("#portalDiv").show();
                }, 1000)
            }
        } else {
            $.getScript("/static/js/general.js?num=" + Math.floor(Math.random() * 100000), function () {

                getUniversityData();
                getMenuItems();
                drawStudentData();
                studentForm()
            });
        }

    });

    function checkAccess(item){
        data={'access':false};
        $.ajax({
                url: "/getJCI",
                data: {
                    param0: "general.BasicData",
                    param1: "checkItemAccessRight",
                    param2: item
                },
                type: "post",
                cache: false,
                async: false,
                success: function (d) {
                    data=jQuery.parseJSON(d);

                },
                error: function () {
                    error();
                }
        });
        return data

    }
    function drawStudentData() {
        str = '<style>     body section[role=navigation] {\n' +
            '            padding: 25px 0px;\n' +
            //            '            '+getName("right|left")+': 0px;\n' +
            '            top: 0px;\n' +
            '            width: 271px;\n' +
            '            height: auto;\n' +
            '            position: absolute;\n' +
            '            background-color: #dde4e7;' +
            '        }' +
            '#main-nav ul li li {\n' +
            '      background-position: 0px 9px; padding: 2px 0px 2px 10px;background-position:' + getName("right|left") + ' ;\n' +
            '}' +
            '#main-nav ul li a {\n' +
            ' color:#2779c3;background-position: ' + getName("230|25") + 'px 8px; padding: 7px 0px 7px 50px; height: 21px; font-weight: bold; text-decoration: none; display: block; background-repeat: no-repeat; -webkit-transition: color 400ms ease; -moz-transition: color 400ms ease; transition: color 400ms ease;\n' +
            '}' +
            '</style>'
        str += '<DIV class="fixed-wraper" id="portalDiv"  dir="' + getName("rtl|ltr", PortalLang) + '">\n';
        strRight = ('    <SECTION role="main"  id="main" style="margin-' + getName('right|left') + ': 271px;margin-' + getName('left|right') + ': 0px;">\n' +
            '        <div id=\'divContents\'>\n' +
            '            <!--<img style=\'margin-left:auto;margin-right:auto;width:100px;display:block;\' src=\'/static/images/mans-college-logo.png\' align=\'center\' >--></div>\n' +
            '\n' +
            '        <form id=\'FormStudentPersonalData\'></form>\n' +
            '        <!-- Widget Container -->\n' +
            '\n' +
            '    </SECTION>\n')
        strLeft = ('    <SECTION role="navigation" id="navigation" >\n' +
            '        <HEADER style="margin-' + getName("right|left", PortalLang) + ':20px;">\n' +
            '            <H1 style=\'color:rgb(15 19 160);font-weight: bold;\'><font size="4"><p id="logo" class="university-name"></p><br/>\n' +
            '                <em style=\'font-size:60%\'>' + ((PortalLang == "A") ? "نظام ابن الهيثم لإدارة شئون الطلاب " : "Ibn al-Hitham System SIS ") + '</em></font></H1>\n' +

            '        </HEADER><!-- User Info -->\n' +
            '        <SECTION id="user-info" style="width: 80%;">\n');
        str1 = '            <DIV style="margin-top:10px">\n' +
            '                <!--<A title="Account Settings and Profile Page" href="#">Hello</A>-->\n' +
            '                <A id=\'stdLogName\' style=\'cursor: default;font-size: 7pt;\'>' + ((PortalLang == "A") ? "الطالب" : "Student ") + '</A>\n' +
            '                <A id=\'stdProgName\' style=\'cursor: default;font-size: 7pt;\'>' + ((PortalLang == "A") ? "البرنامج" : "Program ") + '</A>\n' +
            '                <!--<span id=\'loginTrys\' style="width: 10px;height: 12px;background-image: url(&quot;/static/images/template/clock.png&quot;);background-size: 16px 16px;-->\n' +
            '                <!--\t\t\t\t\t\t\t\t\t\t\t\tbackground-position:center;background-repeat: no-repeat;" title=\'login trys \'></span>-->\n' +
            '                <UL>\n' +
            //            '<LI><img src=\'/static/images/trans.png\' title="'+getName("تغير اللغه|Change PortalLanguage",PortalLang)+'" style="background:transparent;cursor: pointer;height:24px;width:24px;border:0px;" id="changePortalLang"/></LI>' +
            //
            '                    <LI>\n' +
            '                        <A title="Log out " class="button-link" href="#" id=\'LogOutImg\' style="font-size: 6pt;">' + ((PortalLang == "A") ? "خروج" : "Logout") + '</A>\n' +
            '                    </LI>\n' +

            '                    <LI>\n' +
            '                        <A title="change Password" class="button-link" href="#" id=\'ChangePass\' style="font-size: 6pt;">' + ((PortalLang == "A") ? "تغير كلمة المرور" : "Change Password") + '</A>\n' +
            '                    </LI>\n<br>' +
            '                    <LI>\n' +
            '                        <A title="change language" class="button-link" href="#" id="changePortalLang" style="font-size: 6pt;' + getName("margin-left:52px|") + '">' + ((PortalLang == "A") ? "تغير اللغه" : "Change Language") + '</A>\n' +
            '                    </LI>\n' +


            '\n' +
            '                </UL>\n' +
            '            </DIV>\n';
        str2 = '            <IMG alt="Sample User Avatar" src="/static/images/man.gif" id="UsrImg" style="' + getName("margin-left:50px|") + '">\n';
        strLeft += ((PortalLang == "A") ? str1 : str2);
        strLeft += ((PortalLang == "A") ? str2 : str1);
        strLeft += ('        </SECTION>\n' +
            '        <NAV id="main-nav" style="margin-' + getName("right|left", PortalLang) + ': 20px">\n' +
            '            <UL id="main_menu" style="direction:' + getName("rtl|ltr", PortalLang) + '; text-align:' + getName('right|left', PortalLang) + '; ">\n' +
            '\n' +
            '            </UL>\n' +
            '        </NAV><!-- /Main Navigation --><!-- Sidebar -->\n' +
            '\n' +
            '    </SECTION>\n')
        str += ((PortalLang == "A") ? strRight : strLeft);
        str += ((PortalLang == "A") ? strLeft : strRight);
        str += '</DIV>';


        $('#homeDiv').html(str);
        $('#changePortalLang').click(function () {
            if (PortalLang == "A") {
                PortalLang = "E";
            } else if (PortalLang == "E") {
                PortalLang = "A";
            }
            Lang = PortalLang;
//            $.getScript("/static/js/words.js?num=" + Math.floor(Math.random() * 100000), function () {
//                Lang = PortalLang;
//            });
            getUniversityData();
            getMenuItems();

            drawStudentData();
            studentForm()
            //$('#timetable').trigger('click');
            $('#main-nav li').click(function () {
                $('#main-nav li').removeClass('current');
                $(this).addClass('current');

            });

            $("body").css("direction", getName("rtl|ltr"));
        });

        $("#ChangePass").click(function () {
            var Title = getName('تغيير كلمة المرور|Change Password', PortalLang);
            var width = 400
            var height = 200
            var btnTxt;
            if (PortalLang == 'A') {
                btnTxt = {
                    "Ok": "موافق",
                    "Cancel": "إلغاء"
                }
            } else {
                btnTxt = {
                    "Ok": "Ok",
                    "Cancel": "Cancel"
                }
            }
            $('<Div id="DivChangePass" dir="' + dir + '">'
                + "<table id='ChangePassTbl' dir='" + dir + "'>"
                + "	<tr style='height:35px;vertical-align:middle;'><td style='height:35px;vertical-align:middle;'>" + NewPassword + "</td><td><input id='PassTxt' name='PassTxt' type='password'/></td></tr> "
                + "	<tr style='height:35px;vertical-align:middle;'><td style='height:35px;vertical-align:middle;'>" + RePassword + "</td><td><input id='RePassTxt' name='RePassTxt' type='password'/></td></tr> "
                + "</table>"
                + '</Div>').dialog({
                modal: true,
                autoOpen: true,
                title: Title,
                closeOnEscape: true,
                zIndex: 3999,
                width: width,
                height: height,
                resizable: true,
                position: 'center',
                show: 'fade',
                hide: 'fade',
                buttons: [{
                    text: btnTxt["Ok"],
                    click: function () {
                        if ($("#PassTxt").val() == $("#RePassTxt").val()) {

                            //check password complexity
                            var strcomplex = complexPass($("#PassTxt").val());
                            if (strcomplex == 'true') {
                                //change password
                                var Data = {};
                                Data["UserPassword"] = $("#PassTxt").val();
                                $.ajax({
                                    url: "/getJCI",
                                    type: "post",
                                    cache: false,
                                    data: {
                                        param0: "stuAdmission.stuAdmission",
                                        param1: "ChangePassWord",
                                        param2: "userType",
                                        param3: JSON.stringify(Data)
                                    },
                                    success: function (d) {
                                        var data = jQuery.parseJSON(d);
                                        if (data) {
                                            if (data.Msg == 'sucess')
                                                jAlert(getName('تم حفظ كلمة المرور|Password changed', PortalLang));
                                            //GetsysUser();
                                            //$("#BasicData").load("/static/html/systemAdmin/EditSystem/usersTabs.html");
                                        }
                                    },
                                    error: function () {
                                        error();
                                    }
                                });

                                $("#DivChangePass").dialog("close");
                                $("#DivChangePass").dialog("destroy").remove();
                                if ($("#ChangePassTbl").html != '') {
                                    $("#ChangePassTbl").html('');
                                }
                            }//end if -- check password complexity
                            else {
                                var msg = getName(strcomplex, PortalLang);
                                jAlert(msg);
                            }

                        } else {
                            var msg = getName('كلمه المرور غير متطابقه|Password texts does not match', PortalLang);
                            jAlert(msg);
                        }

                    }
                }, {
                    text: btnTxt["Cancel"],
                    click: function () {
                        $("#DivChangePass").dialog("close");
                        $("#DivChangePass").dialog("destroy").remove();
                        if ($("#ChangePassTbl").html != '') {
                            $("#ChangePassTbl").html('');
                        }
                    }
                }],
                close: function (event, ui) {
                    $("#DivChangePass").dialog("close");
                    $("#DivChangePass").dialog("destroy").remove();
                    if ($("#ChangePassTbl").html != '') {
                        $("#ChangePassTbl").html('');
                    }
                }
            });
        });

        $("#LogOutImg").click(function () {
            $.ajax({
                url: "/studentLogOut",
                type: "POST",
                cache: false,
                async: false,
                beforeSend: function () {
                    $(".ui-effects-wrapper").remove();
                },
                success: function (data) {
                    try {
                        window.location = "/static/index.html";

                    } catch (e) {
                        var msg = getName("حدث خطا ما|Error", PortalLang);
                        jAlert(getName(msg, PortalLang));
                        e = null;
                        window.location = "/static/index.html";
                    }
                },
                complete: function (jqXHR, textStatus) {
                    $.unblockUI();
                    $(document).ajaxStop($.unblockUI);
                    return false;
                },
                error: function (request, status, error) {
                    str = " <div>error </div>";
                }
            });
        });


    }


    function studentForm() {
        var str = "    <table  border=0 align='" + ((Lang == "A") ? "right" : "left") + "' dir =" + getName("rtl|ltr") + " id='tblFrm'>"
            + "        <tr height=25px><td colspan=4 class=TdLabel style='color:#2779c3;font-weight:bold;font-size:16px;'>" + ((Lang == "A") ? "بيانات شخصية" : "Personal Data") + "</td></tr>"
            + "        <tr height=25px>"
            + "<span id='message'></span>"
            + "            <td id=LabelArName class=TdLabel style='width:15%' >" + ((PortalLang == "A") ? "الاسم عربي" : "Arabic Name")
            + "            </td>"
            + "            <td id=ArNameTD class=NewLabel>"
            + "                <span id=SpArName class='ReadData TdData'  style='width:45ex'>"
            + "                </span>"
            + "                <input id=TxtArName name=TxtArName type=text size=40 class='Input required fullname EditData' />"
            + "                &nbsp;"
            + "            </td>"
            + "        </tr>"

            + "        <tr height=25px>"
            + "            <td id=LabelEnName class=TdLabel>" + ((PortalLang == "A") ? "الاسم انجليزي" : "English Name")
            + "            </td>"
            + "            <td id=EnNameTD class=NewLabel>"
            + "                <span id=SpEnName class='ReadData TdData' style='min-width:45ex'></span>"
            + "                <input id=TxtEnName name=TxtEnName type=text  size=40 class='Input fullname EditData'><label id=EnNameError></label>"
            + "            </td>"
            + "        </tr>"

            + "        <tr height=25px>"
            + "            <td id=LabelEnName class=TdLabel>" + ((PortalLang == "A") ? "رقم الطالب " : "Student Id")
            + "            </td>"
            + "            <td id=EnNameTD class=NewLabel>"
            + "                <span id=SpStudentId class='ReadData TdData' style='min-width:45ex'></span>"
            + "                <input id=TxtStudentId type=text  size=40 class='Input fullname EditData'><label id=StudentIdError></label>"
            + "            </td>"
            + "        </tr>"
            + "        <tr height=25px>"
            + "            <td id=LabelNationality class=TdLabel>" + ((PortalLang == "A") ? "بلد الجنسية " : "Nationality")
            + "            </td>"
            + "            <td id=NationalityTD class=NewLabel>"
            + "                <span id=SpNationality class='ReadData TdData' style='width:150px'></span>"
            + "                <select id=SelectNationality class='RegionSelect Input EditData'></select>"
            + "            </td>"
            + "        </tr>"


            + "        <tr height=25px>"
            + "            <td id=LabelGender class=TdLabel>" + ((PortalLang == "A") ? "النوع" : "Gender")
            + "            </td>"
            + "            <td id=GenderTD class=NewLabel>"
            + "                <span id=SpGender class='ReadData TdData'></span>"
            + "                <input type=radio name=RadioGender checked=checked value='2.1.' class='Input required EditData'><label class='NewLabel  EditData'>" + ((PortalLang == "A") ? "ذكر" : "Male") + " </label>"
            + "                <input name=RadioGender type=radio value='2.2.' class='Input required EditData'><label class='NewLabel  EditData'> " + ((PortalLang == "A") ? "انثي" : "Female") + " </label>"
            + "            </td>"
            + "        </tr>"

            + "        <tr height=25px>"
            + "            <td id=LabelRelegion class=TdLabel>" + ((PortalLang == "A") ? "الديانه" : "Religion")
            + "            </td>"
            + "            <td id=RelegionTD class=NewLabel>"
            + "                <span id=SpRelegion class='ReadData TdData'></span>"
            + "                <input type=radio name=RadioRelegion checked=checked value='1.1.' class='HiddenControl EditData'><label class='NewLabel HiddenControl EditData'>" + ((PortalLang == "A") ? "مسلم" : "Muslim") + "</label>"
            + "                <input type=radio  name=RadioRelegion  value='1.2.' class='HiddenControl EditData'><label class='NewLabel HiddenControl EditData'> " + ((PortalLang == "A") ? "مسيحي" : "Christian") + "</label>"
            + "            </td>"
            + "        </tr>"


            + "        <tr height=25px>"
            + "            <td id=LabelBirthdate class=TdLabel>" + ((PortalLang == "A") ? "تاريخ الميلاد" : "Date of birth")
            + "            </td>"
            + "            <td id=BirthdateTD class=NewLabel>"
            + "                <span id=SpBirthdate class='ReadData TdData' style='width:10ex'></span>"
            + "                <input id=TxtBirthdate name=TxtBirthdate type=text class='Input required  EditData' size=10 readonly>&nbsp;"
            + "            </td>"
            + "            <td id=LabelBirthPlace class=TdLabel style='width:15%'>" + ((PortalLang == "A") ? "محل الميلاد" : "Place of birth")
            + "            </td>"
            + "            <td id=BirthPlaceTD class=NewLabel>"
            + "                <span id=SpBirthPlace class='ReadData TdData'  style='width:150px'></span>"
            + "                <table style='height:20px' class='EditData'><tr><td><select id=SelectBirthPlace class='RegionSelect Input  required  EditData'></select>&nbsp;</td><td style='padding-top:8px'>" + (PortalLang == 'A' ? ("<img class='ImgPrev  EditData' flag=SelectBirthPlace  src='/static/images/prevpg.gif' style='cursor:pointer;' title='" + ((PortalLang == "A") ? "السابق" : "Previous") + "'>&nbsp;&nbsp;"
                    + "                <img class='ImgNext  EditData' flag=SelectBirthPlace   src='/static/images/nextpg.gif' style='cursor:pointer;' title='" + ((PortalLang == "A") ? "التالي" : "Next") + "'>") :
                ("<img class='ImgPrev  EditData' flag=SelectBirthPlace   style='cursor:pointer;' src='/static/images/nextpg.gif' title='" + ((PortalLang == "A") ? "السابق" : "Previous") + "'>&nbsp;&nbsp;"
                    + "                <img class='ImgNext  EditData' flag=SelectBirthPlace src='/static/images/prevpg.gif'   style='cursor:pointer;' title='" + ((PortalLang == "A") ? "التالي" : "Next") + "'>"))

            + "</td></tr> </table>"
            + "            </td>"
            + "        </tr>"
            + "        <tr height=25px>"
            + "            <td id=LabelIdNum class=TdLabel>" + getName("الرقم القومي / جواز السفر |National ID  \\ Passport No.", PortalLang)

            + "            </td>"
            + "            <td id=IdNumTD class=NewLabel>"
            + "                <span id=SpIdNum class='ReadData TdData' style='width:18ex'></span>"
            + "                <input type=text id=TxtIdNum name=TxtIdNum maxlength=14 size=15 class='Input required number EditData'>&nbsp;"
            + "                <label class=' EditData' id=labNatError></label>"
            + "            </td>"
            /*   */
            + "            <td id=LabelIdPlace class=TdLabel style='vertical-align:top;direction:" + getName("rtl|ltr") + "' colspan=2>" + ((PortalLang == "A") ? "تاريخ الاصدار" : "Release Date")
            + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span id=SpIdDate class='ReadData TdData' style='width:10ex'></span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; "
            + ((PortalLang == "A") ? "محل الاصدار" : "Release Place") + "           "
            + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span id=SpIdPlace class='ReadData  TdData' style='width:150px'></span>"


            + "                <input type=text id=TxtIdDate class='Input EditData' size=10 readonly>"
            + "            </td>"
            + "        </tr>"


            + "        <tr height=25px><td colspan=4 class=TdLabel align=center><img src='images/line.gif'/></td></tr>"
            + "        <tr height=25px><td colspan=2 class='TdLabel' style='color:#2779c3;font-weight:bold;font-size:16px;' >" + ((PortalLang == "A") ? "بيانات العائلة" : "Family Member Data") + " :<br/></td></tr>"

            + "		<tr height=25px>"
            + "			<td >&nbsp;<label class=TdLabel>" + ((PortalLang == "A") ? "اسم ولي امر" : "Guardian Name") + " </label></td>"
            + "			<td width='20%' class=NewLabel><input type=text size=40 id=txtGarduianName name=txtGarduianName class='EditData Input HiddenControl'>"
            + "<span id=spGarduianName name=spGarduianName class='ReadData NewLabel TdData' style='width:40ex'></span></td>"
            + "		</tr>"

            + "		<tr height=25px>"
            + "			<td>&nbsp;<label class=TdLabel>" + ((PortalLang == "A") ? "الوظيفة" : "Job") + " </label></td>"
            + "            <td width='20%' class=NewLabel><input type=text size=40 id=txtGarduianJobTitle name=txtGarduianJobTitle class='EditData Input HiddenControl'>"
            + "<span id=spGarduianJobTitle name=spGarduianJobTitle class='ReadData NewLabel TdData' style='width:40ex'></span></td>"
            + "		</tr>"

            //+ "		<tr height=25px>"
            //+ "			<td>&nbsp;<label class=TdLabel>" + LabelRelation + "</label></td>"
            //+ "			<td class=NewLabel><select id=SelectRelation class='EditDataInput HiddenControl'>" + GetRelation() + "</select><label id=NumError></label>"
            //+ "<span id=spRelation name=spRelation class='ReadDataNewLabel TdData' style='width:150px'></span></td>"
            //


            + "		<tr height=25px>"
            + "			<td>&nbsp;<label class=TdLabel>" + ((PortalLang == "A") ? "المدينة" : "The City") + " </label></td>"
            + "			<td class=NewLabel>"
            + "<span id=spGaddressRegion  class='ReadData NewLabel TdData' ></span>"
            + "	<table style='height:20px'><tr><td><select id=SelectFamilyAddressRegion name=SelectFamilyAddressRegion class='RegionSelect Input required EditData' >"
            + "	</select>&nbsp;</td><td style='padding-top:8px'>"
            + (PortalLang == 'A' ? ("<img class='ImgPrev  EditData' flag=SelectFamilyAddressRegion  src='/static/images/prevpg.gif' style='cursor:pointer;' title='" + ((PortalLang == "A") ? "السابق" : "Previous") + "'>&nbsp;&nbsp;"
                    + "                <img class='ImgNext  EditData' flag=SelectFamilyAddressRegion   src='/static/images/nextpg.gif' style='cursor:pointer;' title='" + ((PortalLang == "A") ? "التالي" : "Next") + "'>") :
                ("<img class='ImgPrev  EditData' flag=SelectFamilyAddressRegion   style='cursor:pointer;' src='/static/images/nextpg.gif' title='" + ((PortalLang == "A") ? "السابق" : "Previous") + "'>&nbsp;&nbsp;"
                    + "                <img class='ImgNext  EditData' flag=SelectFamilyAddressRegion src='/static/images/prevpg.gif'   style='cursor:pointer;' title='" + ((PortalLang == "A") ? "التالي" : "Next") + "'>"))
            + "</td></tr> </table>"

            + "</td>"
            + "		</tr>"

            + "		<tr height=25px>"
            + "			<td>&nbsp;<label class=TdLabel>" + ((PortalLang == "A") ? "العنوان" : "Address") + " </label></td>"
            + "			<td class=NewLabel><input type=text size=40 id=txtGAddress name=txtGAddress class='EditData Input HiddenControl'><label id=NumError>"
            + "<span id=spGAddress name=spGAddress class='ReadData NewLabel TdData' style='width:40ex'></span></td>"
            + "		</tr>"
            + "		<tr height=25px>"
            + "			<td>&nbsp;<label class=TdLabel>" + ((PortalLang == "A") ? "تليفون المنزل" : "Home Tel") + " </label></td>"
            + "			<td class=NewLabel><input type=text size=15 id=txtGHomeTel name=txtGHomeTel class='EditData Input number'><label id=NumError/><span id=spGHomeTel class='ReadData NewLabel TdData' style='width:150px'></span></td>"

            + "			<td>&nbsp;<label class=TdLabel>" + ((PortalLang == "A") ? "الموبايل" : "Mobile") + "</label></td>"
            + "			<td class=NewLabel><input type=text size=15 id=txtGMobileTel name=txtGMobileTel class='EditData Input number'><label id=NumError/><span id=spGMobileTel  class='ReadData NewLabel TdData' style='width:150px'></span></td>"
            + "		</tr>"
            + "		<tr height=25px>"
            + "			<td>&nbsp;<label class=TdLabel>" + ((PortalLang == "A") ? "البريد الالكتروني" : "Email") + " </label></td>"
            + "			<td class=NewLabel><input type=text size=30 id=txtGEmail name=txtGEmail class='EditData Input email'><label id=NumError/><span id=spGEmail name=spGEmail class='ReadData NewLabel TdData' style='width:40ex'></span></td>"
            + "			<td>&nbsp;<label class=TdLabel>" + ((PortalLang == "A") ? "الفاكس" : "Fax") + " </label></td>"
            + "			<td class=NewLabel><input type=text size=15 id=txtGFax name=txtGFax class='EditData Input number'><label id=NumError/><span id=spGFax name=spGFax class='ReadData NewLabel TdData' style='width:150px'></span></td>"
            + "		</tr>"

            + "        <tr height=25px><td colspan=4 class=TdLabel style='width:100%' align=center><img src='images/line.gif'/></td></tr>"
            + "        <tr height=25px><td  class=TdLabel style='color:#2779c3;font-weight:bold;font-size:16px;'>" + ((PortalLang == "A") ? "بيانات الاتصال" : "Contact Data") + "</td></tr>"
            + "	<tr height=25px>"
            + "	<td width='14%'>"
            + "	<label class=TdLabel id=LabelAddressRegion>" + ((PortalLang == "A") ? "المدينة" : "The City")
            + "	</label>"
            + "	</td>"
            + "	<td id=AddressRegionTD class=NewLabel>"
            + "	<span id=SpAddressRegion name=SpAddressRegion class='ReadData NewLabel TdData' style='width:150px'>"
            + "	</span>"
            + "	<table style='height:20px' class='EditData'><tr><td><select id=SelectAddressRegion name=SelectAddressRegion class='RegionSelect Input required EditData' >"
            + "	</select>&nbsp;</td><td style='padding-top:8px'>"
            + (PortalLang == 'A' ? ("<img class='ImgPrev  EditData' flag=SelectAddressRegion  src='/static/images/prevpg.gif' style='cursor:pointer;' title='" + ((PortalLang == "A") ? "السابق" : "Previous") + "'>&nbsp;&nbsp;"
                    + "                <img class='ImgNext  EditData' flag=SelectAddressRegion   src='/static/images/nextpg.gif' style='cursor:pointer;' title='" + ((PortalLang == "A") ? "التالي" : "Next") + "'>") :
                ("<img class='ImgPrev  EditData' flag=SelectAddressRegion   style='cursor:pointer;' src='/static/images/nextpg.gif' title='" + ((PortalLang == "A") ? "السابق" : "Previous") + "'>&nbsp;&nbsp;"
                    + "                <img class='ImgNext  EditData' flag=SelectAddressRegion src='/static/images/prevpg.gif'   style='cursor:pointer;' title='" + ((PortalLang == "A") ? "التالي" : "Next") + "'>"))
            + "</td></tr> </table>"
            + "	</td>"
            + "	</tr>"
            + "	<tr height=25px>"
            + "	<td>"
            + "	<label id=LabelAddress class=TdLabel>" + ((PortalLang == "A") ? "العنوان" : "Address")
            + "	</label>"
            + "	</td>"
            + "	<td id=AddressTD class=NewLabel>"
            + "	<span id=SpAddress  class='ReadData NewLabel TdData' style='width:40ex'>" + "</span>"
            + "	<input type=text size=40 id=TxtAddress name=TxtAddress class='Input required EditData'>"
            + "	</td>"
            + "	</tr>"
            + "	<tr height=25px>"
            + "	<td valign=top>"
            + "	<label id=LabelHomeTel class=TdLabel>" + ((PortalLang == "A") ? "تليفون المنزل" : "Home Tel")
            + "	</label>"
            + "	</td>"
            + "	<td id=HomeTelTD class=NewLabel>"
            + "	<span id=SpHomeTel  class='ReadData NewLabel TdData' style='width:15ex'>"
            + "	</span>"
            + "	<input type=text id=TxtHomeTel name=TxtHomeTel class='number required  Input  EditData' size=15>"
            + "	</td>"
            + "	<td valign=top>"
            + "	<label id=LabelMobileTel class=TdLabel>" + ((PortalLang == "A") ? "الموبايل" : "Mobile")
            + "	</label>"
            + "	</td>"
            + "	<td id=MobileTelTD class=NewLabel>"
            + "	<span  id=SpMobileTel class='ReadData NewLabel TdData' style='width:15ex'>"
            + "	</span>"
            + "	<input type=text id=TxtMobileTel name=TxtMobileTel class='Input required number EditData' size=15>"
            + "	</td>"
            + "	</tr>"
            + "	<tr height=25px>"
            + "	<td valign=top>"
            + "	<label id=LabelEmail class=TdLabel>" + ((PortalLang == "A") ? "البريد الالكتروني" : "Email")
            + "	</label>"
            + "	</td>"
            + "	<td id=EmailTD class=NewLabel>"
            + " <span dir='ltr' id=SpEmail  class='ReadData NewLabel TdData' style='width:30ex'  >"
            + "</span>"
            + "	<input type=text id=TxtEmail name=TxtEmail size=30 class='Input required email EditData'>"
            + "	</td>"
            + "	<td>"
            + "	<label id=LabelFax class=TdLabel>" + ((PortalLang == "A") ? "الفاكس" : "Fax")
            + "	</label>"
            + "	</td>"
            + "	<td id=FaxTD class=NewLabel>"
            + "<span id=SpFax  class='ReadData NewLabel TdData' style='width:15ex'></span>"
            + "	<input type=text id=TxtFax name=TxtFax class='number Input EditData' size=15>"
            + "	</td>"
            + "	</tr>"

            + "	<tr height=25px>"
            + "	<td>"
            + "	<label id=LabelMailBox class=TdLabel>" + ((PortalLang == "A") ? "صندوق البريد" : "Mail Box")
            + "	</label>"
            + "	</td>"
            + "	<td id=MailBoxTD class=NewLabel>"
            + "	<span id=SpMailBox  class='ReadData NewLabel TdData' style='width:15ex'>	</span>"
            + "	<input type=text id=TxtMailBox class='Input EditData' size=15>"
            + "	</td>"
            + "	<td>"
            + "	<label id=LabelSystemMail class=TdLabel>" + ((PortalLang == "A") ? "بريد النظام" : "system Mail")
            + "	</label>"
            + "	</td>"
            + "	<td id=MailBoxTD class=NewLabel>"
            + "	<span id=SpSystemMail  class='ReadData NewLabel TdData' style='width:15ex'>	</span>"
            + "	<input type=text id=TxtSystemMail class='Input EditData' >"
            + "	</td>"
            + "	</tr>"

            + "        <tr height=25px><td colspan=4 class=TdLabel style='width:100%' align=center><img src='images/line.gif'/></td></tr>"
            + "        <tr height=25px><td class=TdLabel style='color:#2779c3;font-weight:bold;font-size:16px;'>" + ((PortalLang == "A") ? "بيانات المؤهل السابق" : "Prequalfication Data") + "</td></tr>"
            + "<tr height=25px>"
            + "<td><label class=TdLabel>" + ((PortalLang == "A") ? "المدرسة" : "School") + " </label></td>"
            + "<td class=NewLabel colspan=3><input type=text size=40 id=TxtSchool name=TxtSchool class='Input required EditData'>"
            + "<span id=spSchool name=spSchool class='ReadData NewLabel TdData'></span>"
            + "</td>"
            + "</tr>"
            + "<tr height=25px>"
            + "<td><label class=TdLabel>" + ((PortalLang == "A") ? "المؤهل" : "Pre-Qualification") + " </label></td>"
            + "<td class=NewLabel><select id=slcPreQual name=slcPreQual class='Input required EditData'></select>"
            + "<span id=spPreQual name=spPreQual class='ReadData NewLabel TdData'  style='width:150px'></span></td>"
            + "</tr>"

            + "<tr height=25px>"
            + "<td><label class=TdLabel>" + ((PortalLang == "A") ? "سنة التخرج" : "Qualification Year") + " </label></td>"
            + "<td class=NewLabel><select id=slcPreQualYear name=slcPreQualYear class='Input required EditData' ></select>"
            + "<span id=spPreQualYear name=spPreQualYear class='ReadData TdData' style='width:150px'></span></td>"
            + "</tr>"


            //35.19.
            // دور التخرج
            + "<tr height=25px>"
            + "<td><label class=TdLabel>" + ((PortalLang == "A") ? "دور المؤهل" : "Qualification Turn") + " </label></td>"
            + "<td class=NewLabel><div><select id=slcPreQualturn name=slcPreQualturn class='Input required EditData' ></select></div>"
            + "<span id=spPreQualturn name=spPreQualturn class='ReadData TdData'></span>"
            + "</td>"
            + "</tr>"


            + "<tr height=25px>"
            + "<td><label class=TdLabel>" + ((PortalLang == "A") ? "مجموع الدرجات" : "Degrees") + " </label></td>"
            + "<td class=NewLabel><input type=text size=10 id=TxtPreQualDegree name=TxtPreQualDegree class='Input number required EditData'>"
            + "<span id=spPreQualDegree name=spPreQualDegree class='ReadData NewLabel TdData' style='width:9ex'></span></td>"
            + "			<td ><label class=TdLabel>" + ((PortalLang == "A") ? "النسبة" : "Percentage") + " </label></td>"
            + "			<td  ><span id=spMinPercentage name=spMinPercentage class='ReadData TdData' style='width:10ex'></span><input type=text size=10 id=TxtPercentage name=TxtPercentage class='Input required number EditData'> % "//<span id=spMinPercentage name=spMinPercentage class='ReadData TdData' style='width:6ex'></span>
            + "		</tr>"

            + "<tr height=25px>"
            + "<td><label class=TdLabel>" + "Sat I" + " </label></td>"
            + "<td class=NewLabel><input type=text size=10 id=TxtSat1 name=TxtSat1 class='Input number EditData'>"
            + "<span id=spSat1 name=spSat1 class='ReadData NewLabel TdData' style='width:9ex'></span>"
            + "</td>"
            + "<td ><label class=TdLabel style='width:100px;'>" + "Sat II" + " </label></td>"
            + "<td  ><input type=text size=10 id=TxtSat2 name=TxtSat2 class='Input number EditData'> "
            + "<span id=spSat2 name=spSat2 class='ReadData NewLabel TdData' style='width:9ex'></span>"
            + "</td>"
            + "</tr>"

            + "<tr height=25px>"
            + "<td><label class=TdLabel>" + ((PortalLang == "A") ? "رقم الجلوس" : "seat Number ") + " </label></td>"
            + "<td class=NewLabel><input type=text size=10 id=TxtPacementNo name=TxtPacementNo class='Input required number EditData'>"
            + "<span id=spPacementNo name=spPacementNo class='ReadData TdData'></span>"
            + "</td>"
            + "</tr>"


            //LabelCoordNo
            //LabelCoordDate
            + "<tr height=25px>"
            + "<td><label class=TdLabel>" + ((PortalLang == "A") ? "رقم موافقة التنسيق " : "Coordination no.") + " </label></td>"
            + "<td class=NewLabel><input type=text size=10 id=TxtCoordNo name=TxtCoordNo class='Input number EditData'>"
            + "<span id=spCoordNo name=spCoordNo class='ReadData TdData'></span>"
            + "</td>"//f16

            + "<td><label class=TdLabel> " + ((PortalLang == "A") ? "تاريخ موافقة التنسيق" : "Coordination Date") + " </label></td>"
            + "<td class=NewLabel> <input type=text size=10 id=TxtCoordDate name=TxtCoordDate class='Input EditData' readonly>"
            + "<span id=spCoordDate name=spCoordDate class='ReadData TdData'></span> "
            + "</td>"//f17
            + "</tr>"

            + "        <tr height=25px><td colspan=4 class='TdLabel 'style='color:#2779c3;font-weight:bold;font-size:16px;' >" + getName('في حالة التحويل الي كلية او معهد اخر |Post Secondary Education (For transfered students )', PortalLang) + " : <br/></td></tr>"

            + "<tr height=25px>"
            + "<td><label class=TdLabel>" + ((PortalLang == "A") ? "الجهة المحول منها " : "University \\ Institute Name") + " </label></td>"
            + "<td class=NewLabel><input type=text size=40 id=TxtInstitute name=TxtInstitute class='Input EditData'>"
            + "<span id=spInstitute name=spInstitute class='ReadData TdData'></span>"
            + "</td>"//f18
            + "</tr>"
            //LabelInstAttendDate

            + "<tr height=25px>"
            + "<td><label class=TdLabel>" + ((PortalLang == "A") ? "سنة الالتحاق" : "enrollment year") + " </label></td>"
            + "<td class=NewLabel><div><select id=slcInstAttendDate name=slcInstAttendDate class='Input  EditData' ></select></div>"
            + "<span id=spInstAttendDate name=spInstAttendDate class='ReadData TdData'></span>"
            + "</td>"//f19
            + "</tr>"

            //// الرغبات
            + "        <tr height=25px><td colspan=4 class=TdLabel align=center><img src='images/line.gif'/></td></tr>"
            + "        <tr height=25px><td colspan=4 class='TdLabel 'style='color:#2779c3;font-weight:bold;font-size:16px;' >" + ((PortalLang == "A") ? "التخصص الذي يرغب في الالتحاق به" : "Major ") + " : <br/></td></tr>"
            + "<tr >"
            + "<td colspan=2><label class=TdLabel >" + ((PortalLang == "A") ? "الرغبات " : "Desirables") + " </label></td>"
            //+ "<td id=desirebales style='float:left;direction:ltr' colspan=2><select id=slcprogs name=slcprogs class='Input required multiselect' multiple='multiple' ><option value=''>----<option></select></td>"
            + "</tr>"

            + "<tr >"
            + "<td colspan=4 class='EditData'> <input type='checkbox' id ='chkAgreement' name='chkAgreement' class='required'><a href='#' id='dailogAgree' >" + ((PortalLang == "A") ? "أتعهد بالالتزام بالشروط" : "I agree to abide by the condition") + "</a> </td>"
            + "</tr>"
            + "        <tr height=25px><td colspan=4 class=TdLabel align=center><img src='images/line.gif'/></td></tr>"
           // + "        <tr height=25px><td colspan=4 class='TdLabel 'style='color:#2779c3;font-weight:bold;font-size:16px;' >" + ((PortalLang == "A") ? "الجزاءات" : "Sanctions ") + " : <br/></td></tr>"
           //     + "<tr ><td colspan=4>"
           //  +"<table id=studentSanctionsDetTable style='width: 100%;font-size: 15px'>"
           //
           //  +"</table>"
         //   +"</td></tr>"

            /*
             + "		<tr><td colspan=4 align=center style='width:100%'>"
             +"			 <span id=btnLevUpdate name=btnLevUpdate>"
             + DrawSystemButton("Update", 'Admission')
             + "			 </span>"

             + "			 <span id=btnLevSave name=btnLevSave>"
             + DrawSystemButton("Save", 'Admission')
             + "			 </span>"

             + "		</td></tr>"
             */
            + "    </table>";
        $('#FormStudentPersonalData').html(str);
        $("#FormStudentPersonalData").show();
        $(":text,select:not(.multiselect)").uniform();
        getStudent();
        //getQuestionnaireType();
        //$("#examtable").click(function(){
        //	$('#FormStudentPersonalData').html(getName('لا يوجد جداول متاحة|no tables available now '));
        //});

        GetBasicattributes({
            "item_id": ['35.1.4.', '35.1.5.']
        }, "", "slcPreQual", true);

        GetBasicattributes({
            "item_id": "35.19."/*,
             "limit": "10"*/,
            "order": "ids"
        }, "", "slcPreQualturn", true);


        var years = GetBasicattributes({
            "item_id": "35.5."/*,
             "limit": "10"*/,
            "order": "ids"
        }, "", "", true);

        //$.ajax({
        //    url: "/getJCI",
        //    type: "post",
        //    cache: false,
        //    async: true,
        //    data: {
        //	param0: "stuAdmission.stuAdmission",
        //	param1: "SelectedMajorAndProgs"
        //    },
        //    success: function(d){
        //	var data = jQuery.parseJSON(d);
        //	var str ="";
        //	if(data && data[0]){
        //	    for(var x=0;x<data.length;x++){
        //		var Name = getName(data[x].Name) ;
        //		var ID = data[x].ID;
        //		str += "<option value='"+ID+"'  title='"+Name+"' "+data[x].selected+" >"+Name+"</option>" ;
        //	    }
        //	}
        //	$('#slcprogs').html(str);
        //
        //    },complete:function(){
        //	$(".multiselect").multiselect({sortable: false});
        //	//$("#desirebales").css('float',align);
        //	},
        //    error: function(){
        //	error();
        //    }
        //});


        //slcInstAttendDate slcPreQualYear
        $('#slcInstAttendDate').html(years);
        $('#slcPreQualYear').html(years);

        $(".RegionSelect").html(GetFromRegion("", "1.", "", true));
        if ($(".ImgPrev").length > 0) {
            $(".ImgPrev").unbind('click');
            $(".ImgPrev").click(function () {
                fillRegionSelect(this, "Prev")
                $("#" + $(this).attr('flag')).prev('span').text('');
            });
        }
        if ($(".ImgNext").length > 0) {
            $(".ImgNext").unbind('click');
            $(".ImgNext").click(function () {
                fillRegionSelect(this, "Next")
                $("#" + $(this).attr('flag')).prev('span').text('');
            });
        }
        var d = new Date();
        LoadDatePicker();
        $("#TxtBirthdate").datepicker({
            yearRange: '1950:' + d.getFullYear() + '',
            changeYear: true,
            changeMonth: true,
            maxDate: d,
            dateFormat: 'dd/mm/yy'
        });
        $("#TxtIdDate").datepicker({
            yearRange: '1950:' + d.getFullYear() + '',
            changeYear: true,
            changeMonth: true,
            maxDate: d,
            dateFormat: 'dd/mm/yy'
        });
        $("#TxtCoordDate").datepicker({
            yearRange: '1950:' + d.getFullYear() + '',
            changeYear: true,
            changeMonth: true,
            maxDate: d,
            dateFormat: 'dd/mm/yy'
        });
        $("#TxtEnName").keypress(function (event) {
            $("#TxtEnName").html('');
            if (isEnglishLetterKey(event, $(this).val())) {
                $(this).next().html('');
                return true;
            } else {
                $(this).next().html('&nbsp;&nbsp;لغة المفاتيح المستخدمة العربية');
                return false;
            }
        });
        jQuery.validator.addMethod("fullname",
            function (value, element) {
                if (value != '' && value != null) {
                    return String(value).split(' ').length >= 4
                } else return true

            }, getName('يجب ان يكون الاسم رباعيا|Enter full name please.', PortalLang));

        jQuery.validator.addMethod("MansMail", function (value, element) {
            if (value == '') return false;
            var arabicChar = 'اأبتثجحخدذرزسشصضطظعغفقكلمنهوىةلاؤءئإ';
            var iNom = '0123456789';
            var iChars = '`!@#$%^&*()+=-[]\\\';,./{}|\":<>? ';

            for (var k = 0; k < value.length; k++) {
                if (k == 0 && iNom.indexOf(value.charAt(k)) != -1) return false;	//start with number
                if (arabicChar.indexOf(value.charAt(k)) != -1) return false;	//contains arabic
                if (iChars.indexOf(value.charAt(k)) != -1) return false;	//contains special chars
            }

            var newvalue = value + "@xxx.xxx";
            var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
            return pattern.test(newvalue);

        }, getName('بريد غير صحيح|Invalid Email', PortalLang));

        jQuery.extend(jQuery.validator.messages, {
            required: String(getNameByDic({
                "A": "البيان مطلوب ",
                "E": "field is required"
            }, PortalLang)),
            number: String(getNameByDic({
                "A": "يجب أن يكون رقماً ",
                "E": "Must be a number"
            }, PortalLang)),
            date: String(getNameByDic({
                "A": "يجب أن يكون تاريخ فى صورة يوم/شهر/سنه ",
                "E": "Date should be in the form day / month / year"
            }, PortalLang)),
            max: String(getNameByDic({
                "A": "المجموع لا يتعدى {0} !",
                "E": "Your total mustn't exceed {0}!"
            }, PortalLang)),
            min: String(getNameByDic({
                "A": "لابد ان يكون ميعاد النهاية أكبر من ميعاد البداية ",
                "E": "The amount requested is greater than the value of balance"
            })),
            maxQuantity: String(getNameByDic({
                "A": "المجموع أكبر من العدد المطلوب",
                "E": "Sum is greater than the required number"
            }, PortalLang)),
            range: String(getNameByDic({
                "A": "الرجاء إدخال قيمة بين {0} و {1}. ",
                "E": "Please enter a value between {0} and {1}."
            }, PortalLang)),
            email: String(getNameByDic({
                "A": "برجاء ادخال صيغة بريد الكتروني صحيحة ",
                "E": "Please enter a valid email."
            }, PortalLang))


        });
        $("#FormStudentPersonalData").validate({
            rules: {
                TxtrePassword: {
                    equalTo: "#TxtPassword"
                }, slcprogs: {
                    required: true,
                    minlength: $('#slcprogs option').length - 1
                }
            },
            messages: {
                TxtrePassword: {
                    equalTo: String(getNameByDic({
                        "A": "كلمة مرور غير مطابقة  ",
                        "E": "Please retype the password."
                    }, PortalLang))
                },
                slcprogs: {
                    minlength: String(getNameByDic({
                        "A": "من فضلك اختار كل البرامج و قم بترتيبها حسب رغباتك  ",
                        "E": "Please choose all the study programs and order them as you want "
                    }, PortalLang))
                }
            }
        });
//        function GetFromRegion(Dict, Selected, SelectID, OptionFlag, flag) {
//                /*Dict[item_id],Dict[order]*/
//                if (!Dict) Dict = {};
//                if (!SelectID) SelectID = "";
//                if (!Selected) Selected = "";
//                if (!OptionFlag) OptionFlag = false;
//                if (!flag) flag = "Next"
//                var str = ""
//                $.ajax({
//                    url: "/getJCI",
//                    data: {
//                        param0: "general.General",
//                        param1: "GetFromRegion",
//                        param2: flag,
//                        param3: dicToString(Dict)
//                    },
//                    type: "post",
//                    cache: false,
//                    async: false,
//                    success: function (d) {
//                        var data = jQuery.parseJSON(d);
//                        if (data[0]) {
//                            if (SelectID != "") $("#" + SelectID).html('')
//                            if (OptionFlag == true) {
//                                if (SelectID != "") $("<option value=''>---</option>").appendTo("#" + SelectID)
//                                else str += '<option value="">---</option>';
//                            }
//                            for (var x = 0; x < data.length; x++) {
//                                var Name = data[x].Name.split('|')[0];
//                                var ID = data[x].ID;
//                                if (SelectID != "") {
//                                    $("<option value='" + ID + "'  " + ( (ID == Selected) ? "selected" : "" ) + "  title='" + Name + "'>" + Name + "</option>").appendTo("#" + SelectID);
//                                }
//                                else str += '<option value="' + ID + '"  ' + ( (ID == Selected) ? "selected" : "" ) + '  title="' + Name + '">' + Name + '</option>';
//                            }
//                        }
//                    },
//                    error: function () {
//                        error();
//                    }
//                });
//                return str;
//
//            }
//
//        function GetBasicattributes(Dict, Selected, SelectID, OptionFlag, lvlFlag, FlagAcadmic) {
//
//            /*Dict[item_id],Dict[order]*/
//            if (!Dict) return false;
//            if (!SelectID) SelectID = "";
//            if (!Selected) Selected = "";
//            if (!OptionFlag) OptionFlag = false;
//            if (SelectID != "") $("#" + SelectID).html('');
//            var str = ""
//            $.ajax({
//                url: "/getJCI",
//                data: {
//                    param0: "general.General",
//                    param1: "GetBasicattributes",
//                    param2: JSON.stringify(Dict),
//                    param3: (lvlFlag ? lvlFlag : '')
//                },
//                type: "post",
//                cache: false,
//                async: false,
//                success: function (d) {
//                    var data = jQuery.parseJSON(d);
//                    if (data && data[0]) {
//                        if (OptionFlag == true) {
//                            if (SelectID != "") $("<option value=''>---</option>").appendTo("#" + SelectID)
//                            else str += '<option value="">---</option>';
//                        }
//                        for (var x = 0; x < data.length; x++) {
//                            var Name = "";
//                            //if (FlagAcadmic!=""){
//                            //	Name=data[x].Name.split('|')[0];
//                            //
//
//                            //}else{
//                            //	Name=getName(data[x].Name);
//                            //}
//
//
//                            Name = getName(data[x].Name);
//
//
//                            var ID = data[x].ID;
//                            if (SelectID != "") $("<option value='" + ID + "'  " + ( (ID == Selected) ? "selected" : "" ) + "  title='" + Name + "'>" + Name + "</option>").appendTo("#" + SelectID);
//                            else str += '<option value="' + ID + '"  ' + ( (ID == Selected) ? "selected" : "" ) + '  title="' + Name + '">' + Name + '</option>';
//                        }
//                    }
//                },
//                error: function () {
//                    error();
//                }
//            });
//            if (str != "")
//                return str;
//        }
//
//        function dicToString(dic) {
//            data = "{";
//            for (var s in dic) {
//                if (data != "{")
//                    data += ",";
//                data += '"' + s + '":"' + dic[s] + '"';
//            }
//            data += "}";
//            return data;
//        }
//        function LoadDatePicker() {
//            if (PortalLang == "A") {
//                jQuery(function ($) {
//                    $.datepicker.regional['ar'] = GetDatePickerDict();
//                    $.datepicker.setDefaults($.datepicker.regional['ar']);
//                });
//            }
//            else $.datepicker.setDefaults($.datepicker.regional['en']);
//            $.datepicker.setDefaults({dateFormat: 'dd/mm/yy'});
//        }
//
//        function getNameByDic(strValue, AppLang) {
//            var retVal = "", tempstr = "";
//            if (!AppLang) AppLang = Lang;
//            try {
//                if (strValue == null)
//                    retVal = "";
//                else if (typeof strValue == 'object') {
//                    retVal = (strValue[AppLang]);
//                }
//                else {
//                    retVal = getName(strValue, AppLang);
//                }
//            }
//            catch (e) {
//                e = null;
//            }
//            return retVal;
//
//        }
//
        $('#SaveAdmission').click(function (e) {
            e.preventDefault();
            //if ($("#FormStudentPersonalData").valid()) {
            //	var Data={};
            //	Data['Name']=$('#TxtArName').val()+'|'+$('#TxtEnName').val();
            //	Data['Birthdate']=$('#TxtBirthdate').val();
            //	Data['Gender']=$('[name="RadioGender"]:checked').val();
            //	Data['Nationality']=$("#SelectNationality").val();
            //	Data["Relegion"] = $("input[name=RadioRelegion]:checked").val();
            //	Data['BirthPlace']=$('#SelectBirthPlace').val();
            //	Data['ID']=$('#TxtIdNum').val();
            //	Data['IDPlace']=$('#SelectIdPlace').val();
            //	Data['IDDate']=$('#TxtIdDate').val();
            //
            //	Data['UserName']=$('#TxtUserName').val();
            //	Data['Password']=$('#TxtPassword').val();
            //	// contact
            //	Data['AddressRegion']=$('#SelectAddressRegion').val();
            //	Data['Address']=$('#TxtAddress').val();
            //	Data['MobileTel']=$('#TxtMobileTel').val();
            //	Data['HomeTel']=$('#TxtHomeTel').val();
            //	Data['Email']=$('#TxtEmail').val();
            //	Data['MailBox']=$('#TxtMailBox').val();
            //	Data['Fax']=$('#TxtFax').val();
            //	// pequal
            //	Data['School']=$('#TxtSchool').val();
            //	Data['PreQual']=$('#slcPreQual').val();
            //	Data['PreQualYear']=$('#slcPreQualYear').val();
            //	Data['PreQualDegree']=$('#TxtPreQualDegree').val();
            //	Data['Percentage']=$('#TxtPercentage').val();
            //	Data['Sat']=$('#TxtSat1').val()+'|'+$('#TxtSat2').val();
            //
            //
            //	Data['PreQualturn']=$('#slcPreQualturn').val();
            //	Data['PacementNo']=$('#TxtPacementNo').val();
            //	Data['CoordNo']=$('#TxtCoordNo').val();
            //	Data['CoordDate']=$('#TxtCoordDate').val();
            //	Data['Institute']=$('#TxtInstitute').val();
            //	Data['InstAttendDate']=$('#slcInstAttendDate').val();
            //
            //	// for family
            //	Data['GarduianName']=$('#txtGarduianName').val();
            //	Data['GJobTitle']=$('#txtGarduianJobTitle').val();
            //	Data['GAddress']=$('#txtGAddress').val();
            //	Data['GAddressRegion']=$('#SelectFamilyAddressRegion').val();
            //	Data['GHomeTel']=$('#txtGHomeTel').val();
            //	Data['GMobileTel']=$('#txtGMobileTel').val();
            //	Data['GEmail']=$('#txtGEmail').val();
            //	Data['GFax']=$('#txtGFax').val();
            //	/// desirebales array
            //	var desArr=[];
            //	$('#desirebales').find('.ui-sortable').each(function(i){
            //		$(this).children(':not(.ui-helper-hidden-accessible)').each(function(x){
            //
            //			desArr.push($('option[title="'+$(this).attr('title')+'"]').val())
            //		});
            //
            //	});
            //	Data['Desirables']=desArr;
            //
            //	$.ajax({
            //		url: "/getJCI",
            //		type: "post",
            //		cache: false,
            //		data: {
            //		    param0: "stuAdmission.stuAdmission",
            //		    param1: "UpdateStuData",
            //		    param2: JSON.stringify (Data)
            //		},
            //		success: function(d){
            //		    var data = jQuery.parseJSON(d);
            //		    if (data.Msg=="sucess") {
            //			jAlert(getName('تم حفظ التعديلات |Saving ... '))
            //			//LoadSystem();
            //			LoadAppVariables()
            //			getStudent();
            //			$('#UpdateAdmission').show();
            //
            //		    }
            //		    else{
            //			error();
            //		    }
            //		},
            //		error: function(){
            //		    error();
            //		}
            //	});
            //
            //
            //
            //}

        });
        $('#UpdateAdmission').click(function (e) {
            e.preventDefault();
            $('#UpdateAdmission').hide();
            $('.ReadData').hide();
            $('.EditData').show();
            $('.selector').show();
            $('#SaveAdmission').show();
            $(".multiselect").multiselect(" destroy ");
            $("#desirebales").html("<select id=slcprogs name=slcprogs class='multiselect' multiple='multiple' ></select>");
            //$.ajax({
            //	url: "/getJCI",
            //	type: "post",
            //	cache: false,
            //	async: true,
            //	data: {
            //	    param0: "stuAdmission.stuAdmission",
            //	    param1: "SelectedMajorAndProgs"
            //	},
            //	success: function(d){
            //	    var data = jQuery.parseJSON(d);
            //	    var str ="";
            //	    if(data && data[0]){
            //		for(var x=0;x<data.length;x++){
            //		    var Name = getName(data[x].Name) ;
            //		    var ID = data[x].ID;
            //		    str += "<option value='"+ID+"'  title='"+Name+"' "+data[x].selected+" >"+Name+"</option>" ;
            //		}
            //	    }
            //	    $('#slcprogs').html(str);
            //
            //	},complete:function(){
            //	    $(".multiselect").multiselect({sortable: true});
            //	    //$("#desirebales").css('float',align);
            //
            //	    },
            //	error: function(){
            //	    error();
            //	}
            //    });
        });


    }

    function getQuestionnaireType() {

        $.ajax({
            url: "/getJCI",
            type: "post",
            cache: false,
            data: {
                param0: "stuAdmission.stuAdmission",
                param1: "GetStudentQuestionnaireLink"
            }, success: function (d) {
                var data = jQuery.parseJSON(d);
                if (data) {
                    if (data['href'] !== "#") {
                        $('#Questionnaire').attr('target', "_blank");
                        $('#Questionnaire').attr('href', data['href']);
                    }
                }
            },
            error: function () {
            }
        });
    }

    function getStudent() {

        $.ajax({
            url: "/getJCI",
            type: "post",
            cache: false,
            data: {
                param0: "stuAdmission.stuAdmission",
                param1: "GetStudentPersonalData"
            },
            success: function (d) {
debugger
                var data = jQuery.parseJSON(d);
                if (data) {

                    StudentCurrentID = data['personal'][0]['ID'];
                    PortalUserId=StudentCurrentID;
                    StudentCurrentCode = data['personal'][0]['studentCode'];
                    CurrentName = getName(data['personal'][0]['Name'], PortalLang);
                    CurrentNameA = getName(data['personal'][0]['Name'], "A");
                    ScopeProgType =   "StudyYear";
                    if (data['StudyPlanType'] == "35.22.2.") ScopeProgType =  "Credit" ;
                    if (data['StudyPlanType'] == "35.22.3.") ScopeProgType =  "Points";
                    StudyPlanID = data['StudyPlanID'];
                    studentScope = data['studentScope'];
                    ScopeID=studentScope;
                    StudyPlanName = data['StudyPlanName'];
                    stugender = data['personal'][0]['GenderId'];
                    stunationality = data['personal'][0]['nationalityID'];
                    //ToDO fix appearance with student portal apps
                  //  if (stunationality == "1." && $("#main_menu").find('#militarystatus').length == 0 ) {
                      //  $("#main_menu").append('<LI><A title="" style="cursor: pointer;" class="dashboard no-submenu" id="militarystatus">' + getName("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;") + getName("نتيجة التربيه العسكرية|Military Course Status") + '</A></LI>');

                        $("#militarystatus").click(function () {//amira
                            $("#FormStudentPersonalData").hide();
                            $("#divContents").show();
                            $.ajax({
                                url: "/getJCI",
                                type: "post",
                                cache: false,
                                data: {
                                    param0: "StudentBasicData.MilitaryData",
                                    param1: "GetMilitaryStatus"
                                }, success: function (d) {

                                    var data = jQuery.parseJSON(d);
                                    if (data.message == "success") {
                                        data = data['data']
                                        if (data.length > 0) {
                                            var GlobalName = "military";
                                            var str = ""
                                            str += " <div id='printDiv' >"
                                            $("#FormStudentPersonalData").hide();

                                            str += '<div id="schdlTitle" style="padding:0.2em">'
                                                + " <table id=headerTbl name=headerTbl border=0 style='padding:0.2em;color:#2779c3;font-weight:bold;font-size:16px;text-align:center;width:100%'  > "
                                                + "        <tr>"
                                                + "            <TD style='width:10%' style='color=#990000;font:12pt arial;text-align:center;width:20%'  ><IMG src='/static/images/alexLogo.jpg'   id='ImgLogo' unselectable=on><br><span style='font-size:12px;color:#000000;'><span></TD> "
                                                + "     <TD  align='center' ><b><font size=4>" + getName('نتيجة التربيه العسكريه |Military Status', PortalLang) + "<br/></font> </TD>"
                                                + "     <td style='width:10%'> </td>  </tr>"
                                                + "    <TR  style='width:60%' align='center'> "
                                                + "           <TD colspan=3 style='color=#990000;font:12pt arial;' valign='bottom'  align = " + ((PortalLang == "A") ? "left" : "right") + "  ><font style='font-size:12px;color:#000000;'  >" + ((PortalLang == "A") ? "نظام ابن الهيثم لإدارة شئون الطلاب " : "Ibn al-Hitham System SIS ") + " " + GetDate() + "</font> "
                                                + "            </td> "
                                                + "    </tr>"
                                                + "</table>" + '<div id="reportBody" style="padding:0.1em ; border:1px solid silver; border-collapse: collapse;width:100%" >' +
                                                '<table cellpadding="2" cellspacing="2" style="width: 100%;font-size: medium; align = " + ((PortalLang == "A") ? "left" : "right")">' +
                                                '<thead style="color: red;">' +
                                                '<tr>' +
                                                '<th>' + getName("تاريخ الدوره|courseDate", PortalLang) + '</th>' +
                                                '<th>' + getName("المجموع|total", PortalLang) + '</th>' +
                                                '<th>' + getName("تقدير|grade", PortalLang) + '</th>' +
                                                '<th>' + getName("ناجح/راسب|pass/fail", PortalLang) + '</th>' +
                                                '</tr>' +
                                                '</thead>'
                                            for (var x = 0; x < data.length; x++) {
                                                str += "<tr >" +
                                                    "<th>" + data[x]['MilitaryDate'] + "</th>" +
                                                    "<th>" + data[x]['Total'] + "</th>" +
                                                    "<th>" + (((data[x]['Grade']) === "0") ? getName("ضعيف|weak", PortalLang) : (((data[x]['Grade']) == "1") ? getName("مقبول|pass") : (((data[x]['Grade']) == "2") ? getName("جيد|good") : (((data[x]['Grade']) == "3") ? getName("جيد جدا|V.good") : (((data[x]['Grade']) == "4") ? getName("ممتاز|Excellent") : ""))))) + "</th>" +
                                                    "<th>" + (((data[x]['Successful']) == 1) ? getName("ناجح|success") : getName("راسب|fail")) + "</th>" +
                                                    "</tr>"

                                            }
                                            str += '</table>'
                                            str += '  </div></div>'
                                            $("#divContents").html(str);
                                        }

                                    } else {

                                        $("#divContents").html(" <p style='color:red;font-size: 16px'> " + getName(data.message) + "</p>")
                                    }

                                },
                                error: function () {
                                }
                            });

                        });

                   // }


                    if (data['preq'] != "") {
                        PreQualName = data['preq'][0]['PreQualName']
                        PreQualDegree = data['preq'][0]['PreQualDegree']
                    }

                    // here student image
                    if (data['personal'][0]['ID']) {
                        $('#UsrImg').attr('src', '/stuJCI?param0=stuImages.Images&param1=download&param2=' + data['personal'][0]['ID']);
                    }

                    $("#UsrImg").error(function () {

                        $('#UsrImg').attr('src', '/static/images/man.gif');
                        //  $("#UsrImg").remove();
                    });
                    // in family
                    var famData = data.fam[0];
                    if (famData) {
                        $('#txtGarduianName').val(famData['name']);
                        $('#spGarduianName').text(famData['name']);
                        $('#txtGarduianJobTitle').val(famData.jobTitle);
                        $('#spGarduianJobTitle').text(famData.jobTitle);
                        $('#txtGAddress').val(famData.address);
                        $('#spGAddress').text(famData.address);
                        GetFromRegion({
                            "item_id": famData['addressRegion']
                        }, famData['addressRegion'], "SelectFamilyAddressRegion", true, "Curr")
                        $("#SelectFamilyAddressRegion").prev('span').text($('#SelectFamilyAddressRegion :selected').text());
                        $("#spGaddressRegion").text($('#SelectFamilyAddressRegion :selected').text());
                        $("#SelectIdPlace").prev('span').text($('#SelectBirthPlace :selected').text());
                        /*$('#SelectFamilyAddressRegion').val();*/
                        $('#txtGHomeTel').val(famData.homeTel);
                        $('#spGHomeTel').text(famData.homeTel);
                        $('#txtGMobileTel').val(famData.mobile);
                        $('#spGMobileTel').text(famData.mobile);


                        $('#txtGEmail').val(famData.email);
                        $('#spGEmail').text(famData.email);

                        $('#txtGFax').val(famData.fax);
                        $('#spGFax').text(famData.fax);
                    }
                    //personal
                    if (data['personal'][0]) {
                        $('#stdLogName').text(getName(data['personal'][0]['Name'], PortalLang).length > 20 ? getName(data['personal'][0]['Name']).substring(0, 20) + '...' : getName(data['personal'][0]['Name'])).attr('title', getName(data['personal'][0]['Name']));
                        $('#stdProgName').text(getName(StudyPlanName, PortalLang).length > 20 ? getName(StudyPlanName, PortalLang).substring(0, 20) + '...' : getName(StudyPlanName, PortalLang)).attr('title', getName(StudyPlanName, PortalLang));
                        $('#TxtArName').val(data['personal'][0]['Name'].split('|')[0]);
                        $('#SpArName').text(data['personal'][0]['Name'].split('|')[0]);
                        $('#TxtEnName').val(data['personal'][0]['Name'].split('|')[1]);
                        $('#SpEnName').text(data['personal'][0]['Name'].split('|')[1]);
                        $('#TxtStudentId').val(data['personal'][0]['studentCode']);
                        $('#SpStudentId').text(data['personal'][0]['studentCode']);
                        $('#TxtBirthdate').val(data['personal'][0]['Birthdate']);
                        $('#SpGender').text(data['personal'][0]['StuGender'].split('|')[0])

                        $('[name="RadioGender"]').filter(function () {
                            return $(this).val() == data['personal'][0]['GenderId'];
                        }).attr("checked", true);

                        $("input:radio[name=RadioRelegion]").filter(function () {
                            return $(this).val() == data['personal'][0].relegionID;
                        }).attr("checked", true);

                        GetFromRegion({
                            "item_id": data['personal'][0]['BirthPlaceId']
                        }, data['personal'][0]['BirthPlaceId'], "SelectBirthPlace", true, "Curr")

                        $("#SelectBirthPlace").prev('span').text($('#SelectBirthPlace :selected').text());
                        $('#SelectBirthPlace').val(data['personal'][0]['BirthPlaceId']);
                        $('#TxtIdNum').val(data['personal'][0]['StuIdNum']);
                        $('#TxtPassword').val(data['personal'][0]['password']);
                        $('#TxtrePassword').val(data['personal'][0]['password']);
                        $('#SpBirthdate').text(data['personal'][0]['Birthdate']);
                        GetFromRegion({
                            "item_id": data['personal'][0]['nationalityID']
                        }, data['personal'][0]['nationalityID'], "SelectNationality", true, "Curr")
                        $("#SelectNationality").prev('span').text($('#SelectNationality :selected').text());
                        $('#SpIdNum').text(data['personal'][0]['StuIdNum']);
                        $("#SpIdPlace").html(getName(data['personal'][0].StuIdPlace, 'A'));
                        $("#SpIdDate").html(data['personal'][0].idDate);
                        $("#SpRelegion").html(data['personal'][0].relegion.split('|')[0]);
                    }

                    //SelectNationality


                    if (data['contact'][0]) {
                        GetFromRegion({
                            "item_id": data['contact'][0]['AddressRegionId']
                        }, data['contact'][0]['AddressRegionId'], "SelectAddressRegion", true, "Curr")
                        $("#SelectAddressRegion").prev('span').text($('#SelectAddressRegion :selected').text());
                        $('#TxtHomeTel').val(data['contact'][0]['HomeTel']);
                        $('#SpHomeTel').text(data['contact'][0]['HomeTel']);
                        $('#TxtFax').val(data['contact'][0]['Fax']);
                        $('#SpFax').text(data['contact'][0]['Fax']);

                        $('#TxtMailBox').val(data['contact'][0]['MailBox']);
                        $('#SpMailBox').text(data['contact'][0]['MailBox']);
                        $('#TxtSystemMail').val(data['contact'][0]['SystemEmail']);
                        $('#SpSystemMail').text(data['contact'][0]['SystemEmail']);
                        $('#SelectAddressRegion').val(data['contact'][0]['AddressRegionId']);
                        $('#SpAddressRegion').text($('#SelectAddressRegion :selected').text())
                        $('#TxtAddress').val(data['contact'][0]['Address']);
                        $('#TxtMobileTel').val(data['contact'][0]['MobileTel']);
                        $('#TxtEmail').val(data['contact'][0]['Email']);
                        $('#SpEmail').text(data['contact'][0]['Email']);
                        $('#SpMobileTel').text(data['contact'][0]['MobileTel']);
                        $('#SpAddress').text(data['contact'][0]['Address']);


                    }

                    ///---------


                    $('#SpBirthPlace').text($('#SelectBirthPlace :selected').text());
                    $('#SpNationality').text($('#SelectNationality :selected').text());


                    //---
                    if (data['preq'][0]) {
                        $('#TxtPercentage').val(data['preq'][0]['Percentage'])
                        $('#spMinPercentage').text(data['preq'][0]['Percentage'])
                        //----
                        $('#slcPreQual').val(data['preq'][0]['PreQualID']);
                        $('#slcPreQualYear').val(data['preq'][0]['PreQualYearID']);
                        $('#TxtPreQualDegree').val(data['preq'][0]['PreQualDegree']);


                        //---------
                        $("#TxtSchool").val(data['preq'][0]['School']);
                        $("#spSchool").text(data['preq'][0]['School']);
                        $('#slcPreQualturn').val(data['preq'][0]['PreQualturn'])
                        $('#spPreQualturn').text($('#slcPreQualturn :selected').text())
                        $("#slcPreQualturn").prev('span').text($('#slcPreQualturn :selected').text());


                        $("#TxtSat1").val(data['preq'][0]['Sat'].split('|')[0])
                        $("#spSat1").text(data['preq'][0]['Sat'].split('|')[0])
                        $("#TxtSat2").val(data['preq'][0]['Sat'].split('|')[1])
                        $("#spSat2").text(data['preq'][0]['Sat'].split('|')[1])
                        $("#TxtPacementNo").val(data['preq'][0]['PlacementNo']);
                        $("#spPacementNo").text(data['preq'][0]['PlacementNo']);

                        $("#TxtCoordNo").val(data['preq'][0]['CoordNo']);
                        $("#spCoordNo").text(data['preq'][0]['CoordNo']);

                        $("#TxtCoordDate").val(data['preq'][0]['CoordDate']);
                        $("#spCoordDate").text(data['preq'][0]['CoordDate']);

                        $("#slcInstAttendDate").val(data['preq'][0]['InstAttendDate']);
                        $("#spInstitute").text(data['preq'][0]['Institute'] ? data['preq'][0]['Institute'] : '---');


                        $("#TxtInstitute").val(data['preq'][0]['Institute']);
                        $("#spInstAttendDate").text($('#slcInstAttendDate :selected').text());

                        $('#spPreQualDegree').text(data['preq'][0]['PreQualDegree']);
                    }
                    $('#spPreQualYear').text($('#slcPreQualYear :selected').text())
                    $('#spPreQual').text($('#slcPreQual :selected').text());
                    $("#slcPreQualYear").prev('span').text($('#slcPreQualYear :selected').text());
                    $("#slcPreQual").prev('span').text($('#slcPreQual :selected').text());
                    $("#slcInstAttendDate").prev('span').text($('#slcInstAttendDate :selected').text());

                    // if(data.SanctionData && data.SanctionData.length){
                    //        $("#studentSanctionsDetTable").html(" ");
                    // $("#studentSanctionsDetTable").append("<TR class=ColTestG bgcolor=#5ab1cd><TD  style='color:white'>" +
                    //      ((PortalLang == "A") ? "الجزاء" : "Sanction")+
                    //     "</Td>"+
                    //     "<TD  style='color:white'>" +
                    //      ((PortalLang == "A") ? "العام الأكاديمي" : "Academic Year")+
                    //     "</Td>"+
                    //      "<TD  style='color:white;padding-left: 22px;'>" +
                    //     ((PortalLang == "A") ? "الفصل الدراسي" : "Academic Semester")+
                    //     "</Td>  "+
                    //     "<Td class='CreditHoursNoCol' style='color:white'>" +
                    //     ((PortalLang == "A") ? "ملاحظات" : "Notes")+
                    //     "</Td></TR>");
                    // for (var i = 0; i < data.SanctionData.length; i++) {
                    //     var row=data.SanctionData[i];
                    //     $("#studentSanctionsDetTable").append("<TR class='ColTest'>" +
                    //         "<TD class=ColTest >" +
                    //           ((PortalLang === "A") ? (row.sanctionName && row.sanctionName.includes('|') ? row.sanctionName.split('|')[0] : row.sanctionName)
                    //             : (row.sanctionName && row.sanctionName.includes('|') ? row.sanctionName.split('|')[1] : row.sanctionName))+
                    //         "</TD>" +
                    //            "<TD class=ColTest >" +
                    //         ((PortalLang === "A") ? (row.sanctionYear && row.sanctionYear.includes('|') ? row.sanctionYear.split('|')[0] : row.sanctionYear)
                    //             : (row.sanctionYear && row.sanctionYear.includes('|') ? row.sanctionYear.split('|')[1] : row.sanctionYear))+
                    //         "</TD>" +
                    //          "<TD class=ColTest >" +
                    //           ((PortalLang === "A") ? (row.sanctionSemester && row.sanctionSemester.includes('|') ? row.sanctionSemester.split('|')[0] : row.sanctionSemester)
                    //             : (row.sanctionSemester && row.sanctionSemester.includes('|') ? row.sanctionSemester.split('|')[1] : row.sanctionSemester))+
                    //         "</TD>" +
                    //         "<TD class=CreditHoursNoCol ColTest  >" +
                    //              row.sanctionNote+
                    //         "</TD>" +
                    //         "</TR> ");
                    // }
                    // }
                    // else {
                    //     $("#studentSanctionsDetTable").html(getName('لا يوجد بيانات|No Data'))
                    // }

                    $('.ReadData').show();
                    $('.EditData').hide();
                    $('.selector').hide();
                    $('#SaveAdmission').hide();


                } else {
                    $('#UpdateAdmission').hide();
                    $('.ReadData').hide();
                    $('.EditData').show();
                    $('.selector').show();
                    $('#SaveAdmission').show();
                }
            },
            complete: function (jqXHR, textStatus) {
//                 $('#newMessages,#indoxMessages,#outboxMessages').click(function () {
//                    $("#FormStudentPersonalData").hide();
//                    $("#divContents").show();
//                    $("#divContents").load('/static/html/mail/mail.html');
//                    CurrDictVariables['action'] = $(this).attr('action');
//                });
            },
            error: function () {
                window.location = "/static/index.html";

            }
        });
    }

    // hadeel 23/9
    $('#loginTrys').click(function () {
        var div = $(this);
        $.ajax({
            url: "/getJCI",
            type: "POST",
            cache: false,
            data: {
                param0: "Reports.RegisterCert",
                param1: "UserLoginTrys",
                param2: "UserLoginTrys"
            },
            beforeSend: function () {
                $(".ui-effects-wrapper").remove();
            },
            success: function (d) {
                var str = "<table align=center style='direction:" + dir + ";width:100%'>"
                data = jQuery.parseJSON(d);
                if (data) {
                    var oldSt, newSt = '';
                    for (var i = 0; i < data.length; i++) {
                        oldSt = data[i].tryStatus;
                        if (oldSt != newSt) {
                            str += '<tr><td colsapn=3 style="height:35px;padding:3px">' + (oldSt == 'True' ? getName('اخر محاولة دخول صحيحة|Last successful login', PortalLang) : getName(' محاولة دخول خطأ |Last Unsuccessful login', PortalLang)) + '<td></tr>'
                            str += '<tr style="height:25px;background-color:#5ab1cd;color:white;border:1px solid #5ab1cd;"><th >' + getName('اليوم|Day', PortalLang) + '</th><th>' + getName('الوقت|Time', PortalLang)
                                + '</th><th > IP </th></tr>'
                        }
                        str += '<tr style="height:35px;border:1px solid #5ab1cd;"><td style="text-align:">' + data[i].logDate.split(' ')[0] + '</td><td style="direction:' + getName("rtl|ltr", PortalLang) + ';text-align:">' + data[i].logDate.split(' ')[1] + ' ' + data[i].logDate.split(' ')[2]
                            + '</td><td style="text-align:"> ' + data[i].IP + '</td></tr>'
                        newSt = oldSt;
                    }
                }
                str += "</table>"
                $('#divContents').append('<div id=DivDialogon>' + str + '</div>')
                $('#DivDialogon').dialog({
                    modal: true,
                    autoOpen: true,
                    title: getName('محاولات الدخول |logins', PortalLang),
                    closeOnEscape: true,
                    zIndex: 3999,
                    width: 500,
                    height: 300,
                    resizable: true,
                    position: 'center',
                    show: 'fade',
                    hide: 'fade',
                    close: function (event, ui) {

                        RemoveGenericDialog();
                    }
                });
            },
            complete: function (jqXHR, textStatus) {
                $.unblockUI();
                $(document).ajaxStop($.unblockUI);
                return false;
            },
            error: function (request, status, error) {
                str = " <div>error </div>";

            }
        });
    });


    function CheckUserNameWithAD() {
        $("#EmailNameError").html("");
        var Data = {UserName: $("#TxtEmailName").val()};
        $.ajax({
            url: "/getJCI",
            type: "post",
            cache: false,
            data: {
                param0: "stuAdmission.stuAdmission",
                param1: "CheckUserName",
                param2: dicToString(Data)
            },
            success: function (d) {
                var data = jQuery.parseJSON(d);
                if (data["UNData"] == "") {
                    $("#EmailNameError").html("");
                    $("#SpEmailName").text(data["UserName"]);
                    $("#ShowOpened").hide();
                    $("#ShowClosed").show();
                } else if (data["UNData"] == "exist") {
                    $("#EmailNameError").html(getName("هذا الاسم مسجل من قبل|Email already used", PortalLang));
                    $("#TxtEmailName").focus();
                } else {
                    $("#EmailNameError").html(getName("حدث خطأ حاول مرة أخرى|error occured, try again", PortalLang));
                }
            },
            error: function () {
                error();
            }
        });
    }

    function SaveEmailName(Type) {
        var Data = {
            UserName: $("#TxtEmailName").val()
            , Type: Type, FirstName: $("#TxtEmailFirstName").val()
            , LastName: $("#TxtEmailLastName").val()
        };
        if ($("#TxtEmailName").val().length <= 20) {
            $.ajax({
                url: "/getJCI",
                type: "post",
                cache: false,
                data: {
                    param0: "stuAdmission.stuAdmission",
                    param1: "SaveEmailName",
                    param2: dicToString(Data)
                },
                success: function (d) {
                    var data = jQuery.parseJSON(d);

                    if (data && data["HasError"]) {
                        $("#divContents").html("<div style='font-weight:bold;color:red;text-align:center;'>" + data["ErrorMsg"] + "</div>");
                        // $("#createMail").trigger('click')
                    } else {
                        $("#divContents").html("<div style='font-weight:bold;color:blue;text-align:center;'>" + data["SuccessMsg"] + "</div>");
                    }
                },
                error: function () {
                    error();
                }
            });
        } else {
            jAlert('You should chosse E-Mail characters less than or equal 20 please try again')
            $("#createMail").trigger('click')
        }
    }

    function getUniversityData() {
        $.ajax({
            url: "/general",
            type: "GET",
            cache: false,
            async: true,
            data: {
                index: "current_university"
            },
            beforeSend: function () {
            }, success: function (d) {
                var data = jQuery.parseJSON(d);
                var university = data['university'], backgroundImageUrl = 'url(' + data['backgroundImageUrl'] + ')';
                $(".university-name").html(getName(university, PortalLang));
                $("#title").text(getName(university, PortalLang));
                //$('body').css('background-image', backgroundImageUrl);
            }
        });
    }


    function getMenuItems() {
        $.ajax({
            url: "/getJCI",
            type: "post",
            cache: false,
            data: {
                param0: "general.BasicData",
                param1: "getMenuItems"
            },
            success: function (d) {
                var data = jQuery.parseJSON(d);
                if (data.length > 0) {
                    univName = getName(data[0]["univName"], PortalLang);

                    var menu_str = "";
                    menu_str += "<LI>";
//                    menu_str += "<A title='' class='button-link' href='#'  id='changePortalLang' >" +
//                        "&nbsp;&nbsp;<img src='/static/images/PortalLanguages.png' hieght='16px' width='16px'/>" +
//                        " &nbsp;&nbsp;" + getName("تغير اللغة|Change PortalLanguage", PortalLang) + "</A>"
                    menu_str += " </LI>";
                    for (var item in data) {
                        item = data[item];
                        if(item.item_id=="mailTD"){
                                menu_str += "<LI style='text-align:" + getName("right|left", PortalLang) + "'>";
                                menu_str += "<A title='' class='" + item.item_class + "'  href='#' id='"+item.item_id+"' order='" + item.item_order + "'>" + getName("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;") + getName(item.item_title, PortalLang) + "</A>";
                                menu_str += "<ul style='padding-" + getName("right|left") + ":30px;' >";
                                menu_str += "<li> <a href='#' id='newMessages' action='create' >" + getName("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;") + getName("رسالة جديدة|New Message", PortalLang) + "<font id='newMessage'></font></a></li>";
                                menu_str += "<li><a href='#' id='indoxMessages' action='Indox' class='current'>" + getName("&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;") + getName("الوارد|Inbox", PortalLang) + "<font id='urmCount'></font></a></li>";
                                menu_str += "<li><a href='#' id='outboxMessages' action='Sent'>" + getName("&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;") + getName("الصادر|Outbox", PortalLang) + "<font id='sentMessages'></font></a></li>";
                                menu_str += "</ul> </LI>";

                        }
                        else{
                            menu_str += "<LI style='text-align:" + getName("right|left", PortalLang) + "' >";
                            menu_str += "<A title='' class='" + item.item_class + "' href='#' order='" + item.item_order + "' id='" + item.item_id + "' >" + getName("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;") + getName(item.item_title, PortalLang) + "</A>"
                            menu_str += " </LI>"
                        }



                    }


                    //menu_str += "<LI style='text-align:"+getName("right|left")+"'> <A title='' class='settings no-submenu' href='#' id='sysHelp'>"+getName("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;")+getName("مساعدة|Help",PortalLang)+"</A> </LI>";

                    // $("#main_menu").append(menu_str);
                    $("#main_menu").html(menu_str);
                    $(".university-name").html(univName);
                    getQuestionnaireType();

                }
            },
            complete: function () {
                $('#stdResult').click(function () {
                    $("#FormStudentPersonalData").hide();
                    $("#divContents").show();
                    $("#divContents").load('/static/html/Control/Reports/StudentMarks.html');
                    //$("#divCostdResultntents").load('/static/html/Control/Reports/StudentMarks.html');
                    CurrDictVariables['action'] = $(this).attr('action');
                    CurrAppID = ""
                });
                $('#prsData').click(function () {
                    $("#FormStudentPersonalData").show();
                    $("#divContents").hide();
                    studentForm();

                    // var host = window.location.host;
                    //     var socket = new WebSocket('ws://'+host+'/ws');
                    //      var $message = $('#message');
                    //      // Listen for messages
                    //  // socket.addEventListener('message', (event) => {

                    //  //      var json = JSON.parse(event.data);
                    //  //       $message.text(json.value);
                    //  // });
                    //     socket.onmessage = function(ev){

                    //         var json = JSON.parse(ev.data);
                    //         if(StudentCurrentID==json.id){
                    //              $message.text(json.value);
                    //         }
                    //
                    //
                    //     }


                });
                $('#newMessages,#indoxMessages,#outboxMessages').click(function () {
                    $("#FormStudentPersonalData").hide();
                    $("#divContents").show();
                    $("#divContents").load('/static/html/mail/mail.html');
                    CurrDictVariables['action'] = $(this).attr('action');
                });
                $("#registerReport").click(function () {
                    var Access=checkAccess("registerReport")
                    if(Access && Access["access"]){
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        RegType = "student";
                        $("#divContents").load('/static/html/AcademicReg/Reports/coursesReport.html?RegType=student');
                    }
                    else{
                                jAlert("you do not have right");
                                window.location = "/static/index.html";
                            }
                    })
                $("#MaterialGrievances").click(function () {
                    var Access=checkAccess("MaterialGrievances")
                    if(Access && Access["access"]){
                        MaterialGrievances()
                    }
                    else{
                                jAlert("you do not have right");
                                window.location = "/static/index.html";
                    }
                    });
                 $("#CourseWithdrawal").click(function () {
                    var Access=checkAccess("CourseWithdrawal")
                    if(Access && Access["access"]){
                        CourseWithdrawal()
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });

                $("#SummerTraining").click(function () {
                    var Access=checkAccess("SummerTraining")
                    if(Access && Access["access"]){
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        $("#divContents").load('/static/html/AcademicReg/summerTrainingStudent.html');
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                })
                $("#ExaminationForm").click(function () {
                     var Access=checkAccess("ExaminationForm")
                    if(Access && Access["access"]){
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        $("#divContents").load('/static/html/studentData/Reports/medicalReport.html');
                         }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                })


                // $("#studabsence").click(function () {//hadeel
                //     var GlobalName = "studytable";
                //     var str = ""
                //     str += " <div id='printDiv' >"
                //     $("#FormStudentPersonalData").hide();
                //     $("#divContents").show();
                //     $("#divContents").html(str + '<div id="schdlTitle" style="padding:0.2em">'
                //         + " <table id=headerTbl name=headerTbl border=0 style='padding:0.2em;color:#2779c3;font-weight:bold;font-size:16px;text-align:center;width:100%'  > "
                //         + "        <tr>"
                //         + "            <TD style='width:10%' style='color=#990000;font:12pt arial;text-align:center;width:20%'  ><IMG src='/static/images/alexLogo.jpg'   id='ImgLogo' unselectable=on><br><span style='font-size:12px;color:#000000;'><span></TD> "
                //         + "     <TD  align='center' ><b><font size=4>" + getName('تقرير غياب |Absence Report',PortalLang) + "<br/></font> </TD>"
                //         + "     <td style='width:10%'> </td>  </tr>"
                //         + "    <TR  style='width:60%' align='center'> "
                //         + "           <TD colspan=3 style='color=#990000;font:12pt arial;' valign='bottom'  align = " + ((PortalLang == "A") ? "left" : "right") + "  ><font style='font-size:12px;color:#000000;'  >" + ((PortalLang == "A") ? "نظام ابن الهيثم لإدارة شئون الطلاب " : "Ibn al-Hitham System SIS ") + " " + GetDate() + "</font> "
                //         + "            </td> "
                //         + "    </tr>"
                //         + "</table>" + '<div id="reportBody" style="padding:0.1em ; border:1px solid silver; border-collapse: collapse;width:100%" >  </div></div>');
                //     absenceReport();
                // });

                //sarah
                $("#QuestionnaireNew").click(function () {
                    var Access=checkAccess("QuestionnaireNew")
                    if(Access && Access["access"]){
                        if ($(this).attr('href') === "#") {
                        $("#divContents").html('<div id="RDialogDiv" style="direction: ' + getName("rtl|ltr", PortalLang) + ';font-size: 12pt;color:red;font-weight:bold;"></div>');
                        $('#RDialogDiv').load('QuesRules.html');
                        $('#RDialogDiv').dialog({
                            modal: true,
                            autoOpen: true,
                            title: getName('ارشادات | Instructions ', PortalLang),
                            closeOnEscape: true,
                            zIndex: 3999,
                            width: 750,
                            height: 350,
                            resizable: true,
                            show: 'fade',
                            hide: 'fade',
                            open: function (event, ui) {
                                $(this).parent().css('top', 0);
                            },
                            buttons: {
                                'Continue': function () {
                                    $(this).dialog("close");
                                    $("#RDialogDiv").remove();
                                    $("#FormStudentPersonalData").hide();
                                    $("#divContents").show();
                                    $("#divContents").load("/static/html/Questionnaire/QuestionnaireTabs.html?.rnd=" + randomNumber());
                                }
                            }
                        });
                    }
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                })

                $('#progDsr').click(function () {
                     var Access=checkAccess("progDsr")
                    if(Access && Access["access"]) {
                        getDesires();
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                    }
                );
                  $('#coursesDsr').click(function () {
                        var Access=checkAccess("coursesDsr")
                        if(Access && Access["access"]) {
                            CoursesDesires()
                        }
                         else{
                            jAlert("you do not have right");
                            window.location = "/static/index.html";
                        }
                    }
                  );


                $("#StudentExpectations").click(function () {
                    var Access=checkAccess("StudentExpectations")
                    if(Access && Access["access"]) {
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        getStudentExpectations();
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });
                $('#studentprogress').click(function () {

                    viewStudentProgress();

                });
                $('#studentDocuments').click(function () {
                    var Access=checkAccess("studentDocuments")
                    if(Access && Access["access"]) {
                        printStudentDocuments()
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }

                })
                 $('#Sanctions').click(function () {
                    var Access=checkAccess("Sanctions")
                    if(Access && Access["access"]) {
                        getStudentSanctions()
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }

                 })
                $("#StudentAttendance").click(function () {
                    var Access=checkAccess("StudentAttendance")
                    if(Access && Access["access"]) {
                        getStudentAttendance();
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });
                $("#StudentCadr").click(function () {
                    var Access=checkAccess("StudentCadr")
                    if(Access && Access["access"]) {
                        getStudentCadr();
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });
                 $("#StudentUpdateData").click(function () {
                    var Access=checkAccess("StudentUpdateData")
                    if(Access && Access["access"]) {
                        get_data_student();
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }

                });
                 $("#uploadStudentPersonalDoc").click(function () {
                    var Access=checkAccess("uploadStudentPersonalDoc")
                    if(Access && Access["access"]) {
                        getStudentPersonalDocument();
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                 })
                $("#WeeklyStudentAttendance").click(function () {
                    var Access=checkAccess("WeeklyStudentAttendance")
                    if(Access && Access["access"]) {
                        getStudentWeeklyAttendance();
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });
                $('#studabsence').click(function () {
                    var Access=checkAccess("studabsence")
                    if(Access && Access["access"]) {
                        getStudentAbsence();
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }

                });
                $('#feesPaper').click(function () {
                    var Access=checkAccess("feesPaper")
                    if(Access && Access["access"]) {
                        viewFeesPaper();
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }

                });

                $('#moodleLogin').click(function () {
                    var Access=checkAccess("moodleLogin")
                    if(Access && Access["access"]) {
                        $.ajax({
                        url: "/getJCI",
                        type: "post",
                        cache: false,
                        data: {
                            param0: "stuAdmission.stuAdmission",
                            param1: "moodleLogin",
                            param2: "2"

                        },
                        success: function (d) {
                            var data = jQuery.parseJSON(d);
                            if (!(data["MSG"])) {

                                window.open(data["loginurl"], 'blank_')

                            } else {
                                jAlert(data["MSG"]);
                            }


                        },
                        error: function () {
                            error();
                        }
                    });
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }

                });
                $("#updateEducationalPlatform").click(function () {
                    var Access=checkAccess("updateEducationalPlatform")
                    if(Access && Access["access"]) {
                        updateEducationalPlatform();
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }

                });
                $('#Questionnaire').click(function () {
                    var Access=checkAccess("Questionnaire")
                    if(Access && Access["access"]) {
                         $.ajax({
                        url: "/getJCI",
                        type: "post",
                        cache: false,
                        data: {
                            param0: "Questionnaire.Questions",
                            param1: "check_student_valid_questionnaire",

                        },
                        success: function (d) {
                            var data = jQuery.parseJSON(d);
                            if ((data["MSG"])) {
                                $("#divContents").html("");
                                jAlert(getName(data["MSG"]));

                            } else {
                                if ($("#Questionnaire").attr('href') === "#") {

                                    $("#divContents").html('<div id="RDialogDiv" style="direction: ' + getName("rtl|ltr", PortalLang) + ';font-size: 12pt;color:red;font-weight:bold;"></div>');
                                    $('#RDialogDiv').load('QuesRules.html');
                                    $('#RDialogDiv').dialog({
                                        modal: true,
                                        autoOpen: true,
                                        title: getName('ارشادات | Instructions ', PortalLang),
                                        closeOnEscape: true,
                                        zIndex: 3999,
                                        width: 750,
                                        height: 350,
                                        resizable: true,
                                        position: 'center',
                                        show: 'fade',
                                        hide: 'fade',
                                        buttons: {
                                            'Continue': function () {
                                                $(this).dialog("close");
                                                $("#RDialogDiv").remove();
                                                $("#FormStudentPersonalData").hide();
                                                $("#divContents").show();
                                                $("#divContents").load("/static/html/Questionnaire/EvaluationTabs.html?.rnd=" + randomNumber(), function () {
                                                    $('#tabs div').css('min-height', '450px').css('width', '95%')
                                                });
                                            }
                                        }
                                    });
                                }
                            }


                        },
                        error: function () {
                            error();
                        }
                    });
                          }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }


                });
                //studytable
//                $("#studytable").click(function () {//hadeel
//                    var GlobalName = "studytable";
//                    var str = "<div style='padding: 0px 45px 0px 45px'>"
//                    str += "			 <span id=btnPrint" + GlobalName + " name=btnPrint" + GlobalName + "  title= " + ((PortalLang == "A") ? "طباعه" : "Print") + "   style='float:" + (PortalLang == 'A' ? 'left' : 'right') + "' >"
//                    str += (DrawSystemButton("Print", GlobalName))
//                    str += "			 </span></div>"
//                    str += " <div id='printDiv' >"
//                    $("#FormStudentPersonalData").hide();
//                    $("#divContents").show();
//                    $("#divContents").html(str + '<div id="schdlTitle" style="padding:0.2em">'
//                        + " <table id=headerTbl name=headerTbl border=0 style='padding:0.2em;color:#2779c3;font-weight:bold;font-size:16px;text-align:center;width:100%'  > "
//                        + "        <tr>"
//                        + "            <TD style='width:10%' style='color=#990000;font:12pt arial;text-align:center;width:20%'  ><IMG src='/static/images/alexLogo.jpg'   id='ImgLogo' unselectable=on><br><span style='font-size:12px;color:#000000;'><span></TD> "
//                        + "     <TD  align='center' ><b><font size=4>" + getName('الجدوال الدراسي|Study Time Table') + "<br/></font> </TD>"
//                        + "     <td style='width:10%'> </td>  </tr>"
//                        + "    <TR  style='width:60%' align='center'> "
//                        + "           <TD colspan=3 style='color=#990000;font:12pt arial;' valign='bottom'  align = " + ((PortalLang == "A") ? "left" : "right") + "  ><font style='font-size:12px;color:#000000;'  >" + ((PortalLang == "A") ? "نظام ابن الهيثم لإدارة شئون الطلاب " : "Ibn al-Hitham System SIS ") + " " + GetDate() + "</font> "
//                        + "            </td> "
//                        + "    </tr>"
//                        + "</table>" + '<div id="schdl" style="padding:0.1em ; border:1px solid silver; border-collapse: collapse;width:100%" >  </div></div>');
//
//                    getStutable();
//                    if ($("#Print" + GlobalName).length > 0) {
//                        $("#Print" + GlobalName).unbind('click');
//                        $("#Print" + GlobalName).click(function (e) {
//                            e.preventDefault();
//                            ClickHereToPrint('printDiv');
//                            return false;
//                        });
//                    }
//
//                });

                $("#studytable").click(function () {//hadeel
                    var Access=checkAccess("studytable")
                    if(Access && Access["access"]) {
                        var GlobalName = "studytable";
                        var str = "  <div id='acceptanceRuleDiv'><table style='padding-top: 15px;direction:" + dir + ";text-align:" + getName("right|left", PortalLang) + "' >";
                        str += "      <tr height=30px>";
                        str += "          <td>";
                        str += "             <label class='searchLabel'><b>" + getName("طبقا لقاعدة القبول |According to acceptance rule ", PortalLang) + ":</b></label>";
                        str += "          </td>";

                        str += "           <td  class=NewLabel >"
                            + " <span id='acceptanceRule'></span>&nbsp;&nbsp;<span id='studentAcceptance' style='font-weight:bold;'></span>"
                            + "            </td>"
                            + "        </tr> </table></div>";
                        str += "  <table style='padding-top: 15px;direction:" + dir + ";text-align:" + getName("right|left", PortalLang) + "' >";
                        str += "      <tr height=30px>";
                        str += "          <td>";
                        str += "             <label class='searchLabel'>" + getName("عرض التقرير|Report View", PortalLang) + "</label>";
                        str += "          </td>";

                        str += "           <td id=RelegionTD class=NewLabel >"
                            + "                <input type=radio name=ReportViewTimeTable  value='1' class=' EditData'><label class='NewLabel  EditData'>" + getName("الشكل الاول |first shape", PortalLang) + "</label>"
                            + "                <input type=radio name=ReportViewTimeTable checked value='2' class=' EditData'><label class='NewLabel  EditData'>" + getName("الشكل الثانى |second shape", PortalLang) + "</label><br>"
                            + "            </td>"
                            + "        </tr> </table>";
                        str += "<div style='padding: 0px 45px 0px 45px'>"
                        str += "			 <span id=btnPrint" + GlobalName + " name=btnPrint" + GlobalName + "  title= " + ((PortalLang == "A") ? "طباعه" : "Print") + "   style='float:" + (PortalLang == 'A' ? 'left' : 'right') + "' >"
                        str += (DrawSystemButton("Print", GlobalName))
                        str += "			 </span></div>"
                        str += " <div id='printDiv' >"
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        $("#divContents").html(str
                            + '<div id="schdlTitle" style="padding:0.2em">'
                            // + " <table id=headerTbl name=headerTbl border=0 style='padding:0.2em;color:#2779c3;font-weight:bold;font-size:16px;text-align:center;width:100%;dir="+getName("rtl|ltr",PortalLang)+"'  > "
                            // + "        <tr>"
                            // + "            <TD style='width:10%' style='color=#990000;font:12pt arial;text-align:center;width:20%'  ><IMG src='/static/images/alexLogo.jpg'   id='ImgLogo' unselectable=on><br><span style='font-size:12px;color:#000000;'><span></TD> "
                            // + "     <TD  align='center' ><b><font size=4>" + getName('الجدوال الدراسي|Study Time Table') + "<br/></font> </TD>"
                            // + "     <td style='width:10%'> </td>  </tr>"
                            // + "    <TR  style='width:60%' align='center'> "
                            // + "           <TD colspan=3 style='color=#990000;font:12pt arial;' valign='bottom'  align = " + ((PortalLang == "A") ? "left" : "right") + "  ><font style='font-size:12px;color:#000000;'  >" + ((PortalLang == "A") ? "نظام ابن الهيثم لإدارة شئون الطلاب " : "Ibn al-Hitham System SIS ") + " " + GetDate() + "</font> "
                            // + "            </td> "
                            // + "    </tr>"
                            // + "</table>"
                            + '</div><div id="schdl" style="padding:0.1em ; border:1px solid silver; border-collapse: collapse;width:100%;dir=' + getName("rtl:ltr", PortalLang) + '" >  </div>');
                        GetTimeTable2();

                        $("input[name='ReportViewTimeTable']").change(function () {
                            if ($("input[name='ReportViewTimeTable']:checked").val() == '1') {
                                getStutable();
                            } else {
                                GetTimeTable2();
                            }

                        })


                        if ($("#Print" + GlobalName).length > 0) {
                            $("#Print" + GlobalName).unbind('click');
                            $("#Print" + GlobalName).click(function (e) {
                                e.preventDefault();
                                ClickHereToPrint('printDiv');
                                return false;
                            });
                        }


                }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }

                });

                $("#examtable").click(function () {
                    var Access=checkAccess("examtable")
                    if(Access && Access["access"]) {
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        var GlobalName = "examtable";
                        var Dict = {};
                        Dict['ScopeID'] = ScopeID;
                        var retVal = [];
                        $.ajax({
                            url: "/getJCI",
                            type: "POST",
                            cache: false,
                            async: false,
                            beforeSend: function () {
                                $('#loadingDiv').html("<div align='center'> "
                                    + "<img src='/static/images/LoadingProgressBar.gif' "
                                    + " title='Loading'></Div>");

                            },
                            data: {
                                param0: "Committees.CommitteeReport",
                                param1: "StudentExamSeats",
                                param2: JSON.stringify(Dict)
                            },
                            success: function (data) {
                                var Data = jQuery.parseJSON(data), Seats;
                                if (Data['retMsg'] != 'success') {
                                    var msg = getName(Data['retMsg'], PortalLang);
                                    jAlert(msg);
                                } else {
                                    rightlogo = ""
                                    leftlogo = ""
                                    if ("rightlogo" in Data) rightlogo = Data["rightlogo"];
                                    if ("leftlogo" in Data) leftlogo = Data["leftlogo"];
                                    distributeAssessment = "0"
                                    if ("distributeAssessment" in Data) distributeAssessment = Data["distributeAssessment"];
                                    var str = "<div style='padding: 0px 45px 0px 45px'>"
                                    str += "			 <span id=btnPrint" + GlobalName + " name=btnPrint" + GlobalName + "  title= " + ((PortalLang == "A") ? "طباعه" : "Print") + "   style='float:" + (PortalLang == 'A' ? 'left' : 'right') + "' >"
                                    str += (DrawSystemButton("Print", GlobalName))
                                    str += "			 </span></div>"
                                    str += " <div id='printDiv' >"


                                    if (typeof (Data['Data']) !== undefined) {

                                        Seats = Data['Data'];
                                        var Title = Data['Title'];
                                        retVal.push("<head><style> h2 {page-break-after:always}</style></head>"
                                            + "<div style='padding: 0px 45px 0px 45px'  dir='" + (PortalLang == 'ُ' ? 'rtl' : 'ltr') + "'>");
                                        retVal.push("			 <span id=btnPrint" + GlobalName
                                            + " name=btnPrint" + GlobalName + "  title= " + ((PortalLang == "A") ? "طباعه" : "Print")
                                            + "   style='float:" + (PortalLang == 'E' ? 'right' : 'left') + "' >");
                                        retVal.push(DrawSystemButton("Print", GlobalName, "gray"));
                                        retVal.push("			 </span></div>");
                                        retVal.push(" <div id='printDiv' style='width:95%;' >");
                                        retVal.push("  <table id=container   dir=" + (PortalLang == 'A' ? 'rtl' : 'ltr') + "  style='width:100%'> <tr> <td>");
                                        retVal.push(ShowHeader(getName('جدول إمتحان طالب|Student Exam Time Table', PortalLang), leftlogo, rightlogo))
                                        // retVal.push(" <table id=headerTbl name=headerTbl border=0  dir="
                                        //     + (PortalLang == 'A' ? 'rtl' : 'ltr') + " style='height:70px;width:100%' > ");
                                        //
                                        // var header = getName('جدول إمتحان طالب|Student Exam Time Table',PortalLang);//;+ ' - '+getName(StudentFeesData[0].Semester,"E")+' - '+getName(StudentFeesData[0].Year,"A")+'<br/>'+getName(StudentFeesData[0].StuProgram)
                                        //
                                        // retVal.push(" <tr>");
                                        // retVal.push(" <TD  style='color=#990000;font:12pt arial;text-align:center;width:20%' align=center ><IMG src='/static/images/alexLogo.jpg'  "
                                        //     + "  id='ImgLogo' unselectable=on width='50' "
                                        //     + " height='50'><br><span style='font-size:12px;color:#000000;'"
                                        //     + " ><span></TD> ");
                                        //
                                        // retVal.push(" <TD  align='center' style='color:#2779c3;font-weight:bold;");
                                        // retVal.push("font-size:16px;text-align:center;' ><b><font size=3>" + header + " </font> </TD>");
                                        // retVal.push(" <td style='width:20%'> </td>  </tr>");
                                        // retVal.push(" <TR  style='width:80%' align='center'> ");
                                        // retVal.push("  <TD colspan=3 style='color=#990000;font:12pt arial;'"
                                        //     + " valign='bottom'  align = " + ((PortalLang == "A") ? "left" : "right")
                                        //     + "  ><font style='font-size:12px;color:#000000;'  >"
                                        //     + ((PortalLang == "A") ? "نظام ابن الهيثم لإدارة شئون الطلاب "
                                        //         : "Ibn al-Hitham System SIS ") + " " + GetDate() + "</font> ");
                                        // retVal.push("   </td> ");
                                        // retVal.push(" </tr>");
                                        // retVal.push("</table> </td></tr>");
                                        retVal.push(" <tr><td> ");
                                        if (Seats && Seats.length > 0) {
                                            retVal.push("<TABLE id ='StdCom'"
                                                + " style='width: 98%; border:1px solid black;"
                                                + "page-break-after: always;border-collapse: collapse;"
                                                + "width: 100%;line-height: 25px;border-collapse: collapse;border:1px solid silver;"
                                                + "'"
                                                + " border=1   "
                                                + " align=center dir='" + (PortalLang == 'A' ? 'rtl' : 'ltr') + "'>"
                                                + "<TR  bgcolor='#d1e7f7'>"
                                                + "<TD colspan=" + ((distributeAssessment == "1") ? "10" : "9") + " style='font-weight:bold;' align=center><font size=5>&nbsp;&nbsp;"
                                                + getName(Title["StuName"], PortalLang).replace(/\|$/, '') + "&nbsp;"
                                                + getName(Title["StuCode"], PortalLang)
                                                + "&nbsp;&nbsp;-&nbsp;&nbsp;"
                                                + getName(Title["AcademicSemesterName"], PortalLang)
                                                + "&nbsp;&nbsp;"
                                                + getName(Title["AcademicYearName"], PortalLang)
                                                + "</font>"
                                                + "</TD>"
                                                + "</TR>"
                                                + "</TR>"
                                                + "<TR bgcolor='#AEDC8F'>"
                                                + "<TD align='center' style='font-weight:bold;' width=100>&nbsp;&nbsp;"
                                                + getName("التاريخ|Date", PortalLang) + "&nbsp;&nbsp;</TD>"
                                                + "<TD align='center' style='font-weight:bold;' width=50>&nbsp;&nbsp;"
                                                + getName("الكود|Code", PortalLang) + "&nbsp;&nbsp;</TD>"
                                                + "<TD align='center' style='font-weight:bold;' width=250>"
                                                + getName("المقرر|Course", PortalLang) + "</TD>");
                                            if (distributeAssessment == "1") {
                                                retVal.push("<TD align='center' style='font-weight:bold;' width=250>"
                                                    + getName("التفاصيل|Assessment", PortalLang) + "</TD>");
                                            }
                                            retVal.push("<TD align='center' style='font-weight:bold;' width=150>"
                                                + "&nbsp;"
                                                + getName("الــوقـــــــت|Time", PortalLang) + "&nbsp;" + "</TD>"
                                                + "<TD align='center' style='font-weight:bold;' width=100>"
                                                + getName("اسم اللجنة|Committie Name", PortalLang) + "&nbsp;"
                                                + "</TD>"
                                                + "<TD align='center' style='font-weight:bold;' width=100>"
                                                + getName("رقم مكان اللجنة|Committee Number", PortalLang) + "&nbsp;"
                                                + "</TD>"
                                                + "<TD align='center' style='font-weight:bold;' width=100>"
                                                + getName("مكان اللجنة|Committie Place", PortalLang) + "&nbsp;"
                                                + "</TD>"
                                                + "<TD align='center' style='font-weight:bold;' width=50>"
                                                + getName("المقعد|Seat", PortalLang) + "&nbsp;"
                                                + "</TD>"
                                                + "<TD align='center' style='font-weight:bold;' width=50>"
                                                + getName("ملاحظات|Notes", PortalLang) + "&nbsp;"
                                                + "</TD>"
                                                + "</TR>");
                                            for (var s = 0, l = Seats.length; s < l; s++) {
                                                var stdSeat = Seats[s];

                                                retVal.push("<TR>"
                                                    + "<TD width=100 style='text-align:center;' nowrap>&nbsp;" + stdSeat["DayDate"] + "</TD>"
                                                    + "<TD width=50 style='text-align:center;' nowrap>&nbsp;" + getName(stdSeat["CourseCode"], PortalLang) + "</TD>"
                                                    + "<TD width=250   >&nbsp;" + getName(stdSeat["CourseName"], PortalLang) +(stdSeat["ConcatName"]!=""?("&nbsp;-&nbsp;<span style='font-weight:bold;color:red;'>"+getName(stdSeat["ConcatName"], PortalLang)+"</span>"):"") + "</TD>");
                                                if (distributeAssessment == "1") {
                                                    retVal.push("<TD width=250   >&nbsp;" + getName(stdSeat["assessmnetName"], PortalLang) + "</TD>");
                                                }
                                                if (stdSeat["DayDate"] != "") {
                                                    retVal.push("<TD width=150 style='text-align:center;' > &nbsp;"
                                                        + ((stdSeat["FromDate"] != '') ? stdSeat["FromDate"]
                                                            + "&nbsp;-&nbsp;" + stdSeat["ToDate"] : '')
                                                        + "&nbsp;&nbsp;</TD>"
                                                        + "<TD width=100 style='text-align:center;'  >&nbsp;"
                                                        + getName(stdSeat["CommitteeName"], PortalLang) + "</TD>"
                                                        + "<TD width=100 style='text-align:center;'  >&nbsp;"
                                                        + getName(stdSeat["PlaceCommitteNumber"], PortalLang) + "</TD>"
                                                        + "<TD width=100 style='text-align:center;'  >&nbsp;"
                                                        + getName(stdSeat["BuildingName"], PortalLang) + "</TD>"
                                                        + "<TD width=50 style='bold;text-align:center;' align=center>&nbsp;"
                                                        + getName(stdSeat["SeatNum"], PortalLang)
                                                        + "</TD>"
                                                        + "<TD width=50 style='bold;text-align:center;' align=center>&nbsp;"
                                                        + getName(stdSeat["Notes"], PortalLang)
                                                        + "</TD>");
                                                } else {
                                                    retVal.push("<TD width=150 colspan='" + (distributeAssessment == "1" ? "7" : "6") + "' style='text-align:center;' > &nbsp;"
                                                        + getName("لا يوجد أرقام مقاعد|No Seat Num", PortalLang)
                                                        + "</TD>");
                                                }
                                                retVal.push("</TR>");
                                            }
                                            retVal.push("</TABLE>");
                                            retVal.push("</TD>"
                                                + "</TR>");
                                            retVal.push("</TABLE>");

                                        }
                                        retVal.push(" </div >")
                                    }
                                }
                                return false;
                            },
                            complete: function (jqXHR, textStatus) {
                                $("#divContents").html(retVal.join(""));
                                //$("#divContents").css("":"")
                                $("table#StdCom th,table#StdCom td").css({"border": "1px solid silver"}).css({"vertical-align": "vertical-align: middle"});

                                //----PrintClick---//
                                if ($("#Print" + GlobalName).length > 0) {
                                    $("#Print" + GlobalName).unbind('click');
                                    $("#Print" + GlobalName).click(function (e) {
                                        e.preventDefault();
                                        ClickHereToPrint('printDiv');
                                        return false;
                                    });
                                }
                                return false;
                            },
                            error: function (request, status, error) {
                                jAlert('error');
                            }
                        });
                        return false;
        }else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });

                $("#BooksList").click(function () {
                    var Access=checkAccess("BooksList")
                    if(Access && Access["access"]) {
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        //$("#divContents").html('<img src="/static/images/site_under_construction.gif" align=center style="display: block;margin-left: auto;margin-right: auto;margin-top: 150px;">');
                        getbookList();
                    }else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });

                $("#crsGrd").click(function () {
                    var Access=checkAccess("crsGrd")
                    if(Access && Access["access"]) {
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        GetTranscript(grade_lang = 'E');
                    }else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });

                $("#timetable").click(function () {//hadeel
                    var Access=checkAccess("timetable")
                    if(Access && Access["access"]) {
                        openAcadRegisteration();
                    }else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });

                $("#createMail").click(function () {
                    var Access=checkAccess("createMail")
                    if(Access && Access["access"]) {
                        var Data = {};
                        $.ajax({
                            url: "/getJCI",
                            type: "post",
                            cache: false,
                            data: {
                                param0: "stuAdmission.stuAdmission",
                                param1: "CreateMailState",
                                param2: dicToString(Data)
                            },
                            success: function (d) {
                                var data = jQuery.parseJSON(d);
                                if (data) {
                                    ;
                                    var str = "<form id='FormStudentCreateEmail' >"
                                        + "<span style='height:25px;color:darkred;'>من فضلك قم بإختيار عنوان للبريد الشخصى يتماشى مع الآداب العامه</span>"
                                        + "<table border=0 align='" + align + "' dir =" + dir + " >"
                                        + "<tr style='height:25px;'>"
                                        + "<td class=TdLabel style='width:120px' >" + getName("البريد الإلكترونى|E-Mail") + "</td>"
                                        + "<td class=NewLabel >"
                                    ;

                                    if (data["HasError"] || data["StUserName"] != "") {
                                        var color = "blue";
                                        if (data["HasError"]) {
                                            color = "red";
                                        }
                                        str += data["StMail"] + "</td>"
                                            // TODO :amira ==> need to delete
                                            + "<tr style='height:25px;'>"
                                            + "<td class=TdLabel style='width:120px' >" + getName("حالة البريد|State", PortalLang) + "</td>"
                                            + "<td class=NewLabel >"
                                            + "<span style='color:" + color + ";' >" + getName(data["MailState"], PortalLang) + "</span>"
                                            + "</td>"
                                            + "</tr>";
                                        if (data["expiredMail"]) {
                                            str += "<tr><td colspan='2' style='text-align:center;'><input id=TxtEmailName name=TxtEmailName type=hidden value='" + data["StUserName"] + "' /><button id='UpdateMail' >Reactivate</button></td></tr>"
                                        } else if (data["isActive"]) {
                                            str += "<tr><td colspan='2' style='text-align:center;'><input id=TxtEmailName name=TxtEmailName type=hidden value='" + data["StUserName"] + "' /><button id='ResetMailPswd' >Reset Password</button></td></tr>"
                                        }
                                    } else {
                                        str += "<div id='ShowOpened'>"
                                            + "<input id=TxtEmailName name=TxtEmailName type=text size=50 class='MansMail Input required EditData' />"
                                            + "&nbsp;&nbsp;" + data["SrvDomain"]
                                            + "<br />"
                                            + "<label id=EmailNameError style='color:red;font-weight:bold;'></label>"
                                            + "<br />"
                                            + DrawSystemButton("Search", "Mail")
                                            + "</div>"
                                            + "<div id='ShowClosed'>"
                                            + "<span id='SpEmailName'></span>"
                                            + "<br />"
                                            + "<label>FirstName</label>"
                                            + "<input id=TxtEmailFirstName name=TxtEmailFirstName type=text size=50 class=' Input required EditData' /><label class='' id='ErrorMsgENFn'></label>"
                                            + "<br/>"
                                            + "<label>LastName</label>"
                                            + "<input id=TxtEmailLastName name=TxtEmailLastName type=text size=50 class=' Input required EditData' /><label class='' id='ErrorMsgENLS'></label>"
                                            + "<br/>"
                                            + DrawSystemButton("Save", "Mail")
                                            + "</div>"
                                            + "</td></tr>";
                                    }
                                    str += ""
                                        + ""
                                        + "</table>"
                                        + "</form>"
                                    ;
                                    $("#FormStudentPersonalData").hide();
                                    $("#divContents").show();
                                    $("#divContents").html(str);

                                    //---------------------------------//

                                    $("#ShowClosed").hide();
                                    $("#SearchMail").click(function (e) {
                                        e.preventDefault();
                                        if ($("#TxtEmailName").valid()) {
                                            CheckUserNameWithAD();
                                        }
                                    });
                                    $("#SaveMail").click(function (e) {
                                        e.preventDefault();
                                        if ($("#TxtEmailFirstName").valid() && $("#TxtEmailLastName").valid()) {
                                            SaveEmailName("Open");
                                        }

                                    });
                                    $("#UpdateMail").click(function (e) {
                                        e.preventDefault();
                                        //if ( $("#TxtEmailFirstName").valid() && $("#TxtEmailLastName").valid()){
                                        SaveEmailName("Update");
                                        //}
                                    });
                                    $("#ResetMailPswd").click(function (e) {
                                        e.preventDefault();
                                        //if ( $("#TxtEmailFirstName").valid() && $("#TxtEmailLastName").valid()){
                                        SaveEmailName("Reset");
                                        // }
                                    });
                                }
                            },
                            error: function () {
                                error();
                            }
                        });
                    }else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });

                $("#RegistrationFees").click(function () {
                    var Access=checkAccess("RegistrationFees")
                    if(Access && Access["access"]) {
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        generateC39 = function () {
                            $('.barcode').barcode({
                                code: 'code39'
                            });
                        };
                        getFee();
                    }else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });

                $("#electronic_payment").click(function () {
                    var Access=checkAccess("electronic_payment")
                    if(Access && Access["access"]) {
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        $("#divContents").load('/static/html/fees/payment/electronic_bank_payment.html');
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }

                });
                $("#gpa_calculator").click(function () {
                   var Access=checkAccess("gpa_calculator")
                    if(Access && Access["access"]) {
                        GpaCalculator();
                    }
                    else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }

                });

                $("#AcademyServey").click(function () {
                    var Access=checkAccess("AcademyServey")
                    if(Access && Access["access"]) {
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        $("#divContents").load('/static/html/studentData/studentBasicData/AcademyServey.html');
                    } else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }

                });

                $("#AcdWarnData").click(function () {
                    var Access=checkAccess("AcdWarnData")
                    if(Access && Access["access"]) {

                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        var GlobalName = "warnData";
                        var Dict = {};
                        var retVal = [];
                        Dict['item_type'] = '66.';

                        Dict['flagGPAWarning'] = true;
                        warnDataAcademicWarning(Dict);
                        return false;
                    } else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });

                $("#unregisterWarning").click(function () {
                    var Access=checkAccess("unregisterWarning")
                    if(Access && Access["access"]) {
                        $("#FormStudentPersonalData").hide();
                        $("#divContents").show();
                        var GlobalName = "warnData";
                        var Dict = {};
                        var retVal = [];
                        Dict['item_type'] = '69.';
                        Dict['flagGPAWarning'] = false;

                        warnData(Dict)
                        return false;
                    } else{
                        jAlert("you do not have right");
                        window.location = "/static/index.html";
                    }
                });


                function warnData(Dict, divID = 'divContents') {

                    var flagGPAWarning = Dict['flagGPAWarning']
                    var warningAbsence = ('warningAbsence' in Dict ? Dict['warningAbsence'] : false)

                    $.ajax({
                        url: "/getJCI",
                        type: "POST",
                        cache: false,
                        async: false,
                        beforeSend: function () {
                            $('#' + divID).html("<div align='center'> "
                                + "<img src='/static/images/LoadingProgressBar.gif' "
                                + " title='Loading'></Div>");
                        },
                        data: {
                            param0: "Control.GeneralControl",
                            param1: "GetStudentWarnData",
                            param2: JSON.stringify(Dict)
                        },
                        success: function (res) {

                            var result= jQuery.parseJSON(res);
                            var dir = ((PortalLang == "A") ? "rtl" : "ltr")
                            var d=result['warningData']
                            var warningText=result['warningTxt']
                            if (d.length > 0) {
                                var Acadwarndata = d[0];

                                var str = ""

                                str += " <div id='printDiv' >";
                                str += "<div id='schdlTitle' style='padding:0.2em'>";
                                str += " <table id=headerTbl name=headerTbl border=0 style='padding:0.2em;font-weight:bold;font-size:16px;text-align:center;width:100%;direction:" + dir + "'  > "
                                str += "        <tr>"
                                str += "            <TD style='width:10%' style='color=#990000;font:12pt arial;text-align:center;width:20%'  ><span style='font-size:12px;color:#000000;'><span></TD> "
                                str += "     <TD  align='center' style='color: #990000' ><b><font size=4>" + getName('تقرير انذارات أكاديميه |Warnning Report', PortalLang) + "<br/></font> </TD>"
                                str += "     <td style='width:10%'> </td>  </tr>"
                                str += "    <TR  style='width:60%' align='center'> "
                                // str += "	<td style='width:20%' align='center'><span id='spLogoName' style='font-weight:bold;font-size:8pt;'>" + (String(ScopeName).indexOf('-') > 0 ? (ScopeName.split('-')[1] + (ScopeName.split('-')[2] ? ' - ' + ScopeName.split('-')[2] : '')) : ScopeName) + "</span> </td>";
                                str += " <TD colspan=2 style='color=#990000;font:12pt arial;' valign='bottom'  align = " + ((PortalLang == "A") ? "left" : "right") + "  ><font style='font-size:12px;color:#000000;'  >" + ((PortalLang == "A") ? "نظام ابن الهيثم لإدارة شئون الطلاب " : "Ibn al-Hitham System SIS ") + " " + GetDate() + "</font> "
                                str += "            </td> "
                                str += "    </tr>"
                                str += "<tr>            <td colspan='3'> <hr> </td>     </tr>";
                                str += "</table></div>"
                                str += "<table align=center cellpadding=2 style='width:100%;direction:" + dir + "' >"
                                str += "<tr><td colspan=2>"

                                if (Acadwarndata.length > 0) {
                                    var title = '';
                                    var PaddingPixels = ''
                                    if (warningAbsence) {
                                        title = getName(' انذارات الغياب |Absence Warnning', PortalLang)
                                        PaddingPixels = 500;
                                    } else if (flagGPAWarning) {
                                        title = getName(' الانذارات الاكاديميه |Academic Warnning', PortalLang)
                                        PaddingPixels = 500;
                                    } else {
                                        title = getName(' الانذارات لعدم التسجيل | un registration warning', PortalLang)
                                        PaddingPixels = 250;
                                    }
                                    str += " <span  style='padding-left: " + PaddingPixels + "px;color: #3f51b5; font-size: large; font-weight:bold; '> " + title + "</span><br>"
                                    str += "<table style='width:100%;font-size: 13pt;' dir='" + dir + "' border=1 cellspacing='0' bordercolor='#333333' cellpadding='1' bgcolor='#fffef9' align='center'>"
                                    str += "<thead><tr style='color: #0000AA;'>"
                                    if (warningAbsence) {
                                        str += "			<th >" + getName(" الإنذار |Warnning  ", PortalLang) + "</th>";
                                        str += "			<th >" + getName("إسم المقرر|Course Name ", PortalLang) + "</th>"
                                        str += "			<th >" + getName("الفصل الدراسى المرسل عليه الانذار |Academic Semester  ", PortalLang) + "</th>"
                                        str += "			<th >" + getName("العام الدراسى المرسل عليه الانذار |Academic Year  ", PortalLang) + "</th>"
                                        str += "			<th >" + getName("نسبة الغياب|Absence Percentage ", PortalLang) + "</th>"
                                        str += "		</tr>"
                                        str += "</thead>"
                                        for (i in Acadwarndata) {
                                            var warndata = Acadwarndata[i];
                                            str += "<tr >";
                                            str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;'>" + getName(warndata.absenceText, PortalLang) + "</td>"

                                            str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;'>" + getName(warndata.courseName, PortalLang) + "</td>"

                                            str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;'>" + getName(warndata.semName, PortalLang) + "</td>"
                                            str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;'>" + getName(warndata.yearName, PortalLang) + "</td>"
                                            str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;'>" + warndata.absence_percentage + "</td>"
                                            str += "</tr>"

                                        }


                                    } else {
                                        str += "			<th >" + getName("رقم الإنذار |Warnning Number ", PortalLang) + "</th>"
                                        if (!flagGPAWarning) {
                                            str += "			<th >" + getName("تاريخ الانذار|Warning Date", PortalLang) + "</th>"
                                        }
                                        if (flagGPAWarning && Dict['warningType'] != '3') {
                                            str += "			<th >" + getName("معدل تراكمى لآخر فصل دراسى | Warnning GPA  ", PortalLang) + "</th>"

                                        }
                                        if (Dict['warningType'] == '3') {
                                            str += "			<th >" + getName("عدد مرات الرسوب فى المقرر| The number of failure times in the course  ", PortalLang) + "</th>"
                                        }
                                        str += "			<th >" + getName("الفصل الدراسى المرسل عليه الانذار |Academic Semester  ", PortalLang) + "</th>"
                                        str += "			<th >" + getName("العام الدراسى المرسل عليه الانذار |Academic Year  ", PortalLang) + "</th>"
                                         str += "			<th >" + getName("ملاحظات|Notes ", PortalLang) + "</th>"
                                        str += "		</tr>"
                                        str += "</thead>"
                                        for (i in Acadwarndata) {
                                            var warndata = Acadwarndata[i];
                                            str += "<tr >";
                                            str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;'>" + getName(warndata.WarnNum, PortalLang) + "</td>"
                                            if (!flagGPAWarning) {
                                                str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;' >" + warndata.ApplyDate + "</td>"
                                            }
                                            if (flagGPAWarning && Dict['warningType'] != '3') {
                                                str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;'>" + getName(warndata.f5, PortalLang) + "</td>"
                                            }
                                            if (Dict['warningType'] == '3') {
                                                str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;'>" + getName(warndata.f5, PortalLang) + "</td>"

                                            }

                                            str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;'>" + getName(warndata.semName, PortalLang) + "</td>"
                                            str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;'>" + getName(warndata.yearName, PortalLang) + "</td>"
                                            str += "	<td style='text-align:center;min-height:25px;vertical-align:middle;'>" +warndata.f8+ "</td>"
                                            str += "</tr>"

                                        }

                                    }

                                    str += "</table>";
                                    str += "</td></tr></table>";
                                     str += "</div>"

                                    // if(warningText&&warningText['warningTxt']){
                                    //     var warningVariables=result['warningVariables'];
                                    //     var warningTxt=warningText['warningTxt']
                                    //     var gpa=warningVariables['gpa'];
                                    //      var studentName=warningVariables['studentName'];
                                    //      // var currentYear=warningVariables['currentYear'];
                                    //      // var currentSemester=warningVariables['currentSemester'];
                                    //     var semesterGPA=warningVariables["semesterGPA"]
                                    //      var warningTextResult=warningTxt.replace("%اسم الطالب%",getName(studentName)).replace("%المعدل التراكمى%",gpa);
                                    //       var semesterWord=getName("المعدل الفصلى|semester GPA") + " "+semesterGPA
                                    //      warningTextResult = warningTextResult.replace(/المعدل الفصلى%\/[\d.]+\|[\d.]+%/g, semesterWord);
                                    //      str += " <span  style='padding-left:500px;color: #3f51b5; font-size: large; font-weight:bold; '> " + getName("نص الانذار|warning Text") + "</span><br>"
                                    //      str+="<div>";
                                    //      str+="<p>";
                                    //      str+=warningTextResult;
                                    //     str+="</p>";
                                    //      str+="</div>";
                                    // }

                                } else
                                    str = NoDataToShow();

                            } else
                                str = NoDataToShow();

                            $('#' + divID).html(str);
                        },
                        complete: function () {
                        },
                        error: function (error) {
                            alert('error');
                        }
                    });

                }


                function warnDataAcademicWarning(Dict) {
                    var str = "<style>" +
                        " #formTbl tr" +
                        "     {" +
                        "         height:40px;" +
                        "     }\n" +
                        "    #formTbl tr td{" +
                        "        width:20%" +
                        "    }" +
                        "    #formTbl tr td label{" +
                        "        color:rgb(39, 121, 195) ;" +
                        "        font-size: 18px;" +
                        "        text-align: center         " +
                        "    }" +

                        "</style>"

                    str += "<table id='formTbl' style='width:100%'>" +
                        "<tr> <td style='width: 10%'><label>" + getName("اختر نوع الانذار:|Choose Warning Type") + "</label></td> " +
                        "<td>" +
                        " <input type='radio' name='warningType' checked value='1'><label>" + getName("انذار بناء على المعدل|GPA Warning") + "</label>" +
                        " <input type='radio' name='warningType' value='2'><label>" + getName("انذار غياب|absence Warning") + "</label>" +
                        " <input type='radio' name='warningType' value='3'><label>" + getName("انذار مقررات الرسوب|Failure decisions warning") + "</label>" +
                        "</td>" +
                        "</tr>" +
                        "</table>" +
                        " <div id='warnDiv' > </div>";

                    $('#divContents').html(str);

                    var warningType = $('input:radio[name="warningType"]:checked').val();
                    warnData({'warningType': warningType,'flagGPAWarning':Dict['flagGPAWarning']}, 'warnDiv')

                    $("input[name='warningType']").change(function () {

                        warningType = $('input:radio[name="warningType"]:checked').val()
                        Dict['warningType'] = warningType;
                        Dict["warningAbsence"] = false;
                        if (warningType == "2") {
                            Dict["warningAbsence"] = true;
                        }

                        warnData(Dict, 'warnDiv')


                    });
                    // $("#show_warning").click(function (){
                    //
                    //     var warningType=$('input:radio[name="warningType"]:checked').val()
                    //     Dict['warningType']=warningType;
                    //      Dict["warningAbsence"]=false;
                    //     if (warningType=="2"){
                    //         Dict["warningAbsence"]=true;
                    //     }
                    //
                    //     warnData(Dict,'warnDiv')
                    //
                    // });
                    //    }
                }

                function getFee() {
                    var Dict = {};
                    //Dict['InstID'] = StudentCurrentID;
                    Dict['Year'] = AcademicYear;
                    Dict['semester'] = AcademicSemester;
                    var GlobalName = "Fees";
                    $.ajax({
                        url: "/getJCI",
                        type: "POST",
                        cache: false,
                        async: false,
                        beforeSend: function () {
                            $(".ui-effects-wrapper").remove();
                        },
                        data: {
                            param0: "Reports.RegisterCert",
                            param1: "getStudentFees",
                            param2: JSON.stringify(Dict)
                        },
                        error: function (request, status, err) {
                            error();
                        },
                        success: function (data) {
                            
                            var Data = jQuery.parseJSON(data);

                            if (Data.MSG == 'success') {
                                var StudentFeesData = Data.StudentFeesData;
                                 var BankInfo=Data["BankInfo"];
                                var str = "<div style='padding: 0px 45px 0px 45px'>"
                                str += "			 <span id=btnPrint" + GlobalName + " name=btnPrint" + GlobalName + "  title= " + ((PortalLang == "A") ? "طباعه" : "Print") + "   style='float:" + (PortalLang == 'A' ? 'left' : 'right') + "' >"
                                str += (DrawSystemButton("Print", GlobalName))
                                str += "			 </span></div>"
                                str += " <div id='printDiv' >"
                                str += " <div id='printDiv' >"
                                var tablebuilder = "  <table  dir=" + (PortalLang == 'A' ? 'rtl' : 'ltr') + " style='width:100%' > <tr> <td>"
                                tablebuilder += " <table id=headerTbl name=headerTbl border=0  dir=" + (PortalLang == 'A' ? 'rtl' : 'ltr') + "  style='height:70px;width:100%'> "

                                var header = getName('رسوم التسجيل|Payment Sheet', PortalLang) + ' - ' + getName(StudentFeesData[0].Semester, "E") + ' - ' + getName(StudentFeesData[0].Year, "A") + '<br/>' + getName(StudentFeesData[0].StuProgram, PortalLang)

                                tablebuilder += "        <tr>"
                                tablebuilder += "            <TD  style='color=#990000;font:12pt arial;text-align:center;width:20%' align=center ><IMG src='/static/images/alexLogo.jpg'   id='ImgLogo' unselectable=on width='50' height='50'><br><span style='font-size:12px;color:#000000;'><span></TD> "

                                tablebuilder += "     <TD  align='center' style='color:#2779c3;font-weight:bold;font-size:16px;text-align:center;' ><b><font size=3>" + header + " </font> </TD>"
                                tablebuilder += "     <td style='width:20%'> </td>  </tr>"
                                tablebuilder += "    <TR  style='width:80%' align='center'> "
                                tablebuilder += "           <TD colspan=3 style='color=#990000;font:12pt arial;' valign='bottom'  align = " + ((PortalLang == "A") ? "left" : "right") + "  ><font style='font-size:12px;color:#000000;'  >" + ((PortalLang == "A") ? "نظام ابن الهيثم لإدارة شئون الطلاب " : "Ibn al-Hitham System SIS ") + " " + GetDate() + "</font> "
                                tablebuilder += "            </td> "
                                tablebuilder += "    </tr>"
                                tablebuilder += "</table> </td></tr>"
                                tablebuilder += " <tr><td> "

                               // var reportBody = "<div style='font-weight:bold;text-align:center'>&nbsp;&nbsp;" + getName("الاسم|Name") + "&nbsp;&nbsp;" + getName(StudentFeesData[0].CurrentName) + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + getName("الرقم|ID") + "&nbsp;&nbsp;" + StudentFeesData[0].stu_code +"</div>" ;
                                  //reportBody += "&nbsp;&nbsp;&nbsp;&nbsp;" + getName("رقم حساب البنك|Bank account number") + "&nbsp;&nbsp;" + Data["BankAccountNum"] ;
                                     var reportBody =  "" + "<table style='width:60%;white-space: nowrap' >"
                                 reportBody +=" <tr height='25px'>"
                                 reportBody +="<td  colspan='2'>&nbsp;&nbsp;<label style='font-weight: bold'>" + getName("الاسم|Name") + "&nbsp;&nbsp;" + getName(StudentFeesData[0].CurrentName)+ "</label></td>"
                                  reportBody +="<td  colspan='2'>&nbsp;&nbsp;<label style='font-weight: bold'>" + getName("الرقم|ID") + "&nbsp;&nbsp;" + StudentFeesData[0].stu_code+ "</label></td>"
                                 reportBody +=" </tr>"
                                for( var index = 0; index < BankInfo.length; index++) {
                                        var row = BankInfo[index]
                                        reportBody +=
                                            "<tr height='25px'>" +
                                              "<td colspan='2'>&nbsp;&nbsp;<label style='font-weight: bold'>" + getName("البنك | Bank") +"</label><label>"+ "&nbsp;:&nbsp;" + getName(row['bank_name'], Lang) + "</label></td>"
                                        reportBody +=
                                              "<td colspan='2'> <label style='font-weight: bold'>" +
                                             "&nbsp; " + getName("رقم حساب البنك|Bank account number") +"</label><label>"+ "&nbsp;&nbsp;" + row['bank_account_num'] + "</label></TD></tr>";


                                }
                                  reportBody +="</table>"
                                reportBody += "<table style='border:1px solid silver; border-collapse: collapse;width:100%' > <TR><Th align=center>" + getName('كود المقرر|Course Code', PortalLang) + "</Th><Th align=center>" + getName("اسم المقرر|Course Name") + "</Th><Th align=center>" + getName("الساعات المعتمدة|Credit Hours", PortalLang) + "</Th><TD></TD></TR> "
                                var totalHours = 0;
                                for (var i = 0; i < StudentFeesData.length; i++) {
                                    totalHours += parseInt(StudentFeesData[i].CrsCH)
                                    reportBody += " <TR style='border:1px solid silver;'><TD align=center>" + getName(StudentFeesData[i].CrsCode) + "</TD><TD align=center>" + getName(StudentFeesData[i].CrsName) + "</TD><TD align=center>" + StudentFeesData[i].CrsCH + "</TD><TD></TD></TR> "

                                }
                                var crhFee = (parseInt(totalHours) * parseFloat(StudentFeesData[0].CHfees));// parseInt()

                                reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName("عدد الساعات المعتمدة|Number of Credit Hours", PortalLang) + "</TD><TD align=center>" + totalHours + "</TD><TD align=center>" + getName("ساعة معتمدة|Cr.Hrs", PortalLang) + "</TD></TR> "
                                reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName("رسم الساعة|Credit Hour Fee", PortalLang) + "</TD><TD >&nbsp;&nbsp;" + StudentFeesData[0].CHfees + (String(StudentFeesData[0].CHfees).indexOf('.') > -1 ? '' : '.00') + "</TD><TD align=center>EGP</TD></TR> "
                                reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'><b>&nbsp;&nbsp;" + getName("رسم الساعات|Credit Hours Amount", PortalLang) + "</TD><TD >&nbsp;&nbsp;" + crhFee + (String(crhFee).indexOf('.') > -1 ? '' : '.00') + "</TD><TD align=center>EGP</TD></TR> "

                                var otherFeeExpectCreditHrs = Data['otherFeeExpectCreditHrs']
                                if (otherFeeExpectCreditHrs){
                                if (otherFeeExpectCreditHrs.length) {
                                    for (var ii = 0; ii < otherFeeExpectCreditHrs.length; ii++) {
                                        reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'><b>&nbsp;&nbsp;" + getName(otherFeeExpectCreditHrs[ii].FeeName) + "</TD><TD >&nbsp;&nbsp;" + otherFeeExpectCreditHrs[ii].FeeValue + "</TD><TD align=center>EGP</TD></TR> "
                                        //  reportBody += " <TR><TD colspan=1 style='font-weight:bold;'><bdi>&nbsp;&nbsp;" + getName(otherFeeExpectCreditHrs[ii].FeeName) + "</bdi></TD><TD><bdi>&nbsp;&nbsp;" + otherFeeExpectCreditHrs[ii].FeeValue + (otherFeeExpectCreditHrs[ii].FeeValue.indexOf('.') > -1 ? '' : '.00') + "</bdi></TD></TR> "

                                    }
                                }}

                                var OtherFees = Data['OtherFees']
                                      for ( var index = 0; index < OtherFees.length; index++) {
                                          reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'><b>&nbsp;&nbsp;" + getName(OtherFees[index].FeeName) + "</b></TD><TD>&nbsp;&nbsp;" + OtherFees[index].FeeValue + (OtherFees[index].FeeValue.indexOf('.') > -1 ? '' : '.00') + "</TD><TD align=center>EGP</TD></TR> "
                                }


                                var totFee = crhFee;
//			    FamilyDiscount=اخوة في البرنامج - ابناء السودان - ابناء عاملين - تفوق رياضي
//			    if(StudentGpa>0 && StudentGpa>=FamilyDiscount)
                                if (StudentFeesData[0].GPADiscount > 0 && StudentFeesData[0].GPADiscount >= StudentFeesData[0].Discount) {
                                    totFee = crhFee - ((parseFloat(StudentFeesData[0].GPADiscount) * parseInt(totalHours) * parseFloat(StudentFeesData[0].CHfees)) / 100);
                                    reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName("نقاط الطالب|Student GPA", PortalLang) + "</TD><TD align=center>" + StudentFeesData[0].GPA + "</TD><TD></TD></TR> "
                                    reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName("نسبة الخصم|Reduction Factor", PortalLang) + "</TD><TD align=center>&nbsp;&nbsp;" + StudentFeesData[0].GPADiscount + "%</TD><TD align=center></TD></TR> "
                                    reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName("القيمة بعد الخصم|Amount after reduction", PortalLang) + "</TD><TD>&nbsp;&nbsp;" + String(totFee) + (String(totFee).indexOf('.') > -1 ? '' : '.00') + "</TD><TD align=center>EGP</TD></TR> "
                                }
//			    if(FamilyDiscount>0 && FamilyDiscount>StudentGpa)
                                else if (StudentFeesData[0].Discount > 0 && StudentFeesData[0].Discount > StudentFeesData[0].GPADiscount) {
                                    totFee = crhFee - ((parseFloat(StudentFeesData[0].Discount) * parseInt(totalHours) * parseFloat(StudentFeesData[0].CHfees)) / 100);
                                    reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName(StudentFeesData[0].DiscountName, PortalLang) + "</TD><TD align=center>&nbsp;</TD><TD></TD></TR> "
                                    reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName("نسبة الخصم|Reduction Factor", PortalLang) + "</TD><TD align=center style='direction:" + getName("rtl|ltr") + ";'>" + StudentFeesData[0].Discount + "%</TD><TD align=center></TD></TR> "
                                    reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName("القيمة بعد الخصم|Amount after reduction", PortalLang) + "</TD><TD >&nbsp;&nbsp;" + totFee + (String(totFee).indexOf('.') > -1 ? '' : '.00') + "</TD><TD align=center>EGP</TD></TR> "
                                }

                                var Balance = parseFloat(StudentFeesData[0].Balance);
                                var AllTotalFees = parseFloat(StudentFeesData[0].AllTotalFees)
                                //var PayedFees = 0;//StudentFeesData[0].PayedFees;
                                if (StudentFeesData[0].Elecfees != '' && StudentFeesData[0].Elecfees != '0') {
                                    reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName("رسوم خدمات الكترونية سنوية|Annual Electronic Services Fee", PortalLang) + "</TD><TD >&nbsp;&nbsp;" + StudentFeesData[0].Elecfees + (String(StudentFeesData[0].Elecfees).indexOf('.') > -1 ? '' : '.00') + "</TD><TD align=center>EGP</TD></TR> "
                                }

                                reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName("رسوم اضافية |Extra Fees", PortalLang) + "</TD><TD >&nbsp;&nbsp;" + StudentFeesData[0].otherfees + (String(StudentFeesData[0].Elecfees).indexOf('.') > -1 ? '' : '.00') + "</TD><TD align=center>EGP</TD></TR> "
                                reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName("مبالغ سابقة|Previous balance", PortalLang) + "</TD><TD >&nbsp;&nbsp;" + Balance + (String(Balance).indexOf('.') > -1 ? '' : '.00') + "</TD><TD align=center>EGP</TD></TR> "
                                reportBody += " <TR style='border:1px solid silver;'><TD colspan=2 style='font-weight:bold;'>&nbsp;&nbsp;" + getName("المبلغ المطلوب سداده|Final Amount to be paid", PortalLang) + "</TD>" +
                                    //                                    "<TD >&nbsp;&nbsp;" + (parseFloat(totFee) + parseFloat(Balance) + parseFloat(StudentFeesData[0].Elecfees) + parseFloat(StudentFeesData[0].otherfees)) + (String((parseFloat(totFee) + parseFloat(Balance) + parseFloat(StudentFeesData[0].Elecfees))).indexOf('.') > -1 ? '' : '.00') + "</TD>" +
                                    "<td>&nbsp;&nbsp;" + (AllTotalFees > 0.0 ? AllTotalFees : 0.0) + "</td>" + "<TD align=center>EGP</TD></TR> ";

                                //reportBody += " <TR style='border:1px solid silver;'><TD colspan=4  align=center>*** "+getName("عدم تسديد القيمة المطلوبة خلال 48 ساعة يؤدى الى إلغاء التسجيل ويتحتم إعادة التسجيل مرة أخرى|Not-paying the required fees during the 48 hours cause the cancellation of registration and must re-register again")+" ***</TD></TR> "


                                var tablebuilEnd = " </td></tr></table> ";


                                var xx = tablebuilder + reportBody + tablebuilEnd + "<div align=right><br><br><span style='display:inline-block;width:200px;' class='barcode'>" + StudentFeesData[0].StudentCurrentID + "</span></div>";


                                $('#divContents').html(str + xx + '<img src="/static/images/cut_here.jpg"  style="margin-left: auto;margin-right: auto;width:80%;">' +
                                    xx + "</DIV>");
                                generateC39();
                            } else {
                                jAlert(Data.MSG);
                            }
                        },
                        complete: function (jqXHR, textStatus) {
                            $.unblockUI();
                            //----PrintClick---//
                            if ($("#Print" + GlobalName).length > 0) {
                                $("#Print" + GlobalName).unbind('click');
                                $("#Print" + GlobalName).click(function (e) {
                                    e.preventDefault();
                                    ClickHereToPrint('printDiv');
                                    return false;
                                });
                            }
                        }
                    });
                }


                function getbookList() {

                    var Dict = {};
                    /*Dict['InstID'] = StudentCurrentID;
                     Dict['Year'] = AcademicYear;
                     Dict['semester'] = AcademicSemester;*/
                    var GlobalName = "BookList";
                    $.ajax({
                        url: "/getJCI",
                        type: "POST",
                        cache: false,
                        async: false,
                        beforeSend: function () {
                            $(".ui-effects-wrapper").remove();
                        },
                        data: {
                            param0: "Reports.RegisterCert",
                            param1: "getStudentBookList",
                            param2: JSON.stringify(Dict)
                        },
                        error: function (request, status, err) {
                            error();
                        },
                        success: function (data) {
                            var Data = jQuery.parseJSON(data);
                            if (Data.MSG == 'success') {

                                var StudentFeesData = Data.StudentFeesData;
                                var str = "<div style='padding: 0px 45px 0px 45px'>"
                                str += "			 <span id=btnPrint" + GlobalName + " name=btnPrint" + GlobalName + "  title= " + ((PortalLang == "A") ? "طباعه" : "Print") + "   style='float:" + (PortalLang == 'A' ? 'left' : 'right') + "' >"
                                str += (DrawSystemButton("Print", GlobalName))
                                str += "			 </span></div>"
                                str += " <div id='printDiv' >"
                                var tablebuilder = "  <table id=container   dir=" + (PortalLang == 'A' ? 'rtl' : 'ltr') + "  style='width:100%'> <tr> <td>"
                                tablebuilder += " <table id=headerTbl name=headerTbl border=0  dir=" + (PortalLang == 'A' ? 'rtl' : 'ltr') + " style='height:70px;width:100%' > "

                                var header = getName('قائمة الكتب|Books List', PortalLang) + ' - ' + getName(StudentFeesData[0].Semester, "E") + ' - ' + getName(StudentFeesData[0].Year, "A") + '<br/>' + getName(StudentFeesData[0].StuProgram, PortalLang)

                                tablebuilder += "        <tr>"
                                tablebuilder += "            <TD  style='color=#990000;font:12pt arial;text-align:center;width:20%' align=center ><IMG src='/static/images/alexLogo.jpg'   id='ImgLogo' unselectable=on width='50' height='50'><br><span style='font-size:12px;color:#000000;'><span></TD> "

                                tablebuilder += "     <TD  align='center' style='color:#2779c3;font-weight:bold;font-size:16px;text-align:center;' ><b><font size=3>" + header + " </font> </TD>"
                                tablebuilder += "     <td style='width:20%'> </td>  </tr>"
                                tablebuilder += "    <TR  style='width:80%' align='center'> "
                                tablebuilder += "           <TD colspan=3 style='color=#990000;font:12pt arial;' valign='bottom'  align = " + ((PortalLang == "A") ? "left" : "right") + "  ><font style='font-size:12px;color:#000000;'  >" + ((PortalLang == "A") ? "نظام ابن الهيثم لإدارة شئون الطلاب " : "Ibn al-Hitham System SIS ") + " " + GetDate() + "</font> "
                                tablebuilder += "            </td> "
                                tablebuilder += "    </tr>"
                                tablebuilder += "</table> </td></tr>"
                                tablebuilder += " <tr><td> "

                                var reportBody = "<div style='font-weight:bold;text-align:center'>&nbsp;&nbsp;" + getName("الاسم|Name", PortalLang) + "&nbsp;&nbsp;" + CurrentNameA + "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + getName("الرقم|ID", PortalLang) + "&nbsp;&nbsp;" + StudentCurrentID + "</div>" + "<table  style='border:1px solid silver; border-collapse: collapse;width:100%' >"


                                reportBody += "  "
                                reportBody += " <TR><Th align=center>" + getName('كود المقرر|Course Code', PortalLang) + "</Th><Th style='width:30%'>" + getName("اسم المقرر|Course Name") + "</Th><Th style='width:30%' colspan=2>" + getName("اسم الكتاب|Book Name", PortalLang) + "</Th><TD></TD></TR> "
                                var totalHours = 0;
                                for (var i = 0; i < StudentFeesData.length; i++) {
                                    //totalHours+=parseInt(StudentFeesData[i].CrsCH)
                                    reportBody += " <TR style='border:1px solid silver;'><TD align=center>" + getName(StudentFeesData[i].CrsCode, getName) + "</TD><TD align=center>" + getName(StudentFeesData[i].CrsName) + "</TD><TD align=center colspan=2 style='direction:" + getName("rtl|ltr", PortalLang) + "'>" + getName(StudentFeesData[i].bookName, PortalLang) + "</TD><TD></TD></TR> "

                                }

//
                                reportBody += " <TR><Th colspan=5  style='border:1px solid silver;text-align:center'>*** " + getName("هذه الأستمارة صالحة لمدة 48 ساعة و تلغى بعدها تلقائيا|Valid for 48 hours only ", PortalLang) + " ***</Th></TR> "
//

                                var tablebuilEnd = " </td></tr></table> ";


                                var xx = tablebuilder + reportBody + tablebuilEnd;


                                $('#divContents').html(str + xx + '<img src="/static/images/cut_here.jpg"  style="margin-left: auto;margin-right: auto;width:80%;">' +
                                    xx + "</DIV>");
                            } else {
                                jAlert(Data.MSG);
                            }
                        },
                        complete: function (jqXHR, textStatus) {
                            $.unblockUI();
                            //----PrintClick---//
                            if ($("#Print" + GlobalName).length > 0) {
                                $("#Print" + GlobalName).unbind('click');
                                $("#Print" + GlobalName).click(function (e) {
                                    e.preventDefault();
                                    ClickHereToPrint('printDiv');
                                    return false;
                                });
                            }
                        }
                    });
                }

            },
            error: function () {
                error();
            }
        });
    }

    function getName(strValue, AppPortalLang) {
        if (!AppPortalLang) AppPortalLang = PortalLang;

        var retVal = "";
        if (strValue == null)
            retVal = "";
        else {
            strValue = String(strValue).trim();
            retVal = (strValue.indexOf('|') != -1) ? (AppPortalLang == "E") ? strValue.split('|')[1] : strValue.split('|')[0] : strValue;

            if (AppPortalLang == "A" && retVal.trim() == "" && strValue.indexOf('|') != -1)
                retVal = strValue.split('|')[1];

            if (retVal.trim() == "")
                retVal = strValue.trim('|');
        }

        return retVal;

    }

    function getNotificationsAppStudent() {

        var str = "";
        var Data = {}
        Data['userType'] = '2'
        $.ajax({
            url: '/getJCI',
            type: 'post',
            cache: false,
            data: {
                param0: 'Notifications.NotificationsUsersApp',
                param1: 'get_notification_app',
                param2: JSON.stringify(Data)
            }, success: function (d) {
                var data = jQuery.parseJSON(d);

                var returnedData = data['Data'];
                if (data.MSG == 'success' && returnedData.length > 0) {
                    str += '<div class="jquery-modal2 blocker current"><div id="ex4" class="modal" style="display: inline-block;">';
                    str += '<p style="color: #9f105c">' + getName("هام! | !Important") + '</p>';
                    for (index in returnedData) {
                        var rowData = returnedData[index]

                        str += '<p style="text-align: right"><bdi>' + rowData["notification_message"] + '</bdi></p>';


                    }
                    str += '<a href="#close-modal" rel="modal:close" class="close-modal2 ">' + getName('إغلاق|Close') + '</a></div></div>';
                    $("#FormStudentPersonalData").append(str);
                }
            }, complete: function () {

                $(".close-modal2").click(function () {
                    $(".jquery-modal2").hide()
                })

                getGeneralMessage()
            }, error: function () {
                error()
            }
        });

    }

    function getGeneralMessage() {

        var str = "";
        var MessageDurationInSec=10000;
        $.ajax({
            url: '/getJCI',
            type: 'post',
            cache: false,
            data: {
                param0: 'Administration.AdminGeneral',
                param1: 'getScopeMessageForPortal'
            }, success: function (d) {
                var data = jQuery.parseJSON(d);
                if (data.length > 0) {
                    str += '<div class="jquery-modal1 blocker current"><div id="ex3" class="modal" style="display: inline-block;">';
                    str += '<p style="color: #9f105c">' + getName("هام! | !Important") + '</p>';
                    for (index in data) {
                        var rowData = data[index]
                        if(index==0){
                            if(rowData['MessageDurationInSec']){
                                MessageDurationInSec=parseInt(rowData['MessageDurationInSec'])*1000
                            }
                        }
                        if (rowData.hasOwnProperty("MessageAr")) {

                            str += '<p style="text-align: right"><bdi>' + getName(rowData["MessageAr"] + "|" + rowData["MessageEn"]) + '</bdi></p>';

                        }
                    }
                    str += '<a href="#close-modal" rel="modal:close" class="close-modal1 ">' + getName('إغلاق|Close') + '</a></div></div>';
                    $("#FormStudentPersonalData").append(str);
                }
            }, complete: function () {
                setTimeout(function () {
                    $(".jquery-modal1").hide()
                }, MessageDurationInSec);
                $(".close-modal1").click(function () {
                    $(".jquery-modal1").hide()
                })
                // getNotificationsAppStudent();
            }, error: function () {
                error()
            }
        });

    }

    function getStudentExpectations() {
        $.ajax({
            url: "/getJCI",
            type: "post",
            cache: false,
            data: {
                param0: "Reports.StudentData",
                param1: "getStudentExpectations"
            }, success: function (d) {
                var std = jQuery.parseJSON(d);
                var str = "";
                if (std && std["data"]) {
                    data = std["data"][0];
                    var pecnt = data.FinalPercent;
                    str = "<table border='0' align='left' dir='" + getName("rtl|ltr") + "' id='tblFrm' cellspacing='10px'>" +
                        "        <tbody>" +
                        "           <tr height='25px'>" +
                        "               <td colspan='4' class='TdLabel' style='color:#2779c3;font-weight:bold;font-size:16px;'>" + getName("المتوقع للطالب|Student Expectations") + "</td>" +
                        "           </tr>        " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName("كود الطالب|Student code") + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + data.StuCode + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName("اسم الطالب|Student name") + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + getName(data.StuName) + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName(' عام الالتحاق | Enroll Year  ') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + data.collYear + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName('الساعات المعتمدة|Credit Hours ') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + data.progHrs + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName('الساعات المكتسبة|Final Earned Hours ') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + data.FinalEarnedHrs + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName('الساعات المسجلة|Reg. Hours ') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + data.RegHr + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName('المعدل التراكمى|Final GPA') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + data.FinalGPA + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName('التقدير العام|Final Grade') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + getName(data.FinalGrade) + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName('التقدير المكافئ| Grade') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + getName(data.GradeEval) + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;font-weight:bold;'>" + getName('المجموع التراكمى|Total Marks') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + data.FinalMarks + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName('النسبة|Percentage') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + pecnt + "%</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName('الساعات الاجبارى |Core Hours') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + data.CoreCreditHrs + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName('الساعات الاختيارى |Elective Hours') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + data.ElectiveCreditHrs + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "           <tr height='25px'>            " +
                        "               <td id='LabelArName' class='TdLabel' style='width:15%;font-weight:bold;'>" + getName('الملاحظات|Notes') + "</td>        " +
                        "               <td id='ArNameTD' class='NewLabel'>             " +
                        "                      <span id='SpArName' class='ReadData TdData' style='width:45ex'>" + data.msg + "</span>           " +
                        "               </td>     " +
                        "           </tr> " +
                        "       </tbody>" +
                        "</table>";


                } else {
                    str = getName('لا يوجد بيانات|No Data')
                }
                $('#divContents').html(str);
//                $("#FormStudentPersonalData").show();

            },
            error: function () {
            }
        });
    }

    function openAcadRegisteration(type) {

        $("#FormStudentPersonalData").hide()
        $("#divContents").show();
        $("#divContents").html('<style>     body section[role=navigation] {\n' +
            '            padding: 25px 0px;\n' +
            //            '            '+getName("right|left")+': 0px;\n' +
            '            top: 0px;\n' +
            '            width: 271px;\n' +
            '            height: auto;\n' +
            '            position: absolute;\n' +
            '            background-color: #dde4e7;' +
            '        }</style>' +
            '<div id="AddNewSceduleStudyForm">' +
            '<div id="studentBasic" style="padding:0.5em;"></div> <br/>' +
            '<div id="level" style="width:100%;"></div>' +
            '<div id="schdl" style="padding:0.2em">  </div></div><div id="RDialogDiv"></div>');
        //$('#RDialogDiv').load('regRules.html');
        //$('#RDialogDiv').dialog({
        //	modal:true,
        //	autoOpen:true,
        //	title:getName('الشروط |Condtions') ,
        //	closeOnEscape:true,
        //	zIndex:3999,
        //	width:750,
        //	height:750,
        //	resizable:true,
        //	position:'top',
        //	show:'fade',
        //	hide:'fade',
        //	buttons: {
        //		'Continue': function() {
        //			$( this ).dialog( "close" );
        //			$("#RDialogDiv").remove();
        //
        //		}
        //	}
        //});

        $.getScript("/static/js/general.js?num=" + Math.floor(Math.random() * 100000), function () {
            $.getScript("/static/js/tafqeet.js?num=" + Math.floor(Math.random() * 100000), function () {
                $.getScript("/static/js/words.js?num=" + Math.floor(Math.random() * 100000), function () {
                    StudentCurrentID = PortalUserId
                    Lang = PortalLang;
                    $.getScript("/static/js/index.js?num=" + Math.floor(Math.random() * 100000), function () {

                        $.getScript("/static/js/academicReg.js?num=" + Math.floor(Math.random() * 100000), function () {
                            RegType = "student";
                            GetLevels();
                            // checkRegistrationInterval();

                        });
                    });
                });
            });
            });
    }
    function checkRegistrationInterval(){
        file_name = "AcdRegistration.academicRegistration"
        fun_name = "checkStudentRegistrationInterval"
       $.ajax({
           url: "/getJCI",
           type: "POST",
           cache: false,
           async: false,
           beforeSend: function () {
               $(".ui-effects-wrapper").remove();
           },
           data: {
               param0: file_name,
               param1: fun_name
           },
           error: function (request, status, error) {
               jAlert(getNameByDic({
                   "E": " Error Occured in cources !!! ",
                   "A": " حدث خطأ أثناء عرض مواد الجدول "
               }, Lang, 'level'));
           },
           success: function (data) {

               var Data = jQuery.parseJSON(data);
               if (Data.MSG == "success") {
                    GetLevels();
               }
           }
       });
    }
    function viewStudentProgress(type) {
        var Access=checkAccess("StudentProgress")
        if(Access && Access["access"]){
            $("#FormStudentPersonalData").hide();
            $("#divContents").show();

            $("#divContents").load('/static/html/studentData/Reports/studentprogramcourses.html');
            //$("#divCostdResultntents").load('/static/html/Control/Reports/StudentMarks.html');
            CurrDictVariables['action'] = $(this).attr('action');
            CurrDictVariables['portal']=true;
        }else{
            jAlert("you do not have right");
            window.location = "/static/index.html";
        }

    }

    function printStudentDocuments() {
        $("#FormStudentPersonalData").hide();
        $("#divContents").show();
        $("#divContents").load('/static/html/studentData/requestStudentDocuments.html');
        //$("#divCostdResultntents").load('/static/html/Control/Reports/StudentMarks.html');
        CurrDictVariables['action'] = $(this).attr('action');
    }
    function getStudentSanctions(){
        $("#FormStudentPersonalData").hide();
        $("#divContents").show();
        $("#divContents").load('/static/html/Control/Reports/StudentSanctions.html?num=' + Math.floor(Math.random() * 100000));
        CurrDictVariables['action'] = $(this).attr('action');
        CurrDictVariables['loginFlag'] = 'std';
    }

    function getStudentAbsence() {

        $("#FormStudentPersonalData").hide();
        $("#divContents").show();
        $("#divContents").load('/static/html/Attendence/StudentAbsence.html?num=' + Math.floor(Math.random() * 100000));
        CurrDictVariables['action'] = $(this).attr('action');
        CurrDictVariables['loginFlag'] = 'std';
    }

    function MaterialGrievances() {
        $("#FormStudentPersonalData").hide();
        $("#divContents").show();
        $("#divContents").load('/static/html/Control/Applications/recheckSubjectApply.html');
    }
    function CourseWithdrawal(){
         $("#FormStudentPersonalData").hide();
        $("#divContents").show();
        $("#divContents").load('/static/html/Control/Applications/courseWithdrawalApply.html');
    }
    function GpaCalculator(){
        $("#FormStudentPersonalData").hide();
        $("#divContents").show();
         SType="GPA";
        CurrDictVariables['loginFlag'] = 'std';
        $("#divContents").load('/static/html/studentData/StudentStatus/GPACalculator.html');

    }

    function viewFeesPaper() {
        AcademicYearName = "";
        AcademicSemesterName = "";
        ScopeProgID = StudyPlanID;
        ScopeID = studentScope;
        StudentOutFlag = true;
        $("#FormStudentPersonalData").hide();
        $("#divContents").show();
        $("#divContents").load('/static/html/fees/Reports/StuFeesReport.html?num=' + Math.floor(Math.random() * 100000));
        CurrDictVariables['action'] = $(this).attr('action');
    }

    function updateEducationalPlatform() {
        $("#FormStudentPersonalData").hide();
        $("#divContents").show();

        $("#divContents").load('/static/html/studentData/updateEducationalPlatform.html');
    }

    function openQuestionaire(type) {
        $("#divContents").html('<div id="RDialogDiv" style="direction: ' + getName("rtl|ltr") + ';font-size: 12pt;color:red;font-weight:bold;"></div>');
        $("#FormStudentPersonalData").hide();


        $("#divContents").show();
        $("#divContents").load("/static/html/Questionnaire/EvaluationTabs.html?.rnd=" + randomNumber(), function () {
            $('#tabs div').css('min-height', '450px').css('width', '95%')
        });
//        $('#RDialogDiv').load('QuesRules.html');
//        $('#RDialogDiv').dialog({
//            modal: true,
//            autoOpen: true,
//            title: getName('ارشادات | Instructions '),
//            closeOnEscape: true,
//            zIndex: 3999,
//            width: 750,
//            height: 350,
//            resizable: true,
//            position: 'center',
//            show: 'fade',
//            hide: 'fade',
//            buttons: {
//                'Continue': function () {
//                    $(this).dialog("close");
//                    $("#RDialogDiv").remove();
//                    $("#FormStudentPersonalData").hide();
//                    $("#divContents").show();
//                    $("#divContents").load("/static/html/Questionnaire/EvaluationTabs.html?.rnd=" + randomNumber(), function () {
//                        $('#tabs div').css('min-height', '450px').css('width', '95%')
//                    });
//                }
//            }
//        });
    }
    function CoursesDesires(){
                     var fun_name = "check_desired_courses_reg_calender"
                        var data = {}
                        data['reg_type'] = RegType;
                        $.ajax({
                            url: "/getJCI",
                            type: "POST",
                            cache: false,
                            async: false,
                            beforeSend: function () {
                                $(".ui-effects-wrapper").remove();
                            },
                            data: {
                                param0: "AcdRegistration.academicRegistration",
                                param1: fun_name,
                                param2: dicToString(data)
                            },
                            error: function (request, status, err) {
                                error();
                            },
                            success: function (d) {

                                var data = jQuery.parseJSON(d);
                                if (data.msg == '1')
                                    getCoursesDesires();
                                else {
                                    jAlert(getName(data.msg))
                                }
                            },
                            complete: function (jqXHR, textStatus) {
                            }
                        });
                }

    function getDesires() {
        var desArrNames = [];
        var desiresPrintNames = []
        var desArr = [];
        var ProgsList = [];
        var str = ""
        var str2 = ""
        var flagbtn = ""
        var availableRegularProgram = 0;
        var availablePrivateProgram = 0;
        $("#FormStudentPersonalData").hide();
        str2 = "<form id='FormStudentDesireData'>"
              + "<input type='hidden' id='desireNumberRegister' name='desireNumberRegister' > "
            + "<div style='float:right;margin-right:22%;'>" + DrawSystemButton("Print", "ProgDsr", "blue") + "</div>"


            + "<table class='desiretbl' style='width:80%'>"


            + "<tr><td><br/> choose and drag the programs to the right order</td></tr>"
            + "<tr>"

            + "<td id=desirebales style='float:left;direction:" + getName("rtl|ltr") + "' colspan=2><select id=slcprogs name=slcprogs class='Input required multiselect' multiple='multiple' ><option value=''>----<option></select></td>"
            + "</tr>"
            + "        <tr height=25px><td colspan=4 class=TdLabel align=center> </tr>"
            + "        <tr height=25px><td colspan=4 class=TdLabel align=center>" + "<span id=btnLevSave name=btnDesSave>"
            + DrawSystemButton("Save", 'Desires')
            + "			 </span>"
            + "</td></tr>"
            + "</table></form>"


        str = "<table>"
            + "<tr><td class='TdLabel 'style='color:#2779c3;font-weight:bold;font-size:16px;' >Choose Type Of Programs : <br/></td></tr>"
            + "<tr>"
            + "<br/><td><input type='radio' name='ProgType' value='0'>" + getName("برنامج عادى|Normal Program") + " </td>"
            + "<td><input type='radio' name='ProgType' value='1'>" + getName(" برنامج خاص|Private Program") + "<br/> </td>"
            + "</tr>"
            + "</table>"
            + "<div id=desirediv> "
            //                        +str2
            + "</div>"


        $("#divContents").html(str);
        $("#divContents").show();

        $('input[type=radio][name=ProgType][value="0"]').attr('checked', true);
        GetPrograms();
        //$('input[type=radio][name=ProgType]').trigger("change");
        //$('input[type=radio][name=ProgType]').change(function() {

        $('input[type=radio][name=ProgType]').change(function () {

            GetPrograms();

        });

        function GetPorgramsForPrint() {
            resultDesires={'desiresNames':[],'desireFlag':''}
            desiresPrintNames = []
            desireFlag=''

            DictProg = {}
            DictProg['isStd'] = true
            $.ajax({
                url: "/getJCI",
                type: "post",
                cache: false,
                async: false,
                data: {
                    param0: "stuAdmission.stuAdmission",
                    param1: "progsAndDesire",
                    param2: dicToString(DictProg)
                },
                success: function (d) {

                    var data = jQuery.parseJSON(d);
                    var str = "";
                    if (data && data.MSG == '') {

                        availableRegularProgram = data.availableRegularProgram;
                        availablePrivateProgram = data.availablePrivateProgram;
                        ResultThanwy = data.ResultThanwy
                        desireFlag=data.DesiresFlag;
                        ProgsList = data.progs;
                        for (var x = 0; x < data.progs.length; x++) {
                            var Name = getName(data.progs[x].Name);
                            var ID = data.progs[x].ID;

                            var selected = (data.progs[x].selected != 'undefined' ? data.progs[x].selected : "")
                            if (data.progs[x].selected != 'undefined' && data.progs[x].selected == 'selected') {
                                $('#slcprogs').attr('hasdesire', 'hasdesire')
                                desiresPrintNames.push(data.progs[x].Name);
                            }


                        }


                    }

                },
                error: function () {
                    error();
                }
            });
                resultDesires['desiresNames']=desiresPrintNames;
                resultDesires['desireFlag']=desireFlag;

            return resultDesires

        }

        function removeNull(text) {
            text = (text == null ? '' : text)
            return text

        }

        function GetPrograms() {
            desArrNames = []
            $("#desirediv").html(str2)

            //  if (flagbtn=='0'){
            //
            //	 $("#SaveDesires").hide();
            //  }
            $('#slcprogs').html('');
            DictProg = {}
            DictProg['ProgType'] = $('input[name=ProgType]:checked').val()
            DictProg['isStd'] = true
            var stuProgram="";
            var stuGpa="";
            var stuGrade="";
            $.ajax({
                url: "/getJCI",
                type: "post",
                cache: false,
                async: true,
                data: {
                    param0: "stuAdmission.stuAdmission",
                    param1: "progsAndDesire",
                    param2: dicToString(DictProg)
                },
                success: function (d) {
                    var data = jQuery.parseJSON(d);
                    $("#desireNumberRegister").val(data.desireNumbersRegister);
                    PreQualDegree=data["PreQualDegree"];
                    PreQualName=data["PreQualName"];
                    CurrentNameA=getName(data["stuName"],'A')
                    stuProgram=data['programName'];
                    stuGpa=data['GPA'];
                    stuGrade=data['cumulativeGradeName'];
                    var str = "";
                    if (data && data.MSG == '') {
                        availableRegularProgram = data.availableRegularProgram;
                        availablePrivateProgram = data.availablePrivateProgram;
                        ResultThanwy = data.ResultThanwy
                        if (data["hasDesire"] == 1) {

                            $("#SaveDesires").show();
                        }
                        ProgsList = data.progs;

                        for (var x = 0; x < data.progs.length; x++) {
                            var Name = getName(data.progs[x].Name);
                            var ID = data.progs[x].ID;

                            if (data.item != 'undefined') {
                                $('#slcprogs').attr('item', data.item)
                            }
                            var selected = (data.progs[x].selected != 'undefined' ? data.progs[x].selected : "")
                            if (data.progs[x].selected != 'undefined' && data.progs[x].selected == 'selected') {
                                $('#slcprogs').attr('hasdesire', 'hasdesire')
                                desArrNames.push(data.progs[x].Name);
                            }
                            str += "<option value='" + ID + "'  title='" + Name + "' " + selected + " >" + Name + "</option>";
                            //str += "<option value='"+ID+"'  title='"+Name+"' "+data[x].selected+" >"+Name+"</option>" ;

                            $('#slcprogs').html(str);


                        }


                    } else {

                        jAlert(getName(data.MSG));
                        $("#divContents").html("");
                    }


                }, complete: function () {
                    $(".multiselect").multiselect();
                    $(".ui-multiselect ul li").css("padding-right", "20px");
                    $("#desirebales").css('float', align);
                    if ($("#PrintProgDsr").length > 0) {
                        $("#PrintProgDsr").unbind('click');
                        $("#PrintProgDsr").click(function (e) {
                            e.preventDefault();
                            resultDesires= GetPorgramsForPrint()
                            desiresPrintNames=resultDesires['desiresNames'];
                            desireFlag=resultDesires['desireFlag'];
                            var str = "<div id=printDiv style='direction:" + getName("rtl|ltr") + ";'>";
                            str += "  <table id=container  width=80% dir=" + getName("rtl|ltr") + " > <tr> <td>"
                            str += " <table id=headerTbl name=headerTbl border=0 align=right dir=" + getName("rtl|ltr") + "  style='height:70px;width:100%;'> "
                            str += "        <tr>"
                            str += "            <TD style='width:20%' style='color=#990000;font:12pt arial;text-align:center;width:20%' align=center ><IMG src='/static/images/alexLogo.jpg'   id='ImgLogo' unselectable=on><br></TD> "

                            str += "     <TD  align='center' ><b><font size=4>" + "استمارة رغبات" + " </font> </TD>"
                            str += "     <td style='width:20%'> </td>  </tr>"
                            str += "    <TR  style='width:80%' align='center'> "
                            str += "           <TD colspan=3 style='color=#990000;font:12pt arial;' valign='bottom'  align = " + getName("left|right", "A") + "  ><font style='font-size:12px;color:#000000;'  >" + getName("نظام ابن الهيثم لإدارة شئون الطلاب |Ibn al-Haytham credit hours ", "A") + " " + GetDate() + "</font> "
                            str += "            </td> "
                            str += "    </tr>"
                            str += "	<tr>"
                            str += "		<td colspan=3>";
                            str += "			<hr />"
                            str += "		</td>";
                            str += "	<tr>";
                            str += "</table> </td></tr>"
                            str += " <tr><td> "

                            str += " <table style='width:80%;margin-right:15px;margin-left:15px;margin-top:15px;text-align:right;'>"
                            // str += "        <tr>"
                            // str += "           <TD colspan='3' > <label>البرامج الدراسية المتاحة بالكلية</label> </td> "
                            // str += "        </tr>"
                            //
                            // for (var xx = 0; xx < ProgsList.length; xx++) {
                            //     str += "        <tr>"
                            //     str += "           <TD style='padding:5px;width:10px;'>" + (xx + 1) + "</td> "
                            //     str += "           <TD >" + getName(ProgsList[xx].Name, "A") + "</td> "
                            //     str += "           <TD class='inTd'>  </td> "
                            //     str += "        </tr>"
                            // }

                            str += "        <tr  >"
                            str += "           <TD colspan='3' > " +
                                "<table class='TdData' style='-webkit-border-radius: 16px;-moz-border-radius: 16px;border-radius:16px,border:2px solid;" +
                                "width:100%;border: 1px solid;border-color:#000;margin:5px;display:inline-block;background-color:transparent;'>"
                                + "<tr ><td style='width:150px;padding:5px;text-indent:4px;'> اسم الطالب</td><td>" + CurrentNameA + "</td></tr>";

                            if(desireFlag=="0"){
                                 str += "<tr><td style='width:150px;padding:5px;text-indent:4px;'>البرنامج الحالى </td><td>" + getName(stuProgram) + "</td></tr>"
                                + "<tr ><td style='width:150px;padding:5px;text-indent:4px;'>المعدل التراكمى</td><td>" + stuGpa + "</td></tr>"
                                + "<tr ><td style='width:150px;padding:5px;text-indent:4px;'>التقدير التراكمى</td><td>" + getName(stuGrade) + "</td></tr>"

                            }else{
                                str += "<tr><td style='width:150px;padding:5px;text-indent:4px;'>المجموع</td><td>" + PreQualDegree + "</td></tr>"
                                + "<tr ><td style='width:150px;padding:5px;text-indent:4px;'>نوع الشعبة </td><td>" + getName(PreQualName, "A") + "</td></tr>"
                            }

                               str += " </table>"
                                + " </td> "
                            str += "        </tr>"
                            str += "        <tr  >"
                            str += "           <TD colspan='3' ><b>ترتيب رغبات الطالب </b></td> "
                            str += "        </tr>"
                            if (desiresPrintNames.length > 0) {
                                for (var xx = 0; xx < desiresPrintNames.length; xx++) {
                                    str += "        <tr>"
                                    str += "           <TD style='width:10px;'>" + (xx + 1) + "</td> "
                                    str += "           <TD  >" + getName(desiresPrintNames[xx], "A") + "</td> "
                                    str += "        </tr>"
                                }
                            } else {
                                str += "<tr>"
                                str += "<td>"
                                str += "<label style='color:red'>لايوجد رغبات مسجلة</label>"
                                str += "</td>"
                                str += "</tr>"
                            }


                            //يعتمد وكيل المعهد
                            str += " </table >";
                            str += " </td></tr>";
                            if (ResultThanwy) {
                                str += " <tr><td> ";
                                str += " <table class='secondaryDegreesTbl' style='width:80%;text-align:right;margin-right:15px;border-collapse:collapse ' border='1'>";
                                str += "<tr>"
                                str += "<td colspan='2' style='text-align: center;font-weight: bold'>درجات الثانوية العامة  </td>"
                                str += "</tr>"
                                for (var key in ResultThanwy) {
                                    str += "<tr>"
                                    str += "<td style='width:60%'> " + key + "  </td>"
                                    str += "<td>" + removeNull(ResultThanwy[key]) + "  </td>"
                                    str += "</tr>"
                                }

                                str += " </table >";
                                str += " </td></tr>";
                            }
                            str += "        <tr>"
                            str += "           <TD colspan=3><br></td> "
                            str += "        </tr>"
                            str += "        <tr>"
                            str += "           <TD colspan=3><span style='width:100px'><b >توقيع الطالب :</b></span> .................................</td> "


                            str += "        </tr>"
                            str += "        <tr>"
                            str += "           <TD colspan=3><span style='width:100px'><b >التاريخ :</b></span> .................................</td> "
                            str += "        </tr>"
                            // str += "        <tr>"
                            // str += "           <TD colspan=3><br></td> "
                            // str += "        </tr>"


                            str += "</table></div>"
                            ClickHereToPrint("", str);
                            return false;
                        });
                    }
                },
                error: function () {
                    error();
                }
            });
            $.validator.addMethod("minlength", function (value, element, param) {
                var length = $.isArray(value) ? value.length : this.getLength($.trim(value), element);

                if (element.nodeName && element.nodeName.toLowerCase() === "select" && this.settings.rules[$(element).attr("name")].required !== false) {
                    // could be an array for select-multiple or a string, both are fine this way
                    return length >= param;
                }

                return this.optional(element) || length >= param;
            }, $.format("Please select at least {0} things."));
            $("#FormStudentDesireData").validate({
                rules: {
                    slcprogs: {
                        required: true,
                        minlength: 2
                    }
                }/*,
                             messages:{
                             slcprogs:{
                             minlength: $.format("Please select at least {0} programs.")
                             }
                             }*/
            });


            $("#SaveDesires").click(function (e) {

                e.preventDefault();
                //if ($(".selected ul").html() !="")
                //{
                var allAvaliableProgram = 0;
                if ($('input[name=ProgType]:checked').val() == "0") {
                    allAvaliableProgram = availableRegularProgram
                } else {
                    allAvaliableProgram = availablePrivateProgram
                }

                //if ($("#FormStudentDesireData").valid()) {
                var selectedCount = $('#desirebales').find('.selected').find('li').length;
                var desireNumberRegister=$("#desireNumberRegister").val();
                //i want check if desireNumberRegister has value check number that desire applied
                if ((desireNumberRegister == "" && selectedCount == allAvaliableProgram + 1)
                       || (desireNumberRegister != "" && selectedCount-1 >= parseInt(desireNumberRegister))) {
                    var Data = {};
                    if ($('#slcprogs').attr('item') != 'undefined')
                        Data['item'] = $('#slcprogs').attr('item')
                    desArr = [];
                    $('#desirebales').find('.ui-sortable').each(function (i) {
                        $(this).children(':not(.ui-helper-hidden-accessible)').each(function (x) {
                            var val = $('option[title="' + $(this).attr('title') + '"]').val();
                            if (val != null) {
                                desArr.push(val);
                            }
                        });
                    });

                    //if (desArr.length>2)
                    //{
                    //	return false;
                    //}
                    Data['Desirables'] = desArr;
                    var funName = "";
                    //if($('#slcprogs').attr('hasdesire')=='hasdesire'){
                    //	funName="updateDesires"
                    //}else
                    //	funName="saveDesires"


                    funName = "saveDesires"
                    $.ajax({
                        url: "/getJCI",
                        type: "post",
                        cache: false,
                        async: true,
                        data: {
                            param0: "stuAdmission.stuAdmission",
                            param1: funName,
                            param2: JSON.stringify(Data)
                        }, beforeSend: function () {
                            $.blockUI({message: '<h1>' + getName('يرجى الانتظار|Please wait') + '</h1>'})
                        },
                        success: function (d) {

                            var d = jQuery.parseJSON(d);
                            if (d['msg'] == 'sucess') {
                                $.unblockUI();
                                jAlert('Desires saved ')
                                $("#SaveDesires").hide();
                                GetPrograms()
                            } else {
                                jAlert(d['msg'])
                            }


                            // if (confirm('هل انت متاكد من حفظ الرغبات لم يتم التعديل بها مرة اخرى '))
                            // {
                            //	flagbtn=0
                            //    $("#SaveDesires").hide();
                            // }
                            //


                            // $('#progDsr').trigger('click');
                        }, complete: function () {
                            $.unblockUI();
                            //$(".multiselect").multiselect();
                            //$("#desirebales").css('float',align);
                        },
                        error: function () {
                            alert("error")
                            error();
                        }
                    });
                } else {
                     if (desireNumberRegister == "") {
                            jAlert("you must choose all the programs");
                        } else {
                            jAlert("you must choose at least " + desireNumberRegister + " programs");
                        }
                }

                //}
            });


            //});

        }
    }

    function getStudentAttendance() {
        $("#FormStudentPersonalData").hide();
        $("#divContents").show();
        $("#divContents").load('/static/html/studentData/studentAttendance.html?num=' + Math.floor(Math.random() * 100000));
        //  $("#divContents").load('/static/html/studentData/studentAttendance_2.html');
        //$("#divCostdResultntents").load('/static/html/Control/Reports/StudentMarks.html');
        CurrDictVariables['action'] = $(this).attr('action');

    }


    function getStudentCadr() {
        var str=''
        var Data = {};
        Data['studentPortal'] = true
        $.ajax({
            url: "/getJCI",
            type: "POST",
            cache: false,
            async: false,
            beforeSend: function () {
                $(".ui-effects-wrapper").remove();
            },
            data: {
                param0: "StudentBasicData.Reports",
                param1: "GetCardData",
                param2: JSON.stringify(Data)
            },
            error: function () {
                error();
            },
            success: function (result) {
                
                result = jQuery.parseJSON(result);
                if (result['messageCoronaIDs']) {
                    var strMessage = getName(' الطلاب الذين لم يتلقوا اللقاح ') + ' '
                    CoronaIDsList = result['messageCoronaIDs'].split(',')

                    var CoronaIDsListSliceMsg = ''
                    for (i = 0; i < CoronaIDsList.length; i++) {
                        if (i % 8 == 0 && i > 0) {
                            CoronaIDsListSliceMsg += "<br/>"
                        }
                        CoronaIDsListSliceMsg += CoronaIDsList[i] + ","
                    }
                    jAlert(strMessage + CoronaIDsListSliceMsg)
                }
                choosen = [result['IDs']].join();
                var textColor = result["textColor"];
                var data = result["stdData"];
                var CardColor = "#E5097F";
                if (textColor && textColor != "") CardColor = textColor;
                // str = "<div style='padding: 0px 45px 10px 45px;text-align:" + (Lang == 'A' ? 'left' : 'right') + "'>"
                // str += "			 <span id=btnPrint" + GlobalName + " name=btnPrint" + GlobalName + "  title= " + ((Lang == "A") ? "طباعه" : "Print") + "   >"
                // str += DrawSystemButton("Print", GlobalName, "blue")
                // str += (CheckRight4Access(3) ? DrawSystemButton("Hide", GlobalName, "gray") : '')
                // str += "<input type='hidden' id='choosenIds' name='choosenIds' value='" + choosen + "'></span></div>" +

                    "<div id='cardsDiv' dir='" + dir + "' style='width:710px;margin:0 auto;'>"
                str += "<style>";

                str += "@font-face{"

                str += "font-family:'FontKufiRegular';"

                str += "src:url('/static/fonts/DroidKufi-Regular.eot?v=3.0.1');";

                str += "src:url('/static/fonts/DroidKufi-Regular.eot?#iefix&v=3.0.1')format('embedded-opentype'),";

                str += "url('/static/fonts/DroidKufi-Regular.woff?v=3.0.1') format('woff'),";

                str += "url('/static/fonts/DroidKufi-Regular.ttf?v=3.0.1') format('truetype');";

                str += "font-weight:normal;";

                str += "font-style:normal";

                str += "}"

                str += "</style>";
                debugger
                AcademicYearName=result['cardProfile']['AcademicYearName']
               ScopeID= result["stdData"][0]['ScopeID']
                str += getCardDesign(result);
                str += "</div>";
                str+="<div>" +
                    "<span>" +
                    "<lable> </lable>" +
                    "</span>" +
                    "" +
                    "" +
                    "" +
                    "</div>"
                $("#divContents").show()
                $("#tblFrm").html('')
                $("#divContents").html(str);

                generateC39();
                $('.title').css({
                    "font-weight": "bold",
                    //"height":"36px",
                    //"text-align":align,
                    // "border-bottom":"thin solid #000 "
                });


                $('.logo').css({
                    "padding-bottom": "2px",
                    //"width":"45px"
                });
                $('.cardtbl').css({
                    //"padding-right" :"7mm",
                    //"padding-bottom":"1mm",
                    //"padding-top":"1mm",

                    "height": "200px",
                    "width": "310px !important"
                });
                $('.tblprinttd').css({
                    "padding-left": "1mm",
                    "padding-right": "1mm",
                    "border-bottom": "thin solid silver "
                });
                if ($("#Print" + GlobalName).length > 0) {
                    $("#Print" + GlobalName).unbind('click');
                    $("#Print" + GlobalName).click(function (e) {
                        e.preventDefault();
                        ClickHereToPrint('cardsDiv');
                        return false;
                    });
                }

                if ($("#Hide" + GlobalName).length > 0) {
                    $("#Hide" + GlobalName).unbind('click');
                    $("#Hide" + GlobalName).click(function (e) {
                        e.preventDefault();
                        HidingCards(choosen);
                        return false;

                    });
                }
                $(".Card_collage_Name").css("font-family", "FontKufiRegular");
            }
        });

    }


    function getStudentWeeklyAttendance() {
        $("#FormStudentPersonalData").hide();
        $("#divContents").show();
        $("#divContents").load('/static/html/studentData/studentWeeklyAttendance.html?num=' + Math.floor(Math.random() * 100000));
        //  $("#divContents").load('/static/html/studentData/studentAttendance_2.html');
        //$("#divCostdResultntents").load('/static/html/Control/Reports/StudentMarks.html');
        CurrDictVariables['action'] = $(this).attr('action');

    }
    function getStudentPersonalDocument(){
          $("#FormStudentPersonalData").hide();
        $("#divContents").show();
        $("#divContents").load("/static/html/studentData/studentBasicData/insertStudentDocuments.html?num=" + Math.floor(Math.random() * 100000))
           CurrDictVariables['portalStudent'] =true;

    }
    function get_data_student(){
           $("#FormStudentPersonalData").hide();
        $("#divContents").show();
        $("#divContents").load("/static/html/studentData/studentBasicData/studentUpdateData.html?num=" + Math.floor(Math.random() * 100000))
           CurrDictVariables['portalStudent'] =true;
    }
    //amira
    function getCoursesDesires() {
        var desArrNames = [];
        var desiresPrintNames = []
        var desired_arr = [];
        var available_courses = [];
        var str = ""
        var str2 = ""
        var flagbtn = ""
        var availableRegularProgram = 0;
        var availablePrivateProgram = 0;
        $("#FormStudentPersonalData").hide();
        str2 =
            ( "<form id='FormStudentCrsDsrData'>"
            + "<div style='float:right;margin-right:32%;'>" + DrawSystemButton("Print", "coursesDsr", "blue") + "</div>"
            + "<table class='Coursesdesiretbl' style='width:80%'>"
            + "<tr><td><br/> choose and drag the courses to the right box </td></tr>"
            + "<tr>"
            + "<td id=Crsdesirebales style='float:left;direction:" + getName("rtl|ltr") + "' colspan=2>" +
            "<select id=slcCrs name=slcCrs class='Input required multiselect' multiple='multiple' >" +
            "<option value=''>----<option>" +
            "</select>" +
            "</td>"
            + "</tr>"
            + "        <tr height=25px><td colspan=4 class=TdLabel align=center> </tr>"
            + "        <tr height=25px><td colspan=4 class=TdLabel align=center>" + "" +
            "<span id=btnLevSave name=btnDesSave>"
            + DrawSystemButton("Save", 'CrsDesires')
            + "			 </span>"
            + "</td></tr>"
            + "</table></form>")

        str = "<div id=desirediv> "
            + "</div>"

        $("#divContents").html(str);
        $("#divContents").show();

        GetAvaliableCourses();

        //amira
        function GetCoursesForPrint() {
            desired_printed_data = {}
            desiresPrintNames = []
            DictCourses = {}
            DictCourses['reg_type'] = RegType
            var fun_name = "get_desired_available_courses"
            $.ajax({
                url: "/getJCI",
                type: "post",
                cache: false,
                async: false,
                data: {
                    param0: "AcdRegistration.academicRegistration",
                    param1: fun_name,
                    param2: dicToString(DictCourses)
                },
                success: function (d) {
                    var data = jQuery.parseJSON(d);
                    var str = "";
                    var available_courses = []
                    var levels_with_courses = []
                    if (data && data.MSG == '') {
                        desired_printed_data['student_data'] = data.student_data;
                        desired_printed_data['year_name'] = data.year_name;
                        desired_printed_data['semester_name'] = data.semester_name;
                        levels_with_courses = data.levels_with_courses;
                        for (var j = 0; j < levels_with_courses.length; j++) {
                            var level_data = levels_with_courses[j]
                            available_courses = level_data.available_courses;
                            for (var x = 0; x < available_courses.length; x++) {
                                var crs_name = available_courses[x].crs_name;
                                var crs_id = available_courses[x].crs_id;
                                var crs_hours = available_courses[x].crs_hours;
                                var crs_code = available_courses[x].crs_code;
                                var selected = (available_courses[x].selected != 'undefined' ? available_courses[x].selected : "")
                                if (available_courses[x].selected != 'undefined' && available_courses[x].selected == 'selected') {
                                    $('#slcCrs').attr('hasdesire', 'hasdesire')
                                    desiresPrintNames.push(crs_name);
                                }
                            }
                        }
                        desired_printed_data['desiresPrintNames'] = desiresPrintNames
                    }
                },
                error: function () {
                    error();
                }
            });

            return desired_printed_data

        }

//amira
        function removeNull(text) {
            text = (text == null ? '' : text)
            return text
        }

//amira
        function GetAvaliableCourses() {
            desArrNames = []
            $("#desirediv").html(str2)
            $('#slcCrs').html('');
            DictCourses = {}
            DictCourses['reg_type'] = RegType
            // DictCourses['crsOptCode']=data["crsOptCode"]
            // DictCourses['appliedOn']=data["appliedOn"]
            var fun_name = "get_desired_available_courses"
            $.ajax({
                url: "/getJCI",
                type: "post",
                cache: false,
                async: true,
                data: {
                    param0: "AcdRegistration.academicRegistration",
                    param1: fun_name,
                    param2: dicToString(DictCourses)
                },
                success: function (d) {

                    var data = jQuery.parseJSON(d);
                    var str = "";
                    var available_courses = []
                    var levels_with_courses = []
                    if (data && data.MSG == '') {
                        if (data["hasDesire"] == 1) {
                            $("#SaveDesires").show();
                        }
                        levels_with_courses = data.levels_with_courses
                        for (var j = 0; j < levels_with_courses.length; j++) {
                            var level_data = levels_with_courses[j]
                            available_courses = level_data.available_courses;
                            str += "<optgroup label ='" + level_data.level_name + "' >" + level_data.level_name + " ";
                            for (var x = 0; x < available_courses.length; x++) {
                                var crs_name = available_courses[x].crs_name;
                                var crs_id = available_courses[x].crs_id;
                                var crs_hours = available_courses[x].crs_hours;
                                var crs_code = available_courses[x].crs_code;
                                if (data.item != 'undefined') {
                                    $('#slcCrs').attr('item', data.item)
                                }
                                ;
                                var selected = (available_courses[x].selected != 'undefined' ? available_courses[x].selected : "")
                                if (available_courses[x].selected != 'undefined' && available_courses[x].selected == 'selected') {
                                    $('#slcCrs').attr('hasdesire', 'hasdesire')
                                    desArrNames.push(crs_name);
                                }
                                str += "<option " +
                                    " crs_hours='" + crs_hours + "' crs_code='" + crs_code + "' crs_id='" + crs_id + "'" +
                                    " crs_name='" + crs_name + "' level_id='" + level_data.level_id + "' " + selected + " >" +
                                    "" + getName(crs_name) + " - " + getName('مستوى|level ') + level_data.level_name + "" +
                                    "</option>";
                            }
                            str += "</optgroup>"
                        }
                        $('#slcCrs').html(str);
                    }
                    else {
                        jAlert(getName(data.MSG));
                        $("#divContents").html("");
                    }

                }, complete: function () {
                    $(".multiselect").multiselect();
                    $(".ui-multiselect ul li").css("padding-right", "20px");
                    $("#Crsdesirebales").css('float', align);
                    if ($("#PrintcoursesDsr").length > 0) {
                        $("#PrintcoursesDsr").unbind('click');
                        $("#PrintcoursesDsr").click(function (e) {
                            e.preventDefault();
                            desired_printed_data = GetCoursesForPrint()
                            desiresPrintNames = desired_printed_data.desiresPrintNames
                            var str = "<div id=printDiv style='direction:" + getName("rtl|ltr") + ";'>";
                            str += "  <table id=container  width=100% dir=" + getName("rtl|ltr") + " > <tr> <td>"
                            str += " <table id=headerTbl name=headerTbl border=0 align=right dir=" + getName("rtl|ltr") + "  style='height:70px;width:100%;'> "
                            str += "        <tr>"
                            str += "            <TD style='width:20%' style='color=#990000;font:12pt arial;text-align:center;width:20%' align=center ><IMG src='/static/images/alexLogo.jpg'   id='ImgLogo' unselectable=on><br></TD> "

                            str += "     <TD  align='center' ><b><font size=4>" + "استمارة رغبات المقررات" + " </font> </TD>"
                            str += "     <td style='width:20%'> </td>  </tr>"
                            str += "    <TR  style='width:80%' align='center'> "
                            str += "           <TD colspan=3 style='color=#990000;font:12pt arial;' valign='bottom'  align = " + getName("left|right", "A") + "  ><font style='font-size:12px;color:#000000;'  >" + getName("نظام ابن الهيثم لإدارة شئون الطلاب |Ibn al-Haytham credit hours ", "A") + " " + GetDate() + "</font> "
                            str += "            </td> "
                            str += "    </tr>"
                            str += "	<tr>"
                            str += "		<td colspan=3>";
                            str += "			<hr />"
                            str += "		</td>";
                            str += "	<tr>";
                            str += "</table> </td></tr>"
                            str += " <tr><td> "

                            str += " <table style='width:80%;margin-right:15px;margin-left:15px;margin-top:15px;text-align:right;'>"
                            str += "        <tr  >"
                            str += "           <TD colspan='3' > " +
                                "<table class='TdData' style='-webkit-border-radius: 16px;-moz-border-radius: 16px;border-radius:16px,border:2px solid;" +
                                "width:100%;border: 1px solid;border-color:#000;margin:5px;display:inline-block;background-color:transparent;'>"
                                + "<tr ><td style='width:150px;padding:5px;text-indent:4px;'> اسم الطالب</td><td>" + CurrentNameA + "</td></tr>"
                                + "<tr ><td style='width:150px;padding:5px;text-indent:4px;'> كود الطالب</td><td>" + desired_printed_data.student_data.stu_code + "</td></tr>"
                                + "<tr ><td style='width:150px;padding:5px;text-indent:4px;'> الكليه </td><td>" + getName(desired_printed_data.student_data.fac_name) + "</td>" +
                                "<td style='width:150px;padding:5px;text-indent:4px;'> البرنامج </td><td>" + getName(desired_printed_data.student_data.prog_name) + "</td></tr>"
                                + "<tr ><td style='width:150px;padding:5px;text-indent:4px;'> للعام </td><td>" + getName(desired_printed_data.year_name) + "</td>"
                                + "<td style='width:150px;padding:5px;text-indent:4px;'> والفصل الدراسى  </td><td>" + getName(desired_printed_data.semester_name) + "</td></tr>"
                                + " </table>"
                                + " </td> "
                            str += "        </tr>"
                            str += "        <tr  >"
                            str += "           <TD colspan='3' ><b>مقررات الطالب </b></td> "
                            str += "        </tr>"
                            if (desiresPrintNames.length > 0) {
                                for (var xx = 0; xx < desiresPrintNames.length; xx++) {
                                    str += "        <tr>"
                                    str += "           <TD style='width:10px;'>" + (xx + 1) + "</td> "
                                    str += "           <TD  >" + getName(desiresPrintNames[xx], "A") + "</td> "
                                    str += "        </tr>"
                                }
                            }
                            else {
                                str += "<tr>"
                                str += "<td>"
                                str += "<label style='color:red'>لايوجد رغبات مسجلة</label>"
                                str += "</td>"
                                str += "</tr>"
                            }
                            str += " </table >";
                            str += " </td></tr>";
                            str += "        <tr>"
                            str += "           <TD colspan=3><br></td> "
                            str += "        </tr>"
                            str += "        <tr>"
                            str += "           <TD colspan=3><span style='width:100px'><b >توقيع الطالب :</b></span> .................................</td> "
                            str += "        </tr>"
                            str += "        <tr>"
                            str += "           <TD colspan=3><span style='width:100px'><b >التاريخ :</b></span> .................................</td> "
                            str += "        </tr>"
                            str += "</table></div>"
                            ClickHereToPrint("", str);
                            return false;
                        });
                    }
                },
                error: function () {
                    error();
                }
            });
            $.validator.addMethod("minlength", function (value, element, param) {
                var length = $.isArray(value) ? value.length : this.getLength($.trim(value), element);

                if (element.nodeName && element.nodeName.toLowerCase() === "select" && this.settings.rules[$(element).attr("name")].required !== false) {
                    // could be an array for select-multiple or a string, both are fine this way
                    return length >= param;
                }

                return this.optional(element) || length >= param;
            }, $.format("Please select at least {0} things."));
            $("#FormStudentCrsDsrData").validate({
                rules: {
                    slcCrs: {
                        required: true,
                        minlength: 2
                    }
                }/*,
                 messages:{
                 slcCrs:{
                 minlength: $.format("Please select at least {0} programs.")
                 }
                 }*/
            });

            $("#SaveCrsDesires").click(function (e) {
                e.preventDefault();
                var saved_data = {};
                desired_arr = [];
                var choosen_courses = $("#slcCrs :selected").get();
                saved_data['desired_courses_arr'] = desired_arr;
                saved_data['reg_type'] = RegType;
                var fun_name = "";
                fun_name = "save_desired_courses";
                if (choosen_courses.length > 0) {
                    for (option in choosen_courses) {
                        choosen_crs_data = {}
                        choosen_crs_data['crs_id'] = choosen_courses[option].attributes['crs_id'].value
                        choosen_crs_data['crs_hours'] = choosen_courses[option].attributes['crs_hours'].value
                        choosen_crs_data['crs_code'] = choosen_courses[option].attributes['crs_code'].value
                        choosen_crs_data['crs_name'] = choosen_courses[option].attributes['crs_name'].value
                        choosen_crs_data['crs_level_id'] = choosen_courses[option].attributes['level_id'].value
                        desired_arr.push(choosen_crs_data)
                    }
                    saved_data['desired_courses_arr'] = desired_arr;
                    save_desires_courses(saved_data, fun_name)
                    return false
                }
                else {
                    jConfirm(getName("هل انت متأكد من حذف الرغبات؟  | are you sure you want to delete all desires?"), Delete, function (answer) {
                        if (!answer) {
                            GetAvaliableCourses()
                            return false;
                        }
                        else {
                            save_desires_courses(saved_data, fun_name)
                            return false
                        }
                    });
                }

            });
        }

        function save_desires_courses(saved_data, fun_name) {
            $.ajax({
                url: "/getJCI",
                type: "post",
                cache: false,
                async: true,
                data: {
                    param0: "AcdRegistration.academicRegistration",
                    param1: fun_name,
                    param2: JSON.stringify(saved_data)
                }, beforeSend: function () {
                    $.blockUI({message: '<h1>' + getName('يرجى الانتظار|Please wait') + '</h1>'})
                },
                success: function (d) {

                    var data = jQuery.parseJSON(d);
                    jAlert(getName(data.msg))
                    $("#SaveDesires").hide();
                    GetAvaliableCourses()

                }, complete: function () {
                    $.unblockUI();
                },
                error: function () {
                    alert(getName("حدث خطأ اثناء حفظ البيانات |data not saved error occur   "))
                    error();
                }
            });

        }
    }

    //    var tornadoData = "{{ data }}"
    //    if (tornadoData) {
    //        var type = "{{ data['type'] }}";
    //        var item = "{{data['item']}}";
    //        PortalLang = "{{data['lang']}}";
    //        if(PortalLang=="en") PortalLang="E";
    //        if(PortalLang=="ar") PortalLang="A";
    //        Lang=PortalLang;
    //        if (type == "studentPortal") {
    //            $("#portalDiv").hide();
    //            setTimeout(function () {
    //                $("#navigation").css("display", "none");
    //                $("#main").css("marginLeft", "0px");
    //                if(item=="AcademicReg") openAcadRegisteration(type);
    //                else if (item=="Questionaire") openQuestionaire(type);
    //                else if (item=="Desires") getDesires(type);
    //                else if (item=="StudentProgress") viewStudentProgress(type);
    //                $("#portalDiv").show();
    //            }, 1000)
    //        }
    //    }
</script>
</BODY>
</HTML>
